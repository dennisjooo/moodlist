2025-11-11 22:13:26 [info     ] Using in-memory cache (no Valkey/Redis URL provided)
2025-11-11 22:13:27 [info     ] Registered tool: get_track_recommendations
2025-11-11 22:13:27 [info     ] Registered tool: get_multiple_tracks
2025-11-11 22:13:27 [info     ] Registered tool: get_track_audio_features
2025-11-11 22:13:27 [info     ] Registered tool: search_artists
2025-11-11 22:13:27 [info     ] Registered tool: get_multiple_artists
2025-11-11 22:13:27 [info     ] Registered tool: get_artist_tracks
2025-11-11 22:13:27 [info     ] Initialized RecoBeat service with all tools
2025-11-11 22:13:27 [info     ] Registered tool: get_user_top_tracks
2025-11-11 22:13:27 [info     ] Registered tool: get_user_top_artists
2025-11-11 22:13:27 [info     ] Registered tool: create_playlist
2025-11-11 22:13:27 [info     ] Registered tool: add_tracks_to_playlist
2025-11-11 22:13:27 [info     ] Registered tool: get_user_profile
2025-11-11 22:13:27 [info     ] Registered tool: search_spotify_artists
2025-11-11 22:13:27 [info     ] Registered tool: get_several_spotify_artists
2025-11-11 22:13:27 [info     ] Registered tool: get_artist_top_tracks
2025-11-11 22:13:27 [info     ] Registered tool: batch_get_artist_top_tracks
2025-11-11 22:13:27 [info     ] Registered tool: search_spotify_tracks
2025-11-11 22:13:27 [info     ] Initialized Spotify service with all tools
2025-11-11 22:13:28 [info     ] Enabling TrustedHostMiddleware allowed_hosts=['moodlist-2rk1.onrender.com', 'localhost', '127.0.0.1']
[2m2025-11-11T15:13:28.299696Z[0m [[32m[1minfo     [0m] [1mLogging configured            [0m [[0m[1m[34mapp.core.logging_config[0m][0m [36mlog_level[0m=[35mINFO[0m
[2m2025-11-11T15:13:28.299909Z[0m [[32m[1minfo     [0m] [1mStarting application          [0m [[0m[1m[34mapp.core.lifespan[0m][0m [36mapp_name[0m=[35m'MoodList API'[0m [36menvironment[0m=[35mdevelopment[0m
[2m2025-11-11T15:13:28.299996Z[0m [[32m[1minfo     [0m] [1mAll required secrets validated successfully[0m [[0m[1m[34mapp.core.validation[0m][0m
[2m2025-11-11T15:13:28.300060Z[0m [[32m[1minfo     [0m] [1mInitializing cache manager with Valkey[0m [[0m[1m[34mapp.core.lifespan[0m][0m [36mredis_url[0m=[35mredis://default:AUXIAAIncDJiZTY1ZTM3MGVkOGE0OTJjOTY5ZjA0ZmU1NmM5Mzk4ZHAyMTc4NjQ@sweeping-lark-17864.upstash.io:6379[0m
[2m2025-11-11T15:13:28.300202Z[0m [[32m[1minfo     [0m] [1mUpgrading Redis URL to TLS for Upstash host[0m [[0m[1m[34mapp.agents.core.cache[0m][0m [36mhost[0m=[35msweeping-lark-17864.upstash.io[0m
[2m2025-11-11T15:13:28.300364Z[0m [[32m[1minfo     [0m] [1mUsing Valkey/Redis cache at redis://default:AUXIAAIncDJiZTY1ZTM3MGVkOGE0OTJjOTY5ZjA0ZmU1NmM5Mzk4ZHAyMTc4NjQ@sweeping-lark-17864.upstash.io:6379[0m [[0m[1m[34mapp.agents.core.cache[0m][0m
INFO:     127.0.0.1:40620 - "OPTIONS /api/agents/recommendations/0821ddf0-68bd-4af1-9b0f-c297cc5249f4 HTTP/1.1" 200 OK
[2m2025-11-11T15:13:34.611478Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_track_recommendations[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.611752Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_multiple_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.611800Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_track_audio_features[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.611833Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.611858Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_multiple_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.611879Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_artist_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.611912Z[0m [[32m[1minfo     [0m] [1mInitialized RecoBeat service with all tools[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:13:34.677144Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677363Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_top_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677408Z[0m [[32m[1minfo     [0m] [1mRegistered tool: create_playlist[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677439Z[0m [[32m[1minfo     [0m] [1mRegistered tool: add_tracks_to_playlist[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677465Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_profile[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677488Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_spotify_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677510Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_several_spotify_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677530Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_artist_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677551Z[0m [[32m[1minfo     [0m] [1mRegistered tool: batch_get_artist_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677570Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_spotify_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.677622Z[0m [[32m[1minfo     [0m] [1mInitialized Spotify service with all tools[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:13:34.692534Z[0m [[32m[1minfo     [0m] [1mInitialized agent: intent_analyzer[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:34.692744Z[0m [[32m[1minfo     [0m] [1mInitialized agent: mood_analyzer[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:34.692838Z[0m [[32m[1minfo     [0m] [1mInitialized agent: seed_gatherer[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:34.692931Z[0m [[32m[1minfo     [0m] [1mInitialized agent: recommendation_generator[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:34.693017Z[0m [[32m[1minfo     [0m] [1mInitialized agent: orchestrator[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:34.763560Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.763833Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_top_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.763876Z[0m [[32m[1minfo     [0m] [1mRegistered tool: create_playlist[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.763909Z[0m [[32m[1minfo     [0m] [1mRegistered tool: add_tracks_to_playlist[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.763936Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_profile[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.763960Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_spotify_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.763984Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_several_spotify_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.764005Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_artist_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.764023Z[0m [[32m[1minfo     [0m] [1mRegistered tool: batch_get_artist_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.764041Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_spotify_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:13:34.764067Z[0m [[32m[1minfo     [0m] [1mInitialized Spotify service with all tools[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:13:34.764141Z[0m [[32m[1minfo     [0m] [1mInitialized agent: PlaylistOrderingAgent[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:34.764303Z[0m [[32m[1minfo     [0m] [1mInitialized WorkflowManager with 6 agents[0m [[0m[1m[34mapp.agents.workflows.workflow_manager[0m][0m
[2m2025-11-11T15:13:34.764889Z[0m [[33m[1mwarning  [0m] [1mAttempted to cancel non-existent workflow 0821ddf0-68bd-4af1-9b0f-c297cc5249f4[0m [[0m[1m[34mapp.agents.workflows.workflow_manager[0m][0m
[2m2025-11-11T15:13:35.027322Z[0m [[32m[1minfo     [0m] [1mUpdated playlist status to cancelled[0m [[0m[1m[34mapp.agents.routes.recommendations[0m][0m [36mplaylist_id[0m=[35m68[0m
INFO:     127.0.0.1:40788 - "DELETE /api/agents/recommendations/0821ddf0-68bd-4af1-9b0f-c297cc5249f4 HTTP/1.1" 200 OK
[2m2025-11-11T15:13:35.655122Z[0m [[32m[1minfo     [0m] [1mInitialized Redis connection pool with 50 max connections[0m [[0m[1m[34mapp.agents.core.cache[0m][0m [36musing_tls[0m=[35mTrue[0m
INFO:     127.0.0.1:40788 - "GET /api/agents/recommendations/0821ddf0-68bd-4af1-9b0f-c297cc5249f4/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:40800 - "GET /api/auth/quota HTTP/1.1" 200 OK
INFO:     127.0.0.1:40788 - "GET /api/agents/recommendations/0821ddf0-68bd-4af1-9b0f-c297cc5249f4/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:40808 - "GET /api/playlists?limit=12&offset=0&exclude_statuses=failed%2Ccancelled&sort_by=created_at&sort_order=desc HTTP/1.1" 200 OK
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/0821ddf0-68bd-4af1-9b0f-c297cc5249f4/results HTTP/1.1" 200 OK
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/0821ddf0-68bd-4af1-9b0f-c297cc5249f4/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:40808 - "GET /api/agents/recommendations/0821ddf0-68bd-4af1-9b0f-c297cc5249f4/results HTTP/1.1" 200 OK
INFO:     127.0.0.1:40808 - "GET /api/agents/recommendations/0821ddf0-68bd-4af1-9b0f-c297cc5249f4/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:40808 - "GET /api/auth/quota HTTP/1.1" 200 OK
[2m2025-11-11T15:13:44.759407Z[0m [[32m[1minfo     [0m] [1mStarting recommendation workflow[0m [[0m[1m[34mapp.agents.routes.recommendations[0m][0m [36mmood_prompt[0m=[35m'I want something Indie, like Mac Demarco and Men I Trust.'[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T15:13:44.759870Z[0m [[32m[1minfo     [0m] [1mStarted workflow ef0dd793-7796-4454-bd57-d376cad4a2fd for mood: I want something Indie, like Mac Demarco and Men I...[0m [[0m[1m[34mapp.agents.workflows.workflow_manager[0m][0m
[2m2025-11-11T15:13:44.762121Z[0m [[32m[1minfo     [0m] [1mExecuting workflow ef0dd793-7796-4454-bd57-d376cad4a2fd[0m [[0m[1m[34mapp.agents.workflows.workflow_manager[0m][0m
[2m2025-11-11T15:13:44.762316Z[0m [[32m[1minfo     [0m] [1mAgent intent_analyzer starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:44.762538Z[0m [[32m[1minfo     [0m] [1mAnalyzing intent for prompt: I want something Indie, like Mac Demarco and Men I Trust.[0m [[0m[1m[34mapp.agents.recommender.intent_analyzer.intent_analyzer_agent[0m][0m
[2m2025-11-11T15:13:44.971762Z[0m [[32m[1minfo     [0m] [1mPlaylist created for session  [0m [[0m[1m[34mapp.repositories.base_repository[0m][0m [36mplaylist_id[0m=[35m69[0m [36mrepository[0m=[35mPlaylistRepository[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T15:13:44.972065Z[0m [[32m[1minfo     [0m] [1mCreated playlist record       [0m [[0m[1m[34mapp.agents.routes.recommendations[0m][0m [36mplaylist_id[0m=[35m69[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
INFO:     127.0.0.1:40808 - "POST /api/agents/recommendations/start?mood_prompt=I+want+something+Indie%2C+like+Mac+Demarco+and+Men+I+Trust. HTTP/1.1" 200 OK
INFO:     127.0.0.1:40808 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:40812 - "GET /api/auth/quota HTTP/1.1" 200 OK
INFO:     127.0.0.1:40808 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:40808 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:40808 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/status HTTP/1.1" 200 OK
[2m2025-11-11T15:13:46.799939Z[0m [[32m[1minfo     [0m] [1mWebSocket connection accepted [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:46.800093Z[0m [[32m[1minfo     [0m] [1mWebSocket auth attempt        [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36mcookies_keys[0m=[35m['session_token', '__next_hmr_refresh_hash__'][0m [36mhas_query_params[0m=[35mFalse[0m [36mhas_token[0m=[35mTrue[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:47.008005Z[0m [[32m[1minfo     [0m] [1mWebSocket authenticated successfully[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T15:13:47.008625Z[0m [[32m[1minfo     [0m] [1mWebSocket subscribed to state changes[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
INFO:     127.0.0.1:40808 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/status HTTP/1.1" 200 OK
[2m2025-11-11T15:13:47.314055Z[0m [[32m[1minfo     [0m] [1mLLM intent analysis: The user explicitly requested the genre 'Indie' and named two specific artists (Mac Demarco and Men I Trust) whose styles define the desired sound, indicating a focus on artists similar to those mentioned.[0m [[0m[1m[34mapp.agents.recommender.intent_analyzer.intent_analyzer_agent[0m][0m
[2m2025-11-11T15:13:47.314383Z[0m [[32m[1minfo     [0m] [1mIntent analysis completed     [0m [[0m[1m[34mapp.agents.recommender.intent_analyzer.intent_analyzer_agent[0m][0m [36mgenre_strictness[0m=[35m0.8[0m [36mintent_type[0m=[35martist_focus[0m [36mmentioned_artists_count[0m=[35m2[0m [36mmentioned_tracks_count[0m=[35m0[0m [36mprimary_genre[0m=[35m'indie rock'[0m
[2m2025-11-11T15:13:47.314465Z[0m [[32m[1minfo     [0m] [1mUser mentioned artists: Mac Demarco, Men I Trust[0m [[0m[1m[34mapp.agents.recommender.intent_analyzer.intent_analyzer_agent[0m][0m
[2m2025-11-11T15:13:47.314542Z[0m [[32m[1minfo     [0m] [1mAgent intent_analyzer completed execution in 2.552136s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:13:47.504188Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35manalyzing_intent[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35manalyzing_mood[0m
[2m2025-11-11T15:13:47.504987Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:47.505167Z[0m [[32m[1minfo     [0m] [1mAgent mood_analyzer starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:47.505377Z[0m [[32m[1minfo     [0m] [1mAnalyzing mood prompt: I want something Indie, like Mac Demarco and Men I Trust.[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T15:13:47.505442Z[0m [[32m[1minfo     [0m] [1mPerforming mood analysis for audio features[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T15:13:47.509601Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:47.509753Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:47.509806Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35manalyzing_mood[0m [36mnew_step[0m=[35manalyzing_mood[0m [36mold_status[0m=[35manalyzing_mood[0m [36mold_step[0m=[35manalyzing_intent[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:47.509860Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35manalyzing_mood[0m [36mstep[0m=[35manalyzing_mood[0m
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:13:52.088196Z[0m [[32m[1minfo     [0m] [1mUser mentioned 2 artist(s): Mac Demarco, Men I Trust. These will be processed by BOTH UserAnchorStrategy and ArtistDiscovery for redundancy.[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T15:13:52.089441Z[0m [[32m[1minfo     [0m] [1mMood analysis: 5 genres, primary emotion: Relaxed, Nostalgic, Dreamy[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T15:13:52.089844Z[0m [[32m[1minfo     [0m] [1mExtracted target features: ['acousticness', 'danceability', 'energy', 'instrumentalness', 'key', 'liveness', 'loudness', 'mode', 'speechiness', 'tempo', 'valence', 'popularity'][0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.features.feature_extractor[0m][0m
[2m2025-11-11T15:13:52.090019Z[0m [[32m[1minfo     [0m] [1mTarget features: ['acousticness', 'danceability', 'energy', 'instrumentalness', 'key', 'liveness', 'loudness', 'mode', 'speechiness', 'tempo', 'valence', 'popularity'][0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T15:13:52.090141Z[0m [[32m[1minfo     [0m] [1mFeature weights: {'acousticness': 0.85, 'danceability': 0.6, 'energy': 0.7, 'instrumentalness': 0.4, 'liveness': 0.1, 'loudness': 0.9, 'tempo': 0.75, 'valence': 0.65}[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T15:13:52.090304Z[0m [[32m[1minfo     [0m] [1mPlaylist target: 18 tracks (min: 12, max: 25) - Specific mood requires focused, high-quality selection (niche mood may have limited matches)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T15:13:52.090389Z[0m [[32m[1minfo     [0m] [1mMood analysis completed (focused on audio features)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T15:13:52.090506Z[0m [[32m[1minfo     [0m] [1mAgent mood_analyzer completed execution in 4.585231s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:52.312784Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35manalyzing_mood[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35manalyzing_mood[0m
[2m2025-11-11T15:13:52.313208Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.314259Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.314369Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.502183Z[0m [[32m[1minfo     [0m] [1mRefreshing expired Spotify token for user 1[0m [[0m[1m[34mapp.agents.workflows.workflow_executor[0m][0m
[2m2025-11-11T15:13:52.810478Z[0m [[32m[1minfo     [0m] [1mSuccessfully refreshed Spotify token for user 1, expires at 2025-11-11 16:13:52+00:00[0m [[0m[1m[34mapp.agents.workflows.workflow_executor[0m][0m
[2m2025-11-11T15:13:52.810935Z[0m [[32m[1minfo     [0m] [1mAgent orchestrator starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:52.811109Z[0m [[32m[1minfo     [0m] [1mStarting orchestration for session ef0dd793-7796-4454-bd57-d376cad4a2fd[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:13:52.811174Z[0m [[32m[1minfo     [0m] [1mInitial seed gathering...     [0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:13:52.811250Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T15:13:52.811315Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.811368Z[0m [[32m[1minfo     [0m] [1mAgent seed_gatherer starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:13:52.811426Z[0m [[32m[1minfo     [0m] [1mGathering seeds for user 1    [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T15:13:52.811487Z[0m [[32m[1minfo     [0m] [1mSelecting anchor tracks       [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T15:13:52.811540Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_selecting_anchors[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T15:13:52.811593Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.811934Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.812010Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.812053Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_selecting_anchors[0m [36mold_status[0m=[35manalyzing_mood[0m [36mold_step[0m=[35manalyzing_mood[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.812105Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_selecting_anchors[0m
[2m2025-11-11T15:13:52.812551Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.812636Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:13:52.834952Z[0m [[32m[1minfo     [0m] [1mâœ“ Passing 2 user-mentioned artists to anchor selection: ['Mac Demarco', 'Men I Trust'] (limit increased from 5 to 6)[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:13:54.185046Z[0m [[32m[1minfo     [0m] [1mLLM found no specific tracks mentioned in prompt[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T15:13:54.185315Z[0m [[32m[1minfo     [0m] [1mFound 0 user-mentioned tracks as anchors[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:13:54.185398Z[0m [[32m[1minfo     [0m] [1mâœ“ Prioritizing 2 user-mentioned artists: ['Mac Demarco', 'Men I Trust'][0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:13:54.185543Z[0m [[32m[1minfo     [0m] [1mâœ“ Detected user-mentioned artist for anchor search: Mac Demarco[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.185611Z[0m [[32m[1minfo     [0m] [1mâœ“ Detected user-mentioned artist for anchor search: Men I Trust[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.185646Z[0m [[32m[1minfo     [0m] [1mâœ“ Detected user-mentioned artist for anchor search: Mac DeMarco[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.185681Z[0m [[32m[1minfo     [0m] [1mProcessing 8 artists for anchors: 3 user-mentioned + 5 others[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.185855Z[0m [[32m[1minfo     [0m] [1mSearching for 8 artists in parallel[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.186044Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Mac Demarco[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.186140Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Mac Demarco' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:54.186411Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Men I Trust[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.186480Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Men I Trust' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:54.192885Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Mac DeMarco[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.193117Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Mac DeMarco' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:54.193292Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Khruangbin[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.193395Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Khruangbin' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:54.193555Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Rex Orange County[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.193658Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Rex Orange County' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:54.193797Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Beabadoobee[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.193902Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Beabadoobee' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:54.194033Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Toro y Moi[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.194111Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Toro y Moi' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:54.194186Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Mild High Club[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:54.194252Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Mild High Club' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:54.194325Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: indie rock[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:13:54.194463Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:indie rock' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.195244Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: indie rock[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:13:54.195368Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:indie rock' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.195776Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: dream pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:13:54.195864Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:dream pop' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.196157Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: bedroom pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:13:54.196273Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:bedroom pop' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.196612Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: slacker rock[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:13:54.196697Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:slacker rock' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.197314Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: psychedelic pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:13:54.197407Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:psychedelic pop' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.778606Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:psychedelic pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.803850Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:indie rock'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.850683Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:indie rock'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.874753Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:dream pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.885258Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:bedroom pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:54.937449Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:slacker rock'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:13:55.302073Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Mac Demarco'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:55.507841Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Men I Trust'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:55.508677Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Mac DeMarco'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:55.508828Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Beabadoobee'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:55.508972Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Khruangbin'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:01.880381Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Toro y Moi'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:01.880813Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Rex Orange County'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:01.903806Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Mild High Club'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:01.904270Z[0m [[32m[1minfo     [0m] [1mFound 8 artists out of 8 searches[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:14:01.904398Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for 8 artists in parallel[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:14:01.937011Z[0m [[32m[1minfo     [0m] [1mGetting top tracks for artist 7pbDxGE6nQSZVfiFdq9lOL in market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:55.662506Z[0m [[32m[1minfo     [0m] [1mRetrieved 15 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m100.0%[0m [36mtotal_requested[0m=[35m15[0m
[2m2025-11-11T15:13:55.662802Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{15}[0m [36mknown_missing[0m=[35m{0}[0m
[2m2025-11-11T15:13:55.662875Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 15/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:13:55.689216Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 top tracks for artist 7pbDxGE6nQSZVfiFdq9lOL using market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:13:55.733072Z[0m [[32m[1minfo     [0m] [1mCreated 30 anchor candidates from 8 artists[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T15:13:56.002860Z[0m [[32m[1minfo     [0m] [1mAll 15 tracks found in cache  [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:13:56.340200Z[0m [[32m[1minfo     [0m] [1mRetrieved 6 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m40.0%[0m [36mtotal_requested[0m=[35m15[0m
[2m2025-11-11T15:13:56.565643Z[0m [[32m[1minfo     [0m] [1mSkipped 8 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m88.9%[0m [36mtotal_ids[0m=[35m9[0m
[2m2025-11-11T15:13:56.566097Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:13:57.358607Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:13:57.408325Z[0m [[32m[1minfo     [0m] [1mConverted 7/15 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{6}[0m [36mknown_missing[0m=[35m{8}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:13:57.408738Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 7/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:13:57.593021Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 6) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:13:59.766071Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:00.118678Z[0m [[32m[1minfo     [0m] [1mRetrieved 3 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m20.0%[0m [36mtotal_requested[0m=[35m15[0m
[2m2025-11-11T15:14:00.400275Z[0m [[32m[1minfo     [0m] [1mSkipped 12 known-missing IDs  [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m100.0%[0m [36mtotal_ids[0m=[35m12[0m
[2m2025-11-11T15:14:00.400537Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{3}[0m [36mknown_missing[0m=[35m{12}[0m
[2m2025-11-11T15:14:00.400611Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:00.474702Z[0m [[32m[1minfo     [0m] [1mAll 15 tracks found in cache  [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:06.917390Z[0m [[32m[1minfo     [0m] [1mRetrieved 13 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m86.7%[0m [36mtotal_requested[0m=[35m15[0m
[2m2025-11-11T15:14:06.960743Z[0m [[32m[1minfo     [0m] [1mSkipped 2 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m100.0%[0m [36mtotal_ids[0m=[35m2[0m
[2m2025-11-11T15:14:06.961036Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{13}[0m [36mknown_missing[0m=[35m{2}[0m
[2m2025-11-11T15:14:06.961129Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 13/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:00.683215Z[0m [[32m[1minfo     [0m] [1mAll 15 tracks found in cache  [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:01.014522Z[0m [[32m[1minfo     [0m] [1mRetrieved 7 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m46.7%[0m [36mtotal_requested[0m=[35m15[0m
[2m2025-11-11T15:14:01.193323Z[0m [[32m[1minfo     [0m] [1mSkipped 8 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m100.0%[0m [36mtotal_ids[0m=[35m8[0m
[2m2025-11-11T15:14:01.193622Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{7}[0m [36mknown_missing[0m=[35m{8}[0m
[2m2025-11-11T15:14:01.193733Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 7/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:01.354262Z[0m [[32m[1minfo     [0m] [1mAll 15 tracks found in cache  [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:01.355134Z[0m [[32m[1minfo     [0m] [1mFound 30 artist-based track candidates from 16 artists[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:14:01.355206Z[0m [[32m[1minfo     [0m] [1mFound 75 genre-based track candidates[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:14:01.355425Z[0m [[32m[1minfo     [0m] [1mBatch fetching audio features for 100 tracks from all sources[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:14:04.868058Z[0m [[32m[1minfo     [0m] [1mRetrieved 65 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m65.0%[0m [36mtotal_requested[0m=[35m100[0m
[2m2025-11-11T15:14:06.036946Z[0m [[32m[1minfo     [0m] [1mSkipped 31 known-missing IDs  [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m88.6%[0m [36mtotal_ids[0m=[35m35[0m
[2m2025-11-11T15:14:06.037420Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:14:06.374063Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:14:06.626403Z[0m [[32m[1minfo     [0m] [1mConverted 69/100 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{65}[0m [36mknown_missing[0m=[35m{31}[0m [36mnewly_converted[0m=[35m{4}[0m
[2m2025-11-11T15:14:06.626623Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 69/100 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:08.868587Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 4 tracks (cached: 65) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:10.634027Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 4/4 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:10.634387Z[0m [[32m[1minfo     [0m] [1mSuccessfully attached audio features to 74 candidates[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:14:12.846307Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:17.390448Z[0m [[32m[1minfo     [0m] [1mLLM track filtering: kept 20/105 tracks (0 protected from filtering)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T15:14:22.512609Z[0m [[33m[1mwarning  [0m] [1mNo JSON object found in LLM response[0m [[0m[1m[34mapp.agents.recommender.utils.llm_response_parser[0m][0m
[2m2025-11-11T15:14:22.512944Z[0m [[32m[1minfo     [0m] [1mLLM determined anchor selection strategy[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T15:14:25.614873Z[0m [[32m[1minfo     [0m] [1mLLM scored 5 anchor candidates[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T15:14:25.615122Z[0m [[32m[1minfo     [0m] [1mâœ“ Guaranteed inclusion of 2 user-mentioned tracks[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T15:14:29.907476Z[0m [[32m[1minfo     [0m] [1mâœ“ LLM selected 3 additional anchor tracks: Since the target number of anchors is 3 and only three candidates were provided, all tracks must be selected. All candidates share the highest available score (0.80), making them equally valid anchors representing the required laid-back, hazy, lo-fi aesthetic.[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T15:14:29.907683Z[0m [[32m[1minfo     [0m] [1mFinal anchor selection: 2 user-mentioned + 3 LLM-selected = 5 total[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T15:14:29.907756Z[0m [[32m[1minfo     [0m] [1mLLM-selected 5 anchor tracks from 105 candidates[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T15:14:29.943692Z[0m [[32m[1minfo     [0m] [1mCached 5 anchor tracks        [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T15:14:29.943923Z[0m [[32m[1minfo     [0m] [1mâœ“ Selected 5 anchor tracks    [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T15:14:29.943995Z[0m [[32m[1minfo     [0m] [1mDiscovering artists           [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T15:14:29.944087Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_discovering_artists[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T15:14:29.944165Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:29.944261Z[0m [[32m[1minfo     [0m] [1mStarting artist discovery for mood[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:29.944319Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Mac DeMarco[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:29.944368Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Mac DeMarco' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:29.944684Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:29.944763Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:29.944806Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_discovering_artists[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_selecting_anchors[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:29.944872Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_discovering_artists[0m
[2m2025-11-11T15:14:29.969379Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Mac DeMarco'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:29.969660Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Men I Trust[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:29.969727Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Men I Trust' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.003468Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Men I Trust'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.003733Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Khruangbin[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:30.003792Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Khruangbin' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.026663Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Khruangbin'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.027070Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Rex Orange County[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:30.027123Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Rex Orange County' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.085405Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Rex Orange County'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.085622Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Beabadoobee[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:30.085668Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Beabadoobee' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.122359Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Beabadoobee'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.122610Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Toro y Moi[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:30.122672Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Toro y Moi' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.186443Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Toro y Moi'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.186871Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Mild High Club[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:30.186928Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Mild High Club' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.232137Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Mild High Club'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.232411Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Beach Fossils[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:30.232478Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Beach Fossils' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:36.923830Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Beach Fossils'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:36.924107Z[0m [[32m[1minfo     [0m] [1mFound 24 artists from LLM suggestions[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:36.924364Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: indie rock[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:36.924437Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:indie rock' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:36.924774Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: dream pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:36.924837Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:dream pop' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:36.924957Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: bedroom pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:36.925024Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:bedroom pop' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:36.925140Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: slacker rock[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:36.925201Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:slacker rock' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:36.925324Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: psychedelic pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:36.925378Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:psychedelic pop' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:14:30.739580Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 0 artists for query 'genre:slacker rock'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.739807Z[0m [[32m[1minfo     [0m] [1mFound 0 artists for genre: slacker rock[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:30.739882Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:slacker rock' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:30.740518Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 0 artists for query 'genre:dream pop'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.740600Z[0m [[32m[1minfo     [0m] [1mFound 0 artists for genre: dream pop[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:30.740652Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:dream pop' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:30.744215Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 0 artists for query 'genre:bedroom pop'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.744362Z[0m [[32m[1minfo     [0m] [1mFound 0 artists for genre: bedroom pop[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:30.744422Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:bedroom pop' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:30.851885Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 40 artists for query 'genre:indie rock'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.852339Z[0m [[32m[1minfo     [0m] [1mFound 40 artists for genre: indie rock[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:30.852444Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:indie rock' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:30.853452Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 1 artists for query 'genre:psychedelic pop'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:30.853555Z[0m [[32m[1minfo     [0m] [1mFound 1 artists for genre: psychedelic pop[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:30.853610Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:psychedelic pop' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:31.437968Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:slacker rock'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:31.438672Z[0m [[32m[1minfo     [0m] [1mExtracted 14 unique artists from 30 tracks for query 'genre:slacker rock'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:31.499447Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:dream pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:31.499723Z[0m [[32m[1minfo     [0m] [1mExtracted 18 unique artists from 30 tracks for query 'genre:dream pop'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:31.512926Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:psychedelic pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:31.513276Z[0m [[32m[1minfo     [0m] [1mExtracted 19 unique artists from 30 tracks for query 'genre:psychedelic pop'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:31.550290Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:indie rock'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:31.550742Z[0m [[32m[1minfo     [0m] [1mExtracted 12 unique artists from 30 tracks for query 'genre:indie rock'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:31.592250Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:bedroom pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:14:31.592531Z[0m [[32m[1minfo     [0m] [1mExtracted 7 unique artists from 30 tracks for query 'genre:bedroom pop'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:31.592624Z[0m [[32m[1minfo     [0m] [1mFound 111 artists from genre search[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:31.592736Z[0m [[32m[1minfo     [0m] [1mFound 125 unique artists from search[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:31.593044Z[0m [[32m[1minfo     [0m] [1mHeuristic pruning: 125 â†’ 30 artists (filtered 95 low-quality/irrelevant)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:31.593106Z[0m [[32m[1minfo     [0m] [1mAfter heuristic pruning: 30 artists (from 125)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:36.791782Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:40.894518Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m3[0m [36martist_name[0m=[35m'The Strokes'[0m [36mreason[0m=[35m'While indie rock, their sound is generally sharper garage rock, lacking the hazy, laid-back, or dream pop elements central to Mac DeMarco and Men I Trust.'[0m
[2m2025-11-11T15:14:40.894768Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m8[0m [36martist_name[0m=[35mRadiohead[0m [36mreason[0m=[35m'Genre mismatch; their style leans heavily into art rock and complex alternative rock, deviating from the requested lo-fi/dream pop aesthetic.'[0m
[2m2025-11-11T15:14:40.894843Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m9[0m [36martist_name[0m=[35m'Tame Impala'[0m [36mreason[0m=[35m'While neo-psychedelic, their production is often too polished and grand compared to the intimate, lo-fi feel of the reference artists.'[0m
[2m2025-11-11T15:14:40.894893Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m10[0m [36martist_name[0m=[35m'Arctic Monkeys'[0m [36mreason[0m=[35m'Primarily garage rock/indie rock; style does not match the requested hazy/dreamy mood.'[0m
[2m2025-11-11T15:14:40.894962Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m11[0m [36martist_name[0m=[35mOasis[0m [36mreason[0m=[35m'Genre mismatch; Britpop is stylistically distant from lo-fi bedroom pop and jizz jazz.'[0m
[2m2025-11-11T15:14:40.895060Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m12[0m [36martist_name[0m=[35mNirvana[0m [36mreason[0m=[35m'Genre mismatch; Grunge is stylistically inappropriate for this request.'[0m
[2m2025-11-11T15:14:40.895135Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m14[0m [36martist_name[0m=[35m'The Killers'[0m [36mreason[0m=[35m'Arena alternative rock; too energetic and polished for the laid-back vibe.'[0m
[2m2025-11-11T15:14:40.895205Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m15[0m [36martist_name[0m=[35m'The Cure'[0m [36mreason[0m=[35m'Genre mismatch; new wave/gothic rock is too dark compared to the requested light, hazy mood.'[0m
[2m2025-11-11T15:14:40.895280Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m16[0m [36martist_name[0m=[35m'The Lumineers'[0m [36mreason[0m=[35m'Genre mismatch; folk pop is not aligned with dream pop or slacker rock.'[0m
[2m2025-11-11T15:14:40.895332Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m17[0m [36martist_name[0m=[35m'Pearl Jam'[0m [36mreason[0m=[35m'Genre mismatch; grunge/rock is stylistically inappropriate.'[0m
[2m2025-11-11T15:14:40.895389Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m18[0m [36martist_name[0m=[35m.Feast[0m [36mreason[0m=[35m'Primarily Indonesian indie/rock, which does not align with the specific Western indie/dream pop aesthetic requested.'[0m
[2m2025-11-11T15:14:40.895468Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m19[0m [36martist_name[0m=[35mTulus[0m [36mreason[0m=[35m'Primarily Indonesian pop/jazz, which does not align with the specific Western indie/dream pop aesthetic requested.'[0m
[2m2025-11-11T15:14:40.895535Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m21[0m [36martist_name[0m=[35m'Jason Mraz'[0m [36mreason[0m=[35m'Genre mismatch; soft pop lacks the necessary indie edge.'[0m
[2m2025-11-11T15:14:40.895608Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m24[0m [36martist_name[0m=[35mPerunggu[0m [36mreason[0m=[35m'Primarily Indonesian indie rock, which does not align with the specific Western indie/dream pop aesthetic requested.'[0m
[2m2025-11-11T15:14:40.895675Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m25[0m [36martist_name[0m=[35m'Budi Doremi'[0m [36mreason[0m=[35m'Primarily Indonesian pop, which does not align with the specific Western indie/dream pop aesthetic requested.'[0m
[2m2025-11-11T15:14:40.895741Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m26[0m [36martist_name[0m=[35m'Reality Club'[0m [36mreason[0m=[35m'Primarily Indonesian indie, which does not align with the specific Western indie/dream pop aesthetic requested.'[0m
[2m2025-11-11T15:14:40.895793Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m27[0m [36martist_name[0m=[35mBarasuara[0m [36mreason[0m=[35m'Primarily Indonesian indie rock, which does not align with the specific Western indie/dream pop aesthetic requested.'[0m
[2m2025-11-11T15:14:40.895850Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m29[0m [36martist_name[0m=[35mRAN[0m [36mreason[0m=[35m'Primarily Indonesian pop/jazz/R&B, which does not align with the specific Western indie/dream pop aesthetic requested.'[0m
[2m2025-11-11T15:14:40.895924Z[0m [[32m[1minfo     [0m] [1mLLM batch validation: kept 12/30 artists[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:40.895974Z[0m [[32m[1minfo     [0m] [1mAfter LLM batch validation: 12 artists[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:40.896063Z[0m [[32m[1minfo     [0m] [1mDiscovered 12 mood-matched artists: ['beabadoobee', 'Clairo', 'Rex Orange County', 'Beach House', 'Mazzy Star'][0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T15:14:40.896330Z[0m [[32m[1minfo     [0m] [1mâœ“ Discovered 12 artists       [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T15:14:40.896494Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_fetching_top_tracks[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T15:14:40.896607Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:40.897135Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:40.897252Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:40.897324Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_fetching_top_tracks[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_discovering_artists[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:40.897437Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_fetching_top_tracks[0m
[2m2025-11-11T15:14:40.923441Z[0m [[32m[1minfo     [0m] [1mGetting top 20 tracks for user (time_range: medium_term)[0m [[0m[1m[34mapp.agents.tools.spotify.user_data[0m][0m
[2m2025-11-11T15:14:41.401882Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 20 top tracks[0m [[0m[1m[34mapp.agents.tools.spotify.user_data[0m][0m
[2m2025-11-11T15:14:41.425560Z[0m [[32m[1minfo     [0m] [1mCached top tracks for user 1  [0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:41.426024Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_fetching_top_artists[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T15:14:41.426165Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.426686Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.426781Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.426831Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_fetching_top_artists[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_fetching_top_tracks[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.426923Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_fetching_top_artists[0m
[2m2025-11-11T15:14:41.448273Z[0m [[32m[1minfo     [0m] [1mGetting top 15 artists for user (time_range: medium_term)[0m [[0m[1m[34mapp.agents.tools.spotify.user_data[0m][0m
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:14:41.814218Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 15 top artists[0m [[0m[1m[34mapp.agents.tools.spotify.user_data[0m][0m
[2m2025-11-11T15:14:41.848489Z[0m [[32m[1minfo     [0m] [1mCached top artists for user 1 [0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:41.848894Z[0m [[32m[1minfo     [0m] [1mBuilding seed pool            [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T15:14:41.849079Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_building_pool[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T15:14:41.849185Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.849260Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_analyzing_features[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T15:14:41.849316Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.849427Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 20 tracks[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.audio_enricher[0m][0m
[2m2025-11-11T15:14:41.849987Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.850084Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.850143Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_analyzing_features[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_fetching_top_artists[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.850272Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_analyzing_features[0m
[2m2025-11-11T15:14:41.850901Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:41.850985Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:14:42.298739Z[0m [[32m[1minfo     [0m] [1mRetrieved 19 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m95.0%[0m [36mtotal_requested[0m=[35m20[0m
[2m2025-11-11T15:14:42.321683Z[0m [[32m[1minfo     [0m] [1mSkipped 1 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m100.0%[0m [36mtotal_ids[0m=[35m1[0m
[2m2025-11-11T15:14:42.321919Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{19}[0m [36mknown_missing[0m=[35m{1}[0m
[2m2025-11-11T15:14:42.321977Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 19/20 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:14:42.753114Z[0m [[32m[1minfo     [0m] [1mAll 20 tracks found in cache  [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:42.753627Z[0m [[32m[1minfo     [0m] [1mSuccessfully enriched 19 tracks with audio features[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.audio_enricher[0m][0m
[2m2025-11-11T15:14:42.753749Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_selecting_seeds[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T15:14:42.753858Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:42.754174Z[0m [[32m[1minfo     [0m] [1mScored 20 tracks, top score: 0.95[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_selector[0m][0m
[2m2025-11-11T15:14:42.754265Z[0m [[32m[1minfo     [0m] [1mLLM selecting seeds from 12 candidates for mood: 'I want something Indie, like Mac Demarco and Men I Trust.'[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.llm_seed_selector[0m][0m
[2m2025-11-11T15:14:42.756874Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:42.756997Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:42.757053Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_selecting_seeds[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_analyzing_features[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:42.757151Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_selecting_seeds[0m
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:14:45.027269Z[0m [[32m[1minfo     [0m] [1mLLM selected 6 seeds: The selection prioritizes the top 6 ranked tracks (1 through 6) as they are statistically the best matches for the requested Indie/Mac Demarco/Men I Trust mood. However, to ensure slight diversity while maintaining high quality, Track 6 was swapped for Track 7 (the next highest ranked track that wasn't already selected) and Track 4 was swapped for Track 5 to maintain a strong core of the top matches while ensuring a good spread among the highest-scoring options. The final selection focuses on the top 9 ranked tracks, ensuring the strongest mood alignment while sampling across the very best candidates.[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.llm_seed_selector[0m][0m
[2m2025-11-11T15:14:45.027491Z[0m [[32m[1minfo     [0m] [1mSelected 6 seeds for target of 18 tracks (ratio: 1:3)[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T15:14:45.027614Z[0m [[32m[1minfo     [0m] [1mâœ“ Built seed pool: 6 seeds, 0 user-mentioned, 5 anchors, 12 artists[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T15:14:45.027725Z[0m [[32m[1minfo     [0m] [1mSeed gathering completed      [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m [36mbuild_seed_pool_seconds[0m=[35m3.18[0m [36mdiscover_artists_seconds[0m=[35m10.95[0m [36mfetch_top_artists_seconds[0m=[35m0.42[0m [36mfetch_top_tracks_seconds[0m=[35m0.53[0m [36msearch_user_tracks_seconds[0m=[35m0.00[0m [36mselect_anchors_seconds[0m=[35m37.13[0m [36mtotal_time_seconds[0m=[35m52.22[0m
[2m2025-11-11T15:14:45.027868Z[0m [[32m[1minfo     [0m] [1mAgent seed_gatherer completed execution in 52.216447s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:14:45.027949Z[0m [[32m[1minfo     [0m] [1mInitial recommendation generation...[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:14:45.028032Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T15:14:45.028121Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:45.028184Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:14:45.028259Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations for mood: I want something Indie, like Mac Demarco and Men I Trust.[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T15:14:45.028335Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T15:14:45.028393Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:45.028453Z[0m [[32m[1minfo     [0m] [1mSplit WITH user mentions: 7 user anchor, 7 artists, 2 seeds (total: 18)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:14:45.028498Z[0m [[32m[1minfo     [0m] [1mExecuting recommendation strategies in parallel[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:14:45.033329Z[0m [[32m[1minfo     [0m] [1mUser anchor strategy: 0 tracks, 2 artists[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:14:45.033755Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations from 12 discovered artists[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:14:45.035018Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Mac Demarco' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.035368Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Men I Trust' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.035803Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:45.035898Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:45.035980Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_selecting_seeds[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:45.036082Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m [36mstep[0m=[35mgenerating_recommendations_fetching[0m
[2m2025-11-11T15:14:45.036520Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:45.036597Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:14:45.059296Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Men I Trust'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.059603Z[0m [[32m[1minfo     [0m] [1mâœ“ Spotify search for 'Men I Trust' matched: 'Men I Trust' (ID: 3zmfs9cQwzJl575W1ZYXeT)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:14:45.059765Z[0m [[32m[1minfo     [0m] [1mCache miss for recommendations, fetching from API[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:45.060105Z[0m [[32m[1minfo     [0m] [1mCache miss for recommendations, fetching from API[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:45.060469Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Mac Demarco'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.060574Z[0m [[32m[1minfo     [0m] [1mâœ“ Spotify search for 'Mac Demarco' matched: 'Mac DeMarco' (ID: 3Sz7ZnJQBIHsXLUSo0OQtM)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:14:45.103102Z[0m [[32m[1minfo     [0m] [1mGetting 4 recommendations for 3 seeds[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:14:45.103403Z[0m [[32m[1minfo     [0m] [1mGetting 4 recommendations for 3 seeds[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:14:45.160995Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (max_popularity: 95, ratio: 70.0%, target: 2 top + 1 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.161174Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 30-95[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.161217Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.228485Z[0m [[32m[1minfo     [0m] [1mToken still valid until 2025-11-11 16:13:52+00:00, no refresh needed[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.token[0m][0m
[2m2025-11-11T15:14:45.256459Z[0m [[32m[1minfo     [0m] [1mFetching 3 tracks from up to 12 artists (target: 7 tracks after filtering)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
INFO:     127.0.0.1:40812 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:14:45.773950Z[0m [[32m[1minfo     [0m] [1mBatch artist top tracks fetched[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m [36mfailed[0m=[35m0[0m [36mrequested[0m=[35m1[0m [36msucceeded[0m=[35m1[0m
[2m2025-11-11T15:14:45.797714Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 1/12: 35l9BRT7MXmM8bv2WDQiyB[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:14:45.798068Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 35l9BRT7MXmM8bv2WDQiyB (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.798145Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 8/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.798194Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 35l9BRT7MXmM8bv2WDQiyB[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.798261Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 2/12: 3l0CmX0FuQjFxr8SK7Vqag[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:14:45.798305Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3l0CmX0FuQjFxr8SK7Vqag (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.798338Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.798382Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3l0CmX0FuQjFxr8SK7Vqag[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.548132Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:45.548402Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:46.731745Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 35l9BRT7MXmM8bv2WDQiyB[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:46.731932Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:46.798576Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3l0CmX0FuQjFxr8SK7Vqag[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:46.798757Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:50.180603Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 70.0%, top: 2, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:50.180801Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (popularity: 30-95, ratio: 70.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:50.180865Z[0m [[32m[1minfo     [0m] [1mâœ“ Got 3 top tracks from user-mentioned artist: Mac Demarco (filtered 0, skipped 0 duplicates, marked as source='anchor_track', protected=True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:14:50.180914Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3zmfs9cQwzJl575W1ZYXeT (max_popularity: 95, ratio: 70.0%, target: 2 top + 1 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:50.180968Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 30-95[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:50.181015Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:50.617195Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved duration_ms for 3/3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:14:50.617428Z[0m [[32m[1minfo     [0m] [1mRetrieved duration_ms for 4 tracks from track endpoint[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:14:50.617633Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:14:50.643471Z[0m [[32m[1minfo     [0m] [1mFetched and cached 4 fresh recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:14:50.667260Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:14:50.866920Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:50.867220Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 35l9BRT7MXmM8bv2WDQiyB (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:50.867276Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 35l9BRT7MXmM8bv2WDQiyB, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:14:50.867714Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved duration_ms for 3/3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:14:50.957590Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:14:50.958822Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:50.958997Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3l0CmX0FuQjFxr8SK7Vqag (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:50.959063Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 3l0CmX0FuQjFxr8SK7Vqag, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:14:50.991347Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:14:51.048911Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:14:51.051173Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:51.051315Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:51.862859Z[0m [[32m[1minfo     [0m] [1mGetting 3 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:14:53.404333Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 70.0%, top: 2, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:14:53.404568Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3zmfs9cQwzJl575W1ZYXeT (popularity: 30-95, ratio: 70.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:14:53.404640Z[0m [[32m[1minfo     [0m] [1mâœ“ Got 3 top tracks from user-mentioned artist: Men I Trust (filtered 0, skipped 0 duplicates, marked as source='anchor_track', protected=True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:14:53.404728Z[0m [[32m[1minfo     [0m] [1mâœ“ Got 6 top tracks from 2 user-mentioned artist(s): Mac Demarco, Men I Trust[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:14:53.404818Z[0m [[32m[1minfo     [0m] [1mUser anchor strategy generated 6 recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:14:53.404854Z[0m [[32m[1minfo     [0m] [1mUser anchor strategy generated 6 recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:15:00.388766Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_multiple_tracks, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:15:01.800102Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:15:10.425223Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_multiple_tracks, retrying in 1.0s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:15:15.691287Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m24.964897[0m [36mendpoint[0m=[35m/v1/track[0m [36mparams[0m=[35m{'ids': '08669352-2d37-474d-8b5a-4af6d6f1ba8b,4c35b74d-04d1-4a6d-9914-c29430179341,53306a6f-1afe-4c80-92ae-1a2bfa22bf62,bd99b521-63c3-420a-8ea4-cb7268ca603a'}[0m [36mtool[0m=[35mget_multiple_tracks[0m
[2m2025-11-11T15:15:17.081687Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:17.082485Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:18.088563Z[0m [[32m[1minfo     [0m] [1mConverted 4/4 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{4}[0m
[2m2025-11-11T15:15:18.088773Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/4 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:18.088843Z[0m [[32m[1minfo     [0m] [1mAll 4 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:18.088950Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/4 tracks (4 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:15:19.169939Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:19.170538Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:19.268932Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:15:19.269407Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:19.298903Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:15:19.299153Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:19.343509Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 0) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:27.051819Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:26.793016Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:15:30.635193Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:15:39.863770Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:15:40.710792Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m21.322979[0m [36mendpoint[0m=[35m/v1/track/500726e2-61cd-4430-92e6-732dbced3ff2/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T15:15:40.759291Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:40.760218Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:15:40.760724Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 3l0CmX0FuQjFxr8SK7Vqag (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:40.761062Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 3/12: 7pbDxGE6nQSZVfiFdq9lOL[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:40.761358Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 7pbDxGE6nQSZVfiFdq9lOL (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:40.761458Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:40.761520Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 7pbDxGE6nQSZVfiFdq9lOL[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:41.219601Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 7pbDxGE6nQSZVfiFdq9lOL[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:41.220064Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:41.466990Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:41.467397Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:15:41.467661Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 35l9BRT7MXmM8bv2WDQiyB (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:41.467807Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 4/12: 56ZTgzPBDge0OvCGgMO3OY[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:41.467914Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 56ZTgzPBDge0OvCGgMO3OY (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:41.468049Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:41.468160Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 56ZTgzPBDge0OvCGgMO3OY[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:42.443210Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 56ZTgzPBDge0OvCGgMO3OY[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:42.443541Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:45.595410Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_recommendations, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:15:52.036083Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:52.036278Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 7pbDxGE6nQSZVfiFdq9lOL (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:15:52.036325Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 7pbDxGE6nQSZVfiFdq9lOL, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:52.145410Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:15:45.603203Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:50.108271Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:50.108553Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 56ZTgzPBDge0OvCGgMO3OY (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:15:50.108618Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 56ZTgzPBDge0OvCGgMO3OY, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:50.202155Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:15:50.267070Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:51.365719Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:51.561202Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:15:51.561434Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:51.643759Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:51.783795Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:15:54.101305Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:54.190025Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:15:54.190244Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:54.530720Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:54.835359Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:54.835621Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:15:54.835807Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 7pbDxGE6nQSZVfiFdq9lOL (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:54.835905Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 5/12: 37w38cCSGgKLdayTRjna4W[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:54.835973Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 37w38cCSGgKLdayTRjna4W (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:54.836019Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 9/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:54.836046Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 37w38cCSGgKLdayTRjna4W[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:55.497160Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 37w38cCSGgKLdayTRjna4W[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:55.497341Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:55.720859Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:55.721246Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:15:55.721458Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 56ZTgzPBDge0OvCGgMO3OY (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:55.721579Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 6/12: 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:15:55.721662Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3zmfs9cQwzJl575W1ZYXeT (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:55.721730Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:55.721785Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:56.358959Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m71.199534[0m [36mendpoint[0m=[35m/v1/track/recommendation[0m [36mparams[0m=[35m{'seeds': '2CBtdZVcpSwaxOcLUi1AGo,7eWGnKg4B44sbBPpQp4y2c,1VNZ7LWT495ICAO4CvOaTX', 'size': 4}[0m [36mtool[0m=[35mget_track_recommendations[0m
[2m2025-11-11T15:15:56.381899Z[0m [[32m[1minfo     [0m] [1mRetrieved duration_ms for 4 tracks from track endpoint[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:15:56.382361Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:15:56.408300Z[0m [[32m[1minfo     [0m] [1mFetched and cached 4 fresh recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:56.430469Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:56.595466Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:56.754856Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:56.755107Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:15:58.277046Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:58.277753Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:15:58.563717Z[0m [[32m[1minfo     [0m] [1mConverted 4/4 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{4}[0m
[2m2025-11-11T15:15:58.563948Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/4 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:58.563995Z[0m [[32m[1minfo     [0m] [1mAll 4 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:15:58.564066Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/4 tracks (4 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:15:58.564324Z[0m [[32m[1minfo     [0m] [1mGenerated 8 raw recommendations from 2 seed chunks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:15:58.564646Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: Holy (feat. Chance The Rapper) by Justin Bieber, Chance the Rapper, The Lewisham and Greenwich NHS Choir - Genre conflict: track appears to be ['rap'], mood is ['rock', 'indie', 'pop', 'pop', 'rock', 'pop', 'pop', 'indie', 'pop', 'jazz', 'rock'][0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:15:58.564763Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: Tipo Tobi 2 by MHRAP - Genre conflict: track appears to be ['rap'], mood is ['rock', 'indie', 'pop', 'pop', 'rock', 'pop', 'pop', 'indie', 'pop', 'jazz', 'rock'][0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:15:58.564892Z[0m [[32m[1minfo     [0m] [1mValidation pass: 8 -> 6 tracks (filtered 2)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:15:58.564944Z[0m [[32m[1minfo     [0m] [1mGenerated 6 validated recommendations from seeds[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:16:00.932186Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:00.932487Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3zmfs9cQwzJl575W1ZYXeT (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:16:00.932540Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 3zmfs9cQwzJl575W1ZYXeT, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:16:01.038862Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:16:01.082457Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:16:01.459608Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:01.459989Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 37w38cCSGgKLdayTRjna4W (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:16:01.460059Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 37w38cCSGgKLdayTRjna4W, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:16:01.536564Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:16:01.579554Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:16:01.855873Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:16:01.957740Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:16:01.957956Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:02.022029Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:03.430547Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:03.430771Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:16:03.430918Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 3zmfs9cQwzJl575W1ZYXeT (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:16:03.431009Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 7/12: 1bwUhKRmEkOZ1wuTnV9XjC[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:16:03.431073Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 1bwUhKRmEkOZ1wuTnV9XjC (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:03.431132Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:03.431178Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 1bwUhKRmEkOZ1wuTnV9XjC[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:04.159254Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 1bwUhKRmEkOZ1wuTnV9XjC[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:04.159432Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:07.749375Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:16:09.202940Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:16:09.203151Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:09.265039Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:10.057472Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:10.057883Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:16:10.058105Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 37w38cCSGgKLdayTRjna4W (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:16:10.058228Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 8/12: 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:16:10.058312Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:10.058383Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 6/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:10.058433Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:11.184648Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:11.184863Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 1bwUhKRmEkOZ1wuTnV9XjC (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:16:11.184913Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 1bwUhKRmEkOZ1wuTnV9XjC, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:16:11.256388Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:16:11.322102Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:16:11.323527Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:11.323662Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:22.086230Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:16:22.086571Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:16:22.086630Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 3Sz7ZnJQBIHsXLUSo0OQtM, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:16:22.152529Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:16:22.174336Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:16:16.773362Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:16:16.774025Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:16:16.776365Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:16:16.818647Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:16:16.819152Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:16.819765Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:16:16.819871Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:16.896102Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 2) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:17.149664Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 2) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:16:41.768809Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:17:07.796218Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:17:11.406533Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:17:11.406930Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:17:14.670486Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m57.75225[0m [36mendpoint[0m=[35m/v1/track/0fde87be-757e-4233-9e19-b0d66d786ea5/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T15:17:14.744985Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:17:14.745483Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:17:14.745819Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 3Sz7ZnJQBIHsXLUSo0OQtM (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:17:14.745974Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 9/12: 5b5bt4mZQpJMoCRbiQ7diH[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:17:14.746078Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 5b5bt4mZQpJMoCRbiQ7diH (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:17:14.746187Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:17:14.746258Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 5b5bt4mZQpJMoCRbiQ7diH[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:17:15.476120Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 5b5bt4mZQpJMoCRbiQ7diH[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:17:15.476318Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:17:19.608801Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:17:19.608992Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 5b5bt4mZQpJMoCRbiQ7diH (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:17:19.609038Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 5b5bt4mZQpJMoCRbiQ7diH, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:17:19.681049Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:17:19.722184Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:17:32.794146Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:17:56.763184Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:18:09.171667Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 1.0s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:18:21.184543Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_multiple_tracks, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:18:21.753893Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:18:23.706083Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m63.959499[0m [36mendpoint[0m=[35m/v1/track[0m [36mparams[0m=[35m{'ids': '25HgUJf69zb3K7TJw7LGCQ,5YR1LE4OoPHmlKzUvI089a'}[0m [36mtool[0m=[35mget_multiple_tracks[0m
[2m2025-11-11T15:18:23.749246Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:18:23.822519Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:18:23.822772Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:18:24.098034Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:18:37.089384Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m139.918697[0m [36mendpoint[0m=[35m/v1/track/cb9f27bd-cc50-485a-a323-fe0d5d268cb6/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T15:18:37.402893Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:18:37.403176Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:18:37.403424Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 1bwUhKRmEkOZ1wuTnV9XjC (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:18:37.403566Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 10/12: 2mVVjNmdjXZZDvhgQWiakk[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:18:37.403693Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 2mVVjNmdjXZZDvhgQWiakk (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:37.403767Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:37.403831Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 2mVVjNmdjXZZDvhgQWiakk[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:38.191627Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 2mVVjNmdjXZZDvhgQWiakk[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:38.191796Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:42.773594Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:42.773990Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 2mVVjNmdjXZZDvhgQWiakk (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:18:42.774132Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 2mVVjNmdjXZZDvhgQWiakk, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:18:42.853212Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:18:42.898517Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:18:52.419014Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:18:45.934336Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:18:45.934578Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:18:46.218718Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:18:46.584530Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m22.212343[0m [36mendpoint[0m=[35m/v1/track/8aefeb7d-cade-422a-afa7-22f78abdd3ec/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T15:18:46.743823Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:18:46.912486Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:18:46.912915Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:18:46.913179Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 5b5bt4mZQpJMoCRbiQ7diH (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:18:46.913326Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 11/12: 1gl0S9pS0Zw0qfa14rDD3D[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:18:46.913448Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 1gl0S9pS0Zw0qfa14rDD3D (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:46.913518Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 9/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:46.913569Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 1gl0S9pS0Zw0qfa14rDD3D[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:47.695869Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 1gl0S9pS0Zw0qfa14rDD3D[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:47.696232Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:54.167858Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:18:54.168148Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 1gl0S9pS0Zw0qfa14rDD3D (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:18:54.168209Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 1gl0S9pS0Zw0qfa14rDD3D, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:18:54.949977Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:18:54.975922Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:18:55.770030Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:18:56.075440Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:18:56.075834Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:18:55.892671Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 2) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:09.275383Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m23.033114[0m [36mendpoint[0m=[35m/v1/track/69bf4ac7-6691-4e89-a6d3-8e3900f40671/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T15:19:09.349925Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:09.350138Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:19:09.350280Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 1gl0S9pS0Zw0qfa14rDD3D (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:09.350362Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 12/12: 6O4EGCCb6DoIiR6B1QCQgp[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:09.350428Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 6O4EGCCb6DoIiR6B1QCQgp (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:09.350491Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:09.350534Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 6O4EGCCb6DoIiR6B1QCQgp[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:09.564735Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:09.565003Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:19:09.565185Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 2mVVjNmdjXZZDvhgQWiakk (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:10.057040Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 6O4EGCCb6DoIiR6B1QCQgp[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:10.057287Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:11.738091Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:20.843799Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:20.844283Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 6O4EGCCb6DoIiR6B1QCQgp (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:19:20.844368Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 6O4EGCCb6DoIiR6B1QCQgp, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:21.211534Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:19:21.366767Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:19:21.652077Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:19:21.728074Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:19:21.728351Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:21.770098Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:22.447610Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:22.447989Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:19:22.448344Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 6O4EGCCb6DoIiR6B1QCQgp (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:22.448782Z[0m [[32m[1minfo     [0m] [1mGenerated 36 recommendations from 12/12 artists (0 failed)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:22.449417Z[0m [[32m[1minfo     [0m] [1mIncluded 5 anchor tracks in recommendations (2 user-mentioned, 3 genre-based)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.anchor_track[0m][0m
[2m2025-11-11T15:19:22.449494Z[0m [[32m[1minfo     [0m] [1mGenerated 53 total recommendations in parallel (6 user anchor, 36 artists, 6 seeds)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:19:22.449599Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_processing[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T15:19:22.449672Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:22.450481Z[0m [[32m[1minfo     [0m] [1mMood filtering: 53 -> 53 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_filter[0m][0m
[2m2025-11-11T15:19:22.450836Z[0m [[32m[1minfo     [0m] [1mDiversity applied: 8 tracks exempted (protected/user-mentioned), 39 tracks penalized[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.diversity[0m][0m
[2m2025-11-11T15:19:22.450925Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_diversifying[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T15:19:22.450986Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:22.453522Z[0m [[32m[1minfo     [0m] [1manchor_track_capping          [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m3[0m [36mlimit[0m=[35m5[0m [36mnote[0m=[35m'user_mentioned includes tracks from user-mentioned artists'[0m [36moverflow[0m=[35m0[0m [36muser_mentioned[0m=[35m8[0m
[2m2025-11-11T15:19:22.453670Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m1[0m [36mlimit[0m=[35m1[0m [36moverflow[0m=[35m5[0m [36msource[0m=[35mreccobeat[0m
[2m2025-11-11T15:19:22.453762Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m19[0m [36mlimit[0m=[35m19[0m [36moverflow[0m=[35m17[0m [36msource[0m=[35martist_discovery[0m
[2m2025-11-11T15:19:22.453841Z[0m [[32m[1minfo     [0m] [1mfinal_cap_applied             [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mcurrent[0m=[35m31[0m [36mrequested[0m=[35m25[0m [36mtrimmed[0m=[35m6[0m
[2m2025-11-11T15:19:22.454145Z[0m [[32m[1minfo     [0m] [1mratio_enforcement_complete    [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36manchor_count[0m=[35m11[0m [36martist_count[0m=[35m14[0m [36martist_ratio[0m=[35m1.0[0m [36moriginal[0m=[35m53[0m [36mreccobeat_count[0m=[35m0[0m [36mtotal[0m=[35m25[0m
[2m2025-11-11T15:19:22.454307Z[0m [[32m[1minfo     [0m] [1mGenerated 24 final recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T15:19:22.454422Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator completed execution in 277.426176s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:19:22.454505Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mevaluating_quality_iteration_1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mevaluating_quality[0m
[2m2025-11-11T15:19:22.454565Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m3[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:22.454744Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Lauren by Men I Trust (user_mentioned=True, user_mentioned_artist=False, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:19:22.454790Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Show Me How by Men I Trust (user_mentioned=True, user_mentioned_artist=False, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:19:22.454820Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: For the First Time by Mac DeMarco (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:19:22.454853Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Heart To Heart by Mac DeMarco (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:19:22.454890Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Rockaway by Mac DeMarco (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:19:22.454927Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Numb by Men I Trust (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:19:22.454954Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Girl (2025) by Men I Trust (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:19:22.460741Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:22.460925Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:22.460987Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mevaluating_quality[0m [36mnew_step[0m=[35mevaluating_quality_iteration_1[0m [36mold_status[0m=[35mgenerating_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:22.461062Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mevaluating_quality[0m [36mstep[0m=[35mevaluating_quality_iteration_1[0m
[2m2025-11-11T15:19:22.461505Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:22.461605Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:22.461703Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:22.461756Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
INFO:     127.0.0.1:58230 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:19:26.709098Z[0m [[32m[1minfo     [0m] [1mLLM assessment: quality=0.85, meets_expectations=True[0m [[0m[1m[34mapp.agents.recommender.orchestrator.quality_evaluator[0m][0m
[2m2025-11-11T15:19:26.709535Z[0m [[32m[1minfo     [0m] [1mLLM flagged outlier: Halah by Mazzy Star (matched from concern: Halah by Mazzy Star feels out of place because while it fits the 'dreamy' aspect...)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:19:26.709596Z[0m [[32m[1minfo     [0m] [1mLLM flagged outlier: torn jeans by Royel Otis (matched from concern: torn jeans by Royel Otis feels out of place because while it is modern indie, it...)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:19:26.709659Z[0m [[32m[1minfo     [0m] [1mLLM identified 2 additional outliers: ['Halah', 'torn jeans'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.quality_evaluator[0m][0m
[2m2025-11-11T15:19:26.709755Z[0m [[32m[1minfo     [0m] [1mIteration 1: Overall score=0.80, Cohesion=0.64, Count=24[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:19:26.709929Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35moptimizing_recommendations_iteration_1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T15:19:26.710023Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:26.713037Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:26.713162Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:26.713217Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35moptimizing_recommendations[0m [36mnew_step[0m=[35moptimizing_recommendations_iteration_1[0m [36mold_status[0m=[35mevaluating_quality[0m [36mold_step[0m=[35mevaluating_quality_iteration_1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:26.713305Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35moptimizing_recommendations[0m [36mstep[0m=[35moptimizing_recommendations_iteration_1[0m
INFO:     127.0.0.1:58230 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:19:30.521004Z[0m [[32m[1minfo     [0m] [1mLLM strategy decision: ['filter_and_replace', 'generate_more'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T15:19:30.521367Z[0m [[32m[1minfo     [0m] [1mLLM reasoning: The primary issues are the presence of outliers and being slightly short of the target length. 

1. **filter_and_replace**: This directly addresses the 3 identified outliers, removing the tracks that slightly deviate (like Mazzy Star) and replacing them with tracks that better align with the Mac Demarco/Men I Trust 'jizz jazz' smoothness. This should improve the Cohesion Score (currently 0.64).

2. **generate_more**: After cleaning up the outliers, the playlist will be even shorter than the current 24 tracks (it will likely drop to 21). This strategy is necessary to bring the track count up towards the target of 18 tracks, leveraging the now-improved core set of songs for high-quality additions.[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T15:19:30.521434Z[0m [[32m[1minfo     [0m] [1mLLM suggested strategies: ['filter_and_replace', 'generate_more'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T15:19:30.521474Z[0m [[32m[1minfo     [0m] [1mApplying improvement strategies: ['filter_and_replace', 'generate_more'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:19:30.521526Z[0m [[32m[1minfo     [0m] [1mApplying strategy: filter_and_replace[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T15:19:30.521611Z[0m [[32m[1minfo     [0m] [1mFiltering 3 outliers, keeping 21 good tracks (0 protected tracks kept despite being outliers)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T15:19:30.521695Z[0m [[32m[1minfo     [0m] [1mAdded 3 outliers as negative seeds (total: 3)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T15:19:30.521787Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:19:30.521854Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations for mood: I want something Indie, like Mac Demarco and Men I Trust.[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T15:19:30.522071Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T15:19:30.522182Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:30.522274Z[0m [[32m[1minfo     [0m] [1mSplit WITH user mentions: 7 user anchor, 7 artists, 2 seeds (total: 18)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:19:30.522326Z[0m [[32m[1minfo     [0m] [1mExecuting recommendation strategies in parallel[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:19:30.522524Z[0m [[32m[1minfo     [0m] [1mUser anchor strategy: 0 tracks, 2 artists[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:19:30.522632Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations from 12 discovered artists[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:30.523566Z[0m [[32m[1minfo     [0m] [1mUsing 3 negative seeds to avoid similar tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:19:30.523816Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Mac Demarco' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:30.524212Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Men I Trust' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:30.524689Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:30.524791Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:30.524856Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35moptimizing_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35moptimizing_recommendations_iteration_1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:30.524938Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35moptimizing_recommendations[0m [36mstep[0m=[35mgenerating_recommendations_fetching[0m
[2m2025-11-11T15:19:30.550894Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Mac Demarco'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:30.551359Z[0m [[32m[1minfo     [0m] [1mâœ“ Spotify search for 'Mac Demarco' matched: 'Mac DeMarco' (ID: 3Sz7ZnJQBIHsXLUSo0OQtM)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:19:30.551815Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Men I Trust'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:30.551898Z[0m [[32m[1minfo     [0m] [1mâœ“ Spotify search for 'Men I Trust' matched: 'Men I Trust' (ID: 3zmfs9cQwzJl575W1ZYXeT)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:19:30.573197Z[0m [[32m[1minfo     [0m] [1mCache miss for recommendations, fetching from API[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:30.574445Z[0m [[32m[1minfo     [0m] [1mCache miss for recommendations, fetching from API[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:30.597628Z[0m [[32m[1minfo     [0m] [1mAuto-balancing: reduced negative seeds from 3 to 1[0m [[0m[1m[34mapp.agents.core.seed_guardrails[0m][0m [36mnew_ratio[0m=[35m1/3[0m [36moriginal_ratio[0m=[35m3/3[0m
[2m2025-11-11T15:19:30.597830Z[0m [[32m[1minfo     [0m] [1mAuto-balancing parameters: Auto-balanced: too many negative seeds (3 >= 3)[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:30.597879Z[0m [[32m[1minfo     [0m] [1mGetting 4 recommendations for 3 seeds[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:30.599921Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (max_popularity: 95, ratio: 70.0%, target: 2 top + 1 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:30.600038Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 30-95[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:30.600079Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:30.600208Z[0m [[32m[1minfo     [0m] [1mAuto-balancing: reduced negative seeds from 3 to 1[0m [[0m[1m[34mapp.agents.core.seed_guardrails[0m][0m [36mnew_ratio[0m=[35m1/2[0m [36moriginal_ratio[0m=[35m3/2[0m
[2m2025-11-11T15:19:30.600288Z[0m [[32m[1minfo     [0m] [1mAuto-balancing parameters: Auto-balanced: too many negative seeds (3 >= 2)[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:30.600326Z[0m [[32m[1minfo     [0m] [1mGetting 4 recommendations for 2 seeds[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:30.655550Z[0m [[32m[1minfo     [0m] [1mToken still valid until 2025-11-11 16:13:52+00:00, no refresh needed[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.token[0m][0m
[2m2025-11-11T15:19:30.689490Z[0m [[32m[1minfo     [0m] [1mFetching 3 tracks from up to 12 artists (target: 7 tracks after filtering)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:31.003627Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 1/12: 35l9BRT7MXmM8bv2WDQiyB[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:31.004050Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 35l9BRT7MXmM8bv2WDQiyB (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:31.004156Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 8/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:31.004213Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 35l9BRT7MXmM8bv2WDQiyB[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:31.004317Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 2/12: 3l0CmX0FuQjFxr8SK7Vqag[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:31.004396Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3l0CmX0FuQjFxr8SK7Vqag (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:31.004482Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:31.004549Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3l0CmX0FuQjFxr8SK7Vqag[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
INFO:     127.0.0.1:58230 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:19:37.459558Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:37.459849Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:33.364600Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 70.0%, top: 2, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:33.364938Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (popularity: 30-95, ratio: 70.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:19:33.365015Z[0m [[32m[1minfo     [0m] [1mâœ“ Got 3 top tracks from user-mentioned artist: Mac Demarco (filtered 0, skipped 0 duplicates, marked as source='anchor_track', protected=True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:19:33.365076Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3zmfs9cQwzJl575W1ZYXeT (max_popularity: 95, ratio: 70.0%, target: 2 top + 1 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:33.365123Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 30-95[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:33.365178Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:34.568112Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:34.568311Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:37.402703Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:19:37.630336Z[0m [[33m[1mwarning  [0m] [1mRequest error when calling tool, retrying[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mattempt[0m=[35m1[0m [36merror[0m=[35m'All connection attempts failed'[0m [36mmax_attempts[0m=[35m3[0m [36mtool[0m=[35mget_track_recommendations[0m [36murl[0m=[35m'https://api.reccobeats.com/v1/track?ids=62zFcDLa1CjCY9yp6VO4ga%2C75IQVo8hqI1iwVZyvkN2VT%2C2R4AlwtrrkMaRKojcTIzmL'[0m [36mwait_seconds[0m=[35m0.5[0m
[2m2025-11-11T15:19:38.117946Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 35l9BRT7MXmM8bv2WDQiyB[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:38.118177Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:38.335538Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3l0CmX0FuQjFxr8SK7Vqag[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:38.335703Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:38.762152Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 70.0%, top: 2, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:38.762350Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3zmfs9cQwzJl575W1ZYXeT (popularity: 30-95, ratio: 70.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:19:38.762408Z[0m [[32m[1minfo     [0m] [1mâœ“ Got 3 top tracks from user-mentioned artist: Men I Trust (filtered 0, skipped 0 duplicates, marked as source='anchor_track', protected=True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:19:38.762508Z[0m [[32m[1minfo     [0m] [1mâœ“ Got 6 top tracks from 2 user-mentioned artist(s): Mac Demarco, Men I Trust[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:19:38.762564Z[0m [[32m[1minfo     [0m] [1mUser anchor strategy generated 6 recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:19:38.762612Z[0m [[32m[1minfo     [0m] [1mUser anchor strategy generated 6 recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:19:40.893414Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved duration_ms for 3/3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:42.440616Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:42.440806Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 35l9BRT7MXmM8bv2WDQiyB (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:19:42.440851Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 35l9BRT7MXmM8bv2WDQiyB, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:42.460678Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:19:42.461018Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3l0CmX0FuQjFxr8SK7Vqag (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:19:42.461072Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 3l0CmX0FuQjFxr8SK7Vqag, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:19:42.549870Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:19:42.576264Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:19:42.608878Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:19:42.634112Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:19:42.942451Z[0m [[32m[1minfo     [0m] [1mRetrieved duration_ms for 4 tracks from track endpoint[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:42.942884Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:42.943543Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved duration_ms for 2/2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:42.965341Z[0m [[32m[1minfo     [0m] [1mFetched and cached 4 fresh recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:42.987576Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:19:43.189582Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:19:43.215541Z[0m [[32m[1minfo     [0m] [1mRetrieved duration_ms for 4 tracks from track endpoint[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:43.215826Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T15:19:43.247462Z[0m [[32m[1minfo     [0m] [1mFetched and cached 4 fresh recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:43.277689Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:19:43.450707Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:19:50.491208Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:19:50.781836Z[0m [[32m[1minfo     [0m] [1mConverted 4/4 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{4}[0m
[2m2025-11-11T15:19:50.782199Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/4 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:50.782251Z[0m [[32m[1minfo     [0m] [1mAll 4 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:19:50.782321Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/4 tracks (4 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:20:01.032482Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:01.033245Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:01.033487Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 0 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:01.033719Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:01.033835Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:01.081113Z[0m [[32m[1minfo     [0m] [1mConverted 1/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{0}[0m
[2m2025-11-11T15:20:01.081312Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 1/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:01.103494Z[0m [[32m[1minfo     [0m] [1mAll 3 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:01.103884Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 1/3 tracks (2 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:20:01.104086Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 3l0CmX0FuQjFxr8SK7Vqag (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:01.104193Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 3/12: 7pbDxGE6nQSZVfiFdq9lOL[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:01.104276Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 7pbDxGE6nQSZVfiFdq9lOL (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:01.104330Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:01.104360Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 7pbDxGE6nQSZVfiFdq9lOL[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:01.126906Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:20:01.127230Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:01.194678Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:01.322420Z[0m [[32m[1minfo     [0m] [1mConverted 4/4 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{4}[0m
[2m2025-11-11T15:20:01.322813Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/4 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:01.322886Z[0m [[32m[1minfo     [0m] [1mAll 4 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:01.322969Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/4 tracks (4 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:20:01.323245Z[0m [[32m[1minfo     [0m] [1mGenerated 8 raw recommendations from 2 seed chunks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:20:01.323579Z[0m [[32m[1minfo     [0m] [1mValidation pass: 8 -> 8 tracks (filtered 0)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:20:01.323637Z[0m [[32m[1minfo     [0m] [1mGenerated 8 validated recommendations from seeds[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:20:01.767150Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 7pbDxGE6nQSZVfiFdq9lOL[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:01.767445Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:02.769038Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:20:06.020741Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:06.020946Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 7pbDxGE6nQSZVfiFdq9lOL (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:20:06.021009Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 7pbDxGE6nQSZVfiFdq9lOL, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:06.133294Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:20:06.182244Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:06.511277Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:06.616249Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:20:06.616498Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:06.685715Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:11.101494Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:20:11.079324Z[0m [[33m[1mwarning  [0m] [1mRequest error when calling tool, retrying[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mattempt[0m=[35m1[0m [36merror[0m=[35mReadError[0m [36mmax_attempts[0m=[35m3[0m [36mtool[0m=[35mget_track_audio_features[0m [36murl[0m=[35mhttps://api.reccobeats.com/v1/track/d35dd3bf-ec72-4d59-abda-47a06f1345fb/audio-features[0m [36mwait_seconds[0m=[35m0.5[0m
[2m2025-11-11T15:20:11.079833Z[0m [[33m[1mwarning  [0m] [1mRequest error when calling tool, retrying[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mattempt[0m=[35m1[0m [36merror[0m=[35mReadError[0m [36mmax_attempts[0m=[35m3[0m [36mtool[0m=[35mget_track_audio_features[0m [36murl[0m=[35mhttps://api.reccobeats.com/v1/track/949e70f7-3127-457d-8679-1d7c631a022f/audio-features[0m [36mwait_seconds[0m=[35m0.5[0m
[2m2025-11-11T15:20:11.858481Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:11.858866Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:20:11.859140Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 7pbDxGE6nQSZVfiFdq9lOL (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:11.859347Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:11.859485Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:20:11.859730Z[0m [[32m[1minfo     [0m] [1mFiltering low-cohesion artist track: She Plays Bass (Live in London) (cohesion: 0.25 < 0.3 threshold)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.artist_based[0m][0m
[2m2025-11-11T15:20:11.859823Z[0m [[32m[1minfo     [0m] [1mAdded 2/3 tracks from artist 35l9BRT7MXmM8bv2WDQiyB (1 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:11.859938Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 4/12: 56ZTgzPBDge0OvCGgMO3OY[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:11.860047Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 56ZTgzPBDge0OvCGgMO3OY (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:11.860125Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:11.860193Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 56ZTgzPBDge0OvCGgMO3OY[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:11.860299Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 5/12: 37w38cCSGgKLdayTRjna4W[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:11.860363Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 37w38cCSGgKLdayTRjna4W (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:11.860414Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 9/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:11.860462Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 37w38cCSGgKLdayTRjna4W[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:12.648301Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 37w38cCSGgKLdayTRjna4W[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:12.648457Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:12.673540Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 56ZTgzPBDge0OvCGgMO3OY[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:12.673826Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:16.884148Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:16.884454Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 37w38cCSGgKLdayTRjna4W (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:20:16.884522Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 37w38cCSGgKLdayTRjna4W, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:16.960525Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:20:17.012441Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:17.660497Z[0m [[33m[1mwarning  [0m] [1mRequest error when calling tool, retrying[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mattempt[0m=[35m1[0m [36merror[0m=[35mReadError[0m [36mmax_attempts[0m=[35m3[0m [36mtool[0m=[35mget_multiple_tracks[0m [36murl[0m=[35m'https://api.reccobeats.com/v1/track?ids=6nQVB7McD3XdFEZ0x8H9i0%2C2qV5Ce0sMlFsrseRO5CTMU'[0m [36mwait_seconds[0m=[35m0.5[0m
[2m2025-11-11T15:20:19.149256Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:19.149587Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 56ZTgzPBDge0OvCGgMO3OY (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:20:19.149642Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 56ZTgzPBDge0OvCGgMO3OY, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:19.231295Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:20:19.256119Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:22.873558Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:22.875344Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:22.928340Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:20:22.928539Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:22.978969Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:20:22.979164Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:23.000530Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 2) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:23.050510Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:23.302179Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:23.302466Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:20:23.302721Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 56ZTgzPBDge0OvCGgMO3OY (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:23.303040Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 6/12: 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:23.303162Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3zmfs9cQwzJl575W1ZYXeT (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:23.303270Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:23.303311Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:23.303583Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:23.303681Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:20:23.303783Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 37w38cCSGgKLdayTRjna4W (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:23.303851Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 7/12: 1bwUhKRmEkOZ1wuTnV9XjC[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:23.303901Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 1bwUhKRmEkOZ1wuTnV9XjC (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:23.303939Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:23.303981Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 1bwUhKRmEkOZ1wuTnV9XjC[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:23.991681Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 1bwUhKRmEkOZ1wuTnV9XjC[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:23.991957Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:24.052241Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:24.052534Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:26.734221Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:20:28.084719Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:28.085081Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 1bwUhKRmEkOZ1wuTnV9XjC (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:20:28.085147Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 1bwUhKRmEkOZ1wuTnV9XjC, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:28.158243Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:20:28.240263Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:28.243175Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:28.243316Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3zmfs9cQwzJl575W1ZYXeT (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:20:28.243362Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 3zmfs9cQwzJl575W1ZYXeT, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:28.338585Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:20:28.389575Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:28.608116Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:28.718982Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:20:28.719350Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:28.823599Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 2) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:29.217297Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:20:29.217970Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:20:29.218263Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 1bwUhKRmEkOZ1wuTnV9XjC (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:29.218377Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 8/12: 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:29.218456Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:29.218526Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 6/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:29.218573Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:29.966842Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:29.967548Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:34.108052Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:20:34.108364Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:20:34.108421Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 3Sz7ZnJQBIHsXLUSo0OQtM, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:20:34.218420Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:20:34.261998Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:20:51.725398Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:21:16.710543Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:21:41.705716Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:21:45.241210Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_multiple_tracks, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:21:45.241753Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_multiple_tracks, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:21:46.257555Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m71.972809[0m [36mendpoint[0m=[35m/v1/track[0m [36mparams[0m=[35m{'ids': '0Uydq1bBE9swRDFkinCcAc,5l2fG5GZOTX7QtjMBTB7h0'}[0m [36mtool[0m=[35mget_multiple_tracks[0m
[2m2025-11-11T15:21:46.319016Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:21:46.329427Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m77.904155[0m [36mendpoint[0m=[35m/v1/track[0m [36mparams[0m=[35m{'ids': '5r7wJLf1cKlIzio4e0xfje,3WftyL45naEhUaYa9AMq4h'}[0m [36mtool[0m=[35mget_multiple_tracks[0m
[2m2025-11-11T15:21:46.375180Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:21:46.429401Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:21:46.429723Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:52.629002Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:21:52.629257Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:52.649765Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:52.702312Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:46.644325Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:46.644693Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:21:46.644879Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 3Sz7ZnJQBIHsXLUSo0OQtM (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:46.645036Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 9/12: 5b5bt4mZQpJMoCRbiQ7diH[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:46.645168Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 5b5bt4mZQpJMoCRbiQ7diH (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:46.645255Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:46.645304Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 5b5bt4mZQpJMoCRbiQ7diH[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:47.452553Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 5b5bt4mZQpJMoCRbiQ7diH[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:47.452716Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:49.590779Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:49.591177Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:21:49.591394Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 3zmfs9cQwzJl575W1ZYXeT (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:49.591511Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 10/12: 2mVVjNmdjXZZDvhgQWiakk[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:49.591589Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 2mVVjNmdjXZZDvhgQWiakk (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:49.591655Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:49.591734Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 2mVVjNmdjXZZDvhgQWiakk[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:51.021571Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:51.021782Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 5b5bt4mZQpJMoCRbiQ7diH (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:21:51.021837Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 5b5bt4mZQpJMoCRbiQ7diH, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:51.115617Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 2mVVjNmdjXZZDvhgQWiakk[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:51.115801Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:51.139030Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:21:51.429842Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:21:51.364943Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:21:51.456183Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:21:51.456564Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:52.026330Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:53.093458Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:53.093889Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:21:53.094145Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 5b5bt4mZQpJMoCRbiQ7diH (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:53.094292Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 11/12: 1gl0S9pS0Zw0qfa14rDD3D[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:53.094408Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 1gl0S9pS0Zw0qfa14rDD3D (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:53.094494Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 9/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:53.094542Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 1gl0S9pS0Zw0qfa14rDD3D[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:54.167620Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 1gl0S9pS0Zw0qfa14rDD3D[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:54.168031Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:55.292113Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:55.292330Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 2mVVjNmdjXZZDvhgQWiakk (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:21:55.292388Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 2mVVjNmdjXZZDvhgQWiakk, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:55.596844Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:21:55.876816Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:21:56.092902Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:21:56.161364Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:21:56.161623Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:56.500225Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:56.250815Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:21:56.251072Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:21:56.251265Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 2mVVjNmdjXZZDvhgQWiakk (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:56.251377Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 12/12: 6O4EGCCb6DoIiR6B1QCQgp[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:21:56.251442Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 6O4EGCCb6DoIiR6B1QCQgp (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:56.251497Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:56.251530Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 6O4EGCCb6DoIiR6B1QCQgp[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:57.703558Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 6O4EGCCb6DoIiR6B1QCQgp[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:21:57.703821Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:00.696755Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:00.697093Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 1gl0S9pS0Zw0qfa14rDD3D (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:22:00.697151Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 1gl0S9pS0Zw0qfa14rDD3D, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:00.783344Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:22:00.884925Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:22:01.453760Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:22:07.666993Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:22:07.667269Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:01.389984Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:02.334040Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:02.334434Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:22:02.334651Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 1gl0S9pS0Zw0qfa14rDD3D (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:07.726504Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:08.551954Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:08.552179Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 6O4EGCCb6DoIiR6B1QCQgp (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:22:08.552233Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 6O4EGCCb6DoIiR6B1QCQgp, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:08.849616Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:22:08.941270Z[0m [[32m[1minfo     [0m] [1mSkipped 1 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m50.0%[0m [36mtotal_ids[0m=[35m2[0m
[2m2025-11-11T15:22:08.941677Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:22:09.218175Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:22:09.265419Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{1}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:22:09.265684Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.307922Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.561172Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.561432Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:22:09.561647Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 6O4EGCCb6DoIiR6B1QCQgp (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:09.562022Z[0m [[32m[1minfo     [0m] [1mGenerated 35 recommendations from 12/12 artists (0 failed)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:09.562744Z[0m [[32m[1minfo     [0m] [1mIncluded 5 anchor tracks in recommendations (2 user-mentioned, 3 genre-based)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.anchor_track[0m][0m
[2m2025-11-11T15:22:09.562844Z[0m [[32m[1minfo     [0m] [1mGenerated 54 total recommendations in parallel (6 user anchor, 35 artists, 8 seeds)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:22:09.562957Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_processing[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T15:22:09.563096Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.563237Z[0m [[32m[1minfo     [0m] [1mâœ“ Excluded 2 tracks matching negative seeds[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_filter[0m][0m
[2m2025-11-11T15:22:09.564356Z[0m [[32m[1minfo     [0m] [1mMood filtering: 52 -> 52 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_filter[0m][0m
[2m2025-11-11T15:22:09.565159Z[0m [[32m[1minfo     [0m] [1mDiversity applied: 8 tracks exempted (protected/user-mentioned), 37 tracks penalized[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.diversity[0m][0m
[2m2025-11-11T15:22:09.565475Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_diversifying[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T15:22:09.565568Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.565747Z[0m [[32m[1minfo     [0m] [1manchor_track_capping          [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m3[0m [36mlimit[0m=[35m5[0m [36mnote[0m=[35m'user_mentioned includes tracks from user-mentioned artists'[0m [36moverflow[0m=[35m0[0m [36muser_mentioned[0m=[35m8[0m
[2m2025-11-11T15:22:09.565836Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m1[0m [36mlimit[0m=[35m1[0m [36moverflow[0m=[35m7[0m [36msource[0m=[35mreccobeat[0m
[2m2025-11-11T15:22:09.565910Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m19[0m [36mlimit[0m=[35m19[0m [36moverflow[0m=[35m14[0m [36msource[0m=[35martist_discovery[0m
[2m2025-11-11T15:22:09.565977Z[0m [[32m[1minfo     [0m] [1mfinal_cap_applied             [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mcurrent[0m=[35m31[0m [36mrequested[0m=[35m25[0m [36mtrimmed[0m=[35m6[0m
[2m2025-11-11T15:22:09.566042Z[0m [[32m[1minfo     [0m] [1mratio_enforcement_complete    [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36manchor_count[0m=[35m11[0m [36martist_count[0m=[35m14[0m [36martist_ratio[0m=[35m1.0[0m [36moriginal[0m=[35m52[0m [36mreccobeat_count[0m=[35m0[0m [36mtotal[0m=[35m25[0m
[2m2025-11-11T15:22:09.566177Z[0m [[32m[1minfo     [0m] [1mGenerated 45 final recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T15:22:09.566295Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator completed execution in 159.044429s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:22:09.566349Z[0m [[32m[1minfo     [0m] [1mApplying strategy: generate_more[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T15:22:09.566386Z[0m [[32m[1minfo     [0m] [1mGenerating 5 more recommendations (current: 45, target: 18)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T15:22:09.566413Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:22:09.566440Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations for mood: I want something Indie, like Mac Demarco and Men I Trust.[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T15:22:09.566524Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T15:22:09.566596Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m3[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.566672Z[0m [[32m[1minfo     [0m] [1mSplit WITH user mentions: 7 user anchor, 7 artists, 2 seeds (total: 18)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:22:09.566730Z[0m [[32m[1minfo     [0m] [1mExecuting recommendation strategies in parallel[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:22:09.566942Z[0m [[32m[1minfo     [0m] [1mUser anchor strategy: 0 tracks, 2 artists[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:22:09.567030Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations from 12 discovered artists[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:09.567776Z[0m [[32m[1minfo     [0m] [1mUsing 3 negative seeds to avoid similar tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:22:09.567993Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Mac Demarco' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:09.568306Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Men I Trust' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:09.568714Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.568802Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.568965Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.569203Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.569279Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.569330Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.569505Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.569575Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.569626Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:09.595138Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Mac Demarco'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:09.595422Z[0m [[32m[1minfo     [0m] [1mâœ“ Spotify search for 'Mac Demarco' matched: 'Mac DeMarco' (ID: 3Sz7ZnJQBIHsXLUSo0OQtM)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:22:09.595624Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Men I Trust'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:09.595725Z[0m [[32m[1minfo     [0m] [1mâœ“ Spotify search for 'Men I Trust' matched: 'Men I Trust' (ID: 3zmfs9cQwzJl575W1ZYXeT)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:22:09.595867Z[0m [[32m[1minfo     [0m] [1mCache hit for track recommendations (key: 98387e77...)[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.595945Z[0m [[32m[1minfo     [0m] [1mReturning 4 cached recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.596465Z[0m [[32m[1minfo     [0m] [1mCache hit for track recommendations (key: d6a74eed...)[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.596560Z[0m [[32m[1minfo     [0m] [1mReturning 4 cached recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.619382Z[0m [[32m[1minfo     [0m] [1mCache hit for track lookup (key: 2d330837...)[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.639531Z[0m [[32m[1minfo     [0m] [1mCache hit for track lookup (key: cbe23190...)[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.641513Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (max_popularity: 95, ratio: 70.0%, target: 2 top + 1 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:09.641714Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 30-95[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:09.641758Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:09.717777Z[0m [[32m[1minfo     [0m] [1mToken still valid until 2025-11-11 16:13:52+00:00, no refresh needed[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.token[0m][0m
[2m2025-11-11T15:22:09.748611Z[0m [[32m[1minfo     [0m] [1mFetching 3 tracks from up to 12 artists (target: 7 tracks after filtering)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:09.789348Z[0m [[32m[1minfo     [0m] [1mSkipped 4 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m100.0%[0m [36mtotal_ids[0m=[35m4[0m
[2m2025-11-11T15:22:09.789618Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{4}[0m
[2m2025-11-11T15:22:09.789709Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 0/4 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.789794Z[0m [[32m[1minfo     [0m] [1mAll 4 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:09.789881Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/4 tracks (4 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:22:10.005153Z[0m [[32m[1minfo     [0m] [1mSkipped 4 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m100.0%[0m [36mtotal_ids[0m=[35m4[0m
[2m2025-11-11T15:22:10.005505Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{4}[0m
[2m2025-11-11T15:22:10.005588Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 0/4 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:10.005630Z[0m [[32m[1minfo     [0m] [1mAll 4 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:10.005686Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/4 tracks (4 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:22:10.006073Z[0m [[32m[1minfo     [0m] [1mGenerated 8 raw recommendations from 2 seed chunks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:22:10.006400Z[0m [[32m[1minfo     [0m] [1mValidation pass: 8 -> 8 tracks (filtered 0)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:22:10.006521Z[0m [[32m[1minfo     [0m] [1mGenerated 8 validated recommendations from seeds[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T15:22:10.116709Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 1/12: 35l9BRT7MXmM8bv2WDQiyB[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:10.117266Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 35l9BRT7MXmM8bv2WDQiyB (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:10.117332Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 8/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:10.117365Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 35l9BRT7MXmM8bv2WDQiyB[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:10.117412Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 2/12: 3l0CmX0FuQjFxr8SK7Vqag[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:10.117445Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3l0CmX0FuQjFxr8SK7Vqag (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:10.117481Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:10.117521Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3l0CmX0FuQjFxr8SK7Vqag[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:10.317509Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:10.317747Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:11.520201Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3l0CmX0FuQjFxr8SK7Vqag[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:11.520361Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:11.521073Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 35l9BRT7MXmM8bv2WDQiyB[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:11.521144Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:15.628863Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:15.629198Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3l0CmX0FuQjFxr8SK7Vqag (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:22:15.629257Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 3l0CmX0FuQjFxr8SK7Vqag, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:15.709127Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:22:15.727331Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:15.727532Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 35l9BRT7MXmM8bv2WDQiyB (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:22:15.727581Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 35l9BRT7MXmM8bv2WDQiyB, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:15.752703Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:22:15.796317Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:22:15.866071Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:22:16.198877Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:22:16.266850Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:22:16.267097Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:16.352467Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:16.297886Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 70.0%, top: 2, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:16.298194Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (popularity: 30-95, ratio: 70.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:22:16.298251Z[0m [[32m[1minfo     [0m] [1mâœ“ Got 3 top tracks from user-mentioned artist: Mac Demarco (filtered 0, skipped 0 duplicates, marked as source='anchor_track', protected=True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:22:16.298300Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3zmfs9cQwzJl575W1ZYXeT (max_popularity: 95, ratio: 70.0%, target: 2 top + 1 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:16.298335Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 30-95[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:16.298372Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:16.427007Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:22:16.427221Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:22:16.427359Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 3l0CmX0FuQjFxr8SK7Vqag (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:16.427451Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 3/12: 7pbDxGE6nQSZVfiFdq9lOL[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:16.427513Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 7pbDxGE6nQSZVfiFdq9lOL (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:16.427575Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:16.427630Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 7pbDxGE6nQSZVfiFdq9lOL[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:17.456973Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:17.457155Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:17.520335Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 7pbDxGE6nQSZVfiFdq9lOL[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:17.520617Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:19.847862Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 70.0%, top: 2, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:19.848091Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3zmfs9cQwzJl575W1ZYXeT (popularity: 30-95, ratio: 70.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:22:19.848169Z[0m [[32m[1minfo     [0m] [1mâœ“ Got 3 top tracks from user-mentioned artist: Men I Trust (filtered 0, skipped 0 duplicates, marked as source='anchor_track', protected=True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:22:19.848265Z[0m [[32m[1minfo     [0m] [1mâœ“ Got 6 top tracks from 2 user-mentioned artist(s): Mac Demarco, Men I Trust[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:22:19.848333Z[0m [[32m[1minfo     [0m] [1mUser anchor strategy generated 6 recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.strategies.user_anchor_strategy[0m][0m
[2m2025-11-11T15:22:19.848382Z[0m [[32m[1minfo     [0m] [1mUser anchor strategy generated 6 recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:22:21.648979Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:22:21.649314Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 7pbDxGE6nQSZVfiFdq9lOL (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:22:21.649372Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 7pbDxGE6nQSZVfiFdq9lOL, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:22:21.722993Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:22:22.005613Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:22:32.735856Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:22:57.725216Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:23:10.662387Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_multiple_tracks, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:23:10.662652Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_multiple_tracks, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:23:18.170175Z[0m [[33m[1mwarning  [0m] [1mRequest error when calling tool, retrying[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mattempt[0m=[35m2[0m [36merror[0m=[35m'All connection attempts failed'[0m [36mmax_attempts[0m=[35m3[0m [36mtool[0m=[35mget_multiple_tracks[0m [36murl[0m=[35m'https://api.reccobeats.com/v1/track?ids=3XixCDMWGGZ5aOxeW2UHt3%2C1OH6SHx1jxq10if2GB6GlP'[0m [36mwait_seconds[0m=[35m1.0[0m
[2m2025-11-11T15:23:22.727368Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:23:23.609310Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m61.581422[0m [36mendpoint[0m=[35m/v1/track[0m [36mparams[0m=[35m{'ids': '1pi6ZMcC30dpQSOQHfc4QE,1gH1h30wkQdd9zhY3j7a8T'}[0m [36mtool[0m=[35mget_multiple_tracks[0m
[2m2025-11-11T15:23:23.667059Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:23:24.020807Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:23:24.021046Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:23:24.063939Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:23:27.742392Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:23:27.742831Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:23:27.743108Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 7pbDxGE6nQSZVfiFdq9lOL (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:23:27.743298Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 4/12: 56ZTgzPBDge0OvCGgMO3OY[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:23:27.743407Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 56ZTgzPBDge0OvCGgMO3OY (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:27.743508Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:27.743557Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 56ZTgzPBDge0OvCGgMO3OY[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:28.480217Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 56ZTgzPBDge0OvCGgMO3OY[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:28.480382Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:28.558564Z[0m [[31m[1merror    [0m] [1mAll 3 attempts failed for get_multiple_tracks when calling get_multiple_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:23:28.558829Z[0m [[31m[1merror    [0m] [1mError getting multiple tracks: Request timeout on attempt 3[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
Traceback (most recent call last):
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/reccobeat/track_info.py", line 58, in _run
    response_data = await self._make_request(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 528, in _make_request
    return await self._make_request_internal(method, endpoint, params, json_data, headers, use_cache, cache_ttl)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 592, in _make_request_internal
    response = await super()._make_request(method, endpoint, formatted_params, json_data, headers, use_cache=False, cache_ttl=cache_ttl)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 405, in _make_request
    response = await self._execute_with_retry(_request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 348, in _execute_with_retry
    raise last_exception or APIError("Unknown error occurred")
app.agents.tools.agent_tools.APIError: Request timeout on attempt 3
[2m2025-11-11T15:23:28.565958Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:23:32.565787Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:32.565977Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 56ZTgzPBDge0OvCGgMO3OY (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:23:32.566023Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 56ZTgzPBDge0OvCGgMO3OY, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:23:32.889063Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:23:32.910733Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:23:46.693107Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:23:46.729418Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:23:46.787970Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:23:46.788368Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:23:46.857737Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 2) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:23:47.047849Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:23:47.048170Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:23:47.393061Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:23:48.182217Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:23:48.182457Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:23:48.182632Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 56ZTgzPBDge0OvCGgMO3OY (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:23:48.182750Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 5/12: 37w38cCSGgKLdayTRjna4W[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:23:48.182823Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 37w38cCSGgKLdayTRjna4W (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:48.182910Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 9/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:48.182975Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 37w38cCSGgKLdayTRjna4W[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:48.901296Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 37w38cCSGgKLdayTRjna4W[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:48.901459Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:50.224482Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:23:55.675436Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:23:55.675628Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 37w38cCSGgKLdayTRjna4W (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:23:55.675675Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 37w38cCSGgKLdayTRjna4W, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:23:55.753270Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:23:55.836738Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:24:02.865767Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:24:02.974428Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:24:02.974716Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:23:56.449608Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:24:07.364048Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:24:12.703600Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:24:37.698996Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:24:42.700356Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:24:42.700835Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:24:42.701073Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
Future exception was never retrieved
future: <Future finished exception=APIError('Request timeout on attempt 3')>
Traceback (most recent call last):
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/reccobeat/track_info.py", line 58, in _run
    response_data = await self._make_request(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 528, in _make_request
    return await self._make_request_internal(method, endpoint, params, json_data, headers, use_cache, cache_ttl)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 592, in _make_request_internal
    response = await super()._make_request(method, endpoint, formatted_params, json_data, headers, use_cache=False, cache_ttl=cache_ttl)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 405, in _make_request
    response = await self._execute_with_retry(_request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 348, in _execute_with_retry
    raise last_exception or APIError("Unknown error occurred")
app.agents.tools.agent_tools.APIError: Request timeout on attempt 3
[2m2025-11-11T15:24:55.810407Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m68.390539[0m [36mendpoint[0m=[35m/v1/track/fa660879-f40d-4370-bd72-f4682f614542/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T15:24:55.815553Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m59.327252[0m [36mendpoint[0m=[35m/v1/track/d141757d-be10-4e86-b169-10de85f4bebc/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T15:24:55.816384Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m59.329[0m [36mendpoint[0m=[35m/v1/track/b03576ec-2dd3-4363-984b-258a31969547/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T15:24:55.949352Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:24:55.949636Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:24:55.949820Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 35l9BRT7MXmM8bv2WDQiyB (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:24:55.949981Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 6/12: 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:24:55.950073Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3zmfs9cQwzJl575W1ZYXeT (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:24:55.950151Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:24:55.950200Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:24:55.950296Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:24:55.950355Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:24:55.950433Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 37w38cCSGgKLdayTRjna4W (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:24:55.950494Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 7/12: 1bwUhKRmEkOZ1wuTnV9XjC[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:24:55.950559Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 1bwUhKRmEkOZ1wuTnV9XjC (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:24:55.950598Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:24:55.950621Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 1bwUhKRmEkOZ1wuTnV9XjC[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:24:56.731588Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 1bwUhKRmEkOZ1wuTnV9XjC[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:24:56.731755Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:24:56.783327Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3zmfs9cQwzJl575W1ZYXeT[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:24:56.783534Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:00.994912Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:00.995313Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3zmfs9cQwzJl575W1ZYXeT (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:25:00.995385Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 3zmfs9cQwzJl575W1ZYXeT, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:01.161385Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:25:01.216135Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:02.692716Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:25:02.907859Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:02.908081Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 1bwUhKRmEkOZ1wuTnV9XjC (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:25:02.908128Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 1bwUhKRmEkOZ1wuTnV9XjC, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:03.038931Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:25:03.062972Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:06.596086Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:06.701981Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:25:06.702246Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:12.940129Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:07.455794Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:07.524749Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:25:07.525136Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:07.616319Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 2) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:09.587485Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:09.587750Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:25:09.587961Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 3zmfs9cQwzJl575W1ZYXeT (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:09.588098Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 8/12: 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:09.588191Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:09.588259Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 6/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:09.588319Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:10.072385Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:10.072775Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:25:10.073003Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 1bwUhKRmEkOZ1wuTnV9XjC (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:10.073146Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 9/12: 5b5bt4mZQpJMoCRbiQ7diH[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:10.073212Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 5b5bt4mZQpJMoCRbiQ7diH (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:10.073279Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:10.073325Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 5b5bt4mZQpJMoCRbiQ7diH[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:10.248114Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3Sz7ZnJQBIHsXLUSo0OQtM[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:10.248287Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:11.453023Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 5b5bt4mZQpJMoCRbiQ7diH[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:11.453205Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:14.596889Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:14.597092Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 3Sz7ZnJQBIHsXLUSo0OQtM (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:25:14.597139Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 3Sz7ZnJQBIHsXLUSo0OQtM, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:14.684295Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:25:14.718909Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:15.629715Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:15.630089Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 5b5bt4mZQpJMoCRbiQ7diH (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:25:15.630140Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 5b5bt4mZQpJMoCRbiQ7diH, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:15.712772Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:25:15.794702Z[0m [[32m[1minfo     [0m] [1mSkipped 1 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m50.0%[0m [36mtotal_ids[0m=[35m2[0m
[2m2025-11-11T15:25:15.795233Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 0 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:15.795652Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:15.846018Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{0}[0m
[2m2025-11-11T15:25:15.846263Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:15.894563Z[0m [[32m[1minfo     [0m] [1mAll 3 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:15.894819Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:25:15.895007Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 3Sz7ZnJQBIHsXLUSo0OQtM (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:15.895120Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 10/12: 2mVVjNmdjXZZDvhgQWiakk[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:15.895207Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 2mVVjNmdjXZZDvhgQWiakk (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:15.895297Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:15.895387Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 2mVVjNmdjXZZDvhgQWiakk[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:23.032258Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 2mVVjNmdjXZZDvhgQWiakk[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:23.032440Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:17.375847Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:17.427246Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{1}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T15:25:17.427623Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:17.498440Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:21.017610Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:21.017952Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 2mVVjNmdjXZZDvhgQWiakk (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:25:21.018006Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 2mVVjNmdjXZZDvhgQWiakk, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:21.210008Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:25:21.273769Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:21.452778Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:21.453176Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:25:21.453347Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 5b5bt4mZQpJMoCRbiQ7diH (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:21.453417Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 11/12: 1gl0S9pS0Zw0qfa14rDD3D[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:21.453476Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 1gl0S9pS0Zw0qfa14rDD3D (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:21.453537Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 9/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:21.453580Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 1gl0S9pS0Zw0qfa14rDD3D[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:21.592102Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:21.706488Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 1gl0S9pS0Zw0qfa14rDD3D[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:21.706673Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:21.708830Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:25:21.708952Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:21.809677Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:23.392626Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:23.393023Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:25:23.393260Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 2mVVjNmdjXZZDvhgQWiakk (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:23.393406Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 12/12: 6O4EGCCb6DoIiR6B1QCQgp[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:23.393503Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 6O4EGCCb6DoIiR6B1QCQgp (max_popularity: 80, ratio: 30.0%, target: 1 top + 2 album = 3 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:23.393586Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:23.393619Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 6O4EGCCb6DoIiR6B1QCQgp[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:24.366988Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 6O4EGCCb6DoIiR6B1QCQgp[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:24.367247Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:26.488728Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:26.488942Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 1gl0S9pS0Zw0qfa14rDD3D (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:25:26.488993Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 1gl0S9pS0Zw0qfa14rDD3D, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:26.607182Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:25:26.678196Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:27.690498Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:25:28.770295Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:28.928576Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T15:25:28.928868Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:29.004091Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:38.067292Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:25:38.067609Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks (0 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:25:38.067794Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 1gl0S9pS0Zw0qfa14rDD3D (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:35.053342Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T15:25:35.053530Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 6O4EGCCb6DoIiR6B1QCQgp (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T15:25:35.053575Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 6O4EGCCb6DoIiR6B1QCQgp, processing top 3[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:25:35.134495Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T15:25:35.158915Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:25:52.685678Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:17.682280Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:29.688084Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_multiple_tracks, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T15:26:42.354145Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m67.16324[0m [36mendpoint[0m=[35m/v1/track[0m [36mparams[0m=[35m{'ids': '770bnDpAOO4BaS5Kgp9XTF'}[0m [36mtool[0m=[35mget_multiple_tracks[0m
[2m2025-11-11T15:26:42.398586Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 0 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T15:26:42.421925Z[0m [[32m[1minfo     [0m] [1mConverted 2/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{0}[0m
[2m2025-11-11T15:26:42.422297Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:26:42.466474Z[0m [[32m[1minfo     [0m] [1mAll 3 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T15:26:42.466736Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/3 tracks (1 using defaults)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T15:26:42.466927Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 6O4EGCCb6DoIiR6B1QCQgp (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:26:42.467330Z[0m [[32m[1minfo     [0m] [1mGenerated 36 recommendations from 12/12 artists (0 failed)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T15:26:42.475999Z[0m [[32m[1minfo     [0m] [1mIncluded 5 anchor tracks in recommendations (2 user-mentioned, 3 genre-based)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.anchor_track[0m][0m
[2m2025-11-11T15:26:42.476190Z[0m [[32m[1minfo     [0m] [1mGenerated 55 total recommendations in parallel (6 user anchor, 36 artists, 8 seeds)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T15:26:42.476554Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_processing[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T15:26:42.476670Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.476761Z[0m [[32m[1minfo     [0m] [1mâœ“ Excluded 2 tracks matching negative seeds[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_filter[0m][0m
[2m2025-11-11T15:26:42.478132Z[0m [[32m[1minfo     [0m] [1mMood filtering: 53 -> 53 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_filter[0m][0m
[2m2025-11-11T15:26:42.478548Z[0m [[32m[1minfo     [0m] [1mDiversity applied: 8 tracks exempted (protected/user-mentioned), 37 tracks penalized[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.diversity[0m][0m
[2m2025-11-11T15:26:42.478688Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_diversifying[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T15:26:42.478771Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.479383Z[0m [[32m[1minfo     [0m] [1manchor_track_capping          [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m3[0m [36mlimit[0m=[35m5[0m [36mnote[0m=[35m'user_mentioned includes tracks from user-mentioned artists'[0m [36moverflow[0m=[35m0[0m [36muser_mentioned[0m=[35m8[0m
[2m2025-11-11T15:26:42.479498Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m1[0m [36mlimit[0m=[35m1[0m [36moverflow[0m=[35m7[0m [36msource[0m=[35mreccobeat[0m
[2m2025-11-11T15:26:42.479554Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m19[0m [36mlimit[0m=[35m19[0m [36moverflow[0m=[35m15[0m [36msource[0m=[35martist_discovery[0m
[2m2025-11-11T15:26:42.479608Z[0m [[32m[1minfo     [0m] [1mfinal_cap_applied             [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mcurrent[0m=[35m31[0m [36mrequested[0m=[35m25[0m [36mtrimmed[0m=[35m6[0m
[2m2025-11-11T15:26:42.479707Z[0m [[32m[1minfo     [0m] [1mratio_enforcement_complete    [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36manchor_count[0m=[35m11[0m [36martist_count[0m=[35m14[0m [36martist_ratio[0m=[35m1.0[0m [36moriginal[0m=[35m53[0m [36mreccobeat_count[0m=[35m0[0m [36mtotal[0m=[35m25[0m
[2m2025-11-11T15:26:42.479897Z[0m [[32m[1minfo     [0m] [1mGenerated 69 final recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T15:26:42.480051Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator completed execution in 272.913578s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:26:42.480129Z[0m [[32m[1minfo     [0m] [1mGenerated additional recommendations[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m [36mnew_count[0m=[35m69[0m [36mprevious_count[0m=[35m45[0m
[2m2025-11-11T15:26:42.480553Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.480671Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.480748Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mrecommendations_generated[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.481001Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.481063Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.481100Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mrecommendations_generated[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.585289Z[0m [[32m[1minfo     [0m] [1mStarting final processing and cleanup...[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:42.585687Z[0m [[32m[1minfo     [0m] [1mduplicates_removed            [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mafter[0m=[35m48[0m [36mbefore[0m=[35m69[0m [36mremoved[0m=[35m21[0m
[2m2025-11-11T15:26:42.585876Z[0m [[32m[1minfo     [0m] [1mEnriching tracks with missing Spotify data...[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:42.586104Z[0m [[32m[1minfo     [0m] [1mFound 9/48 tracks that need enrichment[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:42.586225Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35menriching_tracks[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T15:26:42.586317Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.586426Z[0m [[32m[1minfo     [0m] [1mEnriching track: 'For the First Time' by Mac DeMarco (missing URI: True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:42.586506Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'track:For the First Time artist:Mac DeMarco' (limit: 5)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:42.587443Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.587554Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.587607Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35menriching_tracks[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.676331Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:42.977444Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 2 tracks for query 'track:For the First Time artist:Mac DeMarco'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:42.977649Z[0m [[32m[1minfo     [0m] [1mFound match: 'For the First Time' by Mac DeMarco (matched artist: mac demarco â‰ˆ mac demarco)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:42.977719Z[0m [[32m[1minfo     [0m] [1mEnriching track: 'Heart To Heart' by Mac DeMarco (missing URI: True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:42.977753Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'track:Heart To Heart artist:Mac DeMarco' (limit: 5)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:43.348492Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 5 tracks for query 'track:Heart To Heart artist:Mac DeMarco'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:43.348710Z[0m [[32m[1minfo     [0m] [1mFound match: 'Heart To Heart' by Mac DeMarco (matched artist: mac demarco â‰ˆ mac demarco)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:43.348784Z[0m [[32m[1minfo     [0m] [1mEnriching track: 'Rockaway' by Mac DeMarco (missing URI: True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:43.348836Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'track:Rockaway artist:Mac DeMarco' (limit: 5)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:43.668042Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 2 tracks for query 'track:Rockaway artist:Mac DeMarco'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:43.668236Z[0m [[32m[1minfo     [0m] [1mFound match: 'Rockaway' by Mac DeMarco (matched artist: mac demarco â‰ˆ mac demarco)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:43.668302Z[0m [[32m[1minfo     [0m] [1mEnriching track: 'Numb' by Men I Trust (missing URI: True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:43.668334Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'track:Numb artist:Men I Trust' (limit: 5)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:43.927256Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 tracks for query 'track:Numb artist:Men I Trust'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:43.927462Z[0m [[32m[1minfo     [0m] [1mFound match: 'Numb' by Men I Trust (matched artist: men i trust â‰ˆ men i trust)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:43.927528Z[0m [[32m[1minfo     [0m] [1mEnriching track: 'Girl (2025)' by Men I Trust (missing URI: True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:43.927576Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'track:Girl (2025) artist:Men I Trust' (limit: 5)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:44.316827Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 1 tracks for query 'track:Girl (2025) artist:Men I Trust'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:44.317190Z[0m [[32m[1minfo     [0m] [1mFound match: 'Girl (2025)' by Men I Trust (matched artist: men i trust â‰ˆ men i trust)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:44.317362Z[0m [[32m[1minfo     [0m] [1mEnriching track: '20180816' by Mac DeMarco (missing URI: True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:44.317418Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'track:20180816 artist:Mac DeMarco' (limit: 5)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:44.743980Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 1 tracks for query 'track:20180816 artist:Mac DeMarco'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:44.744341Z[0m [[32m[1minfo     [0m] [1mFound match: '20180816' by Mac DeMarco (matched artist: mac demarco â‰ˆ mac demarco)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:44.744433Z[0m [[32m[1minfo     [0m] [1mEnriching track: 'Beluga' by Men I Trust (missing URI: True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:44.744523Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'track:Beluga artist:Men I Trust' (limit: 5)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:45.055287Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 1 tracks for query 'track:Beluga artist:Men I Trust'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:45.055625Z[0m [[32m[1minfo     [0m] [1mFound match: 'Beluga' by Men I Trust (matched artist: men i trust â‰ˆ men i trust)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:45.055748Z[0m [[32m[1minfo     [0m] [1mEnriching track: '20190813' by Mac DeMarco (missing URI: True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:45.055808Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'track:20190813 artist:Mac DeMarco' (limit: 5)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:45.366209Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 tracks for query 'track:20190813 artist:Mac DeMarco'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:45.366417Z[0m [[32m[1minfo     [0m] [1mFound match: '20190813' by Mac DeMarco (matched artist: mac demarco â‰ˆ mac demarco)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:45.366480Z[0m [[32m[1minfo     [0m] [1mEnriching track: 'Break for Lovers - Live' by Men I Trust (missing URI: True)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:45.366537Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'track:Break for Lovers - Live artist:Men I Trust' (limit: 5)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:45.627750Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 2 tracks for query 'track:Break for Lovers - Live artist:Men I Trust'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T15:26:45.627973Z[0m [[32m[1minfo     [0m] [1mFound match: 'Break for Lovers - Live' by Men I Trust (matched artist: men i trust â‰ˆ men i trust)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:45.628059Z[0m [[32m[1minfo     [0m] [1mEnrichment complete: 9 enriched, 39 already valid, 0 failed (kept), 0 removed[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_enrichment[0m][0m
[2m2025-11-11T15:26:45.628113Z[0m [[32m[1minfo     [0m] [1mTrack enrichment complete: 48 -> 48 tracks (0 removed)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:45.628414Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Lauren by Men I Trust (user_mentioned=True, user_mentioned_artist=False, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628462Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Show Me How by Men I Trust (user_mentioned=True, user_mentioned_artist=False, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628493Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: For the First Time by Mac DeMarco (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628513Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Heart To Heart by Mac DeMarco (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628531Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Rockaway by Mac DeMarco (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628547Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Numb by Men I Trust (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628564Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Girl (2025) by Men I Trust (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628584Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: 20180816 by Mac DeMarco (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628600Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Beluga by Men I Trust (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628678Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: 20190813 by Mac DeMarco (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:45.628753Z[0m [[32m[1minfo     [0m] [1mSkipping outlier detection for protected track: Break for Lovers - Live by Men I Trust (user_mentioned=False, user_mentioned_artist=True, anchor_type=user)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:48.978108Z[0m [[32m[1minfo     [0m] [1mLLM assessment: quality=0.8, meets_expectations=True[0m [[0m[1m[34mapp.agents.recommender.orchestrator.quality_evaluator[0m][0m
[2m2025-11-11T15:26:48.978406Z[0m [[32m[1minfo     [0m] [1mLLM flagged outlier: People Everywhere (Still Alive) by Khruangbin (matched from concern: People Everywhere (Still Alive) by Khruangbin feels out of place because while K...)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:48.978475Z[0m [[32m[1minfo     [0m] [1mLLM flagged outlier: Mariella by Khruangbin, Leon Bridges (matched from concern: Mariella by Khruangbin, Leon Bridges feels out of place because the strong soul ...)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:48.978515Z[0m [[32m[1minfo     [0m] [1mLLM flagged outlier: Texas Sun by Khruangbin, Leon Bridges (matched from concern: Texas Sun by Khruangbin, Leon Bridges feels out of place because this is a stron...)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T15:26:48.978601Z[0m [[32m[1minfo     [0m] [1mLLM identified 3 additional outliers: ['People Everywhere (Still Alive)', 'Mariella', 'Texas Sun'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.quality_evaluator[0m][0m
[2m2025-11-11T15:26:48.978685Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: People Everywhere (Still Alive) by Khruangbin (cohesion: 0.44)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:48.978721Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Mariella by Khruangbin, Leon Bridges (cohesion: 0.62)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:48.978753Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Texas Sun by Khruangbin, Leon Bridges (cohesion: 0.48)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:48.978785Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Space Song by Beach House (cohesion: 0.30)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:48.978838Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: I've Been Let Down by Mazzy Star (cohesion: 0.28)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:48.978920Z[0m [[32m[1minfo     [0m] [1mFinal outlier filtering: removed 5 tracks (0 protected tracks kept despite being outliers)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:48.979046Z[0m [[32m[1minfo     [0m] [1manchor_track_capping          [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m0[0m [36mlimit[0m=[35m5[0m [36mnote[0m=[35m'user_mentioned includes tracks from user-mentioned artists'[0m [36moverflow[0m=[35m0[0m [36muser_mentioned[0m=[35m11[0m
[2m2025-11-11T15:26:48.979121Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m12[0m [36mlimit[0m=[35m12[0m [36moverflow[0m=[35m20[0m [36msource[0m=[35martist_discovery[0m
[2m2025-11-11T15:26:48.979174Z[0m [[32m[1minfo     [0m] [1mfinal_cap_applied             [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mcurrent[0m=[35m23[0m [36mrequested[0m=[35m18[0m [36mtrimmed[0m=[35m5[0m
[2m2025-11-11T15:26:48.979230Z[0m [[32m[1minfo     [0m] [1mratio_enforcement_complete    [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36manchor_count[0m=[35m11[0m [36martist_count[0m=[35m7[0m [36martist_ratio[0m=[35m1.0[0m [36moriginal[0m=[35m43[0m [36mreccobeat_count[0m=[35m0[0m [36mtotal[0m=[35m18[0m
[2m2025-11-11T15:26:48.979310Z[0m [[32m[1minfo     [0m] [1mFinal processing complete: 18 tracks delivered (cohesion: 0.59, overall: 0.73)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:48.979350Z[0m [[32m[1minfo     [0m] [1mFinal processing complete: 18 tracks delivered[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:48.979380Z[0m [[32m[1minfo     [0m] [1mOrchestration completed with 18 unique recommendations after 1 iteration(s)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T15:26:48.979432Z[0m [[32m[1minfo     [0m] [1mAgent orchestrator completed execution in 279.412972s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T15:26:49.339590Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mrecommendations_ready[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T15:26:49.340003Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:49.340177Z[0m [[32m[1minfo     [0m] [1mStarting playlist ordering for session ef0dd793-7796-4454-bd57-d376cad4a2fd[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:49.340263Z[0m [[32m[1minfo     [0m] [1mAnalyzing energy characteristics for 18 tracks in batches of 8[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:49.344375Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:49.344455Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:49.344500Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35moptimizing_recommendations[0m [36mnew_step[0m=[35mordering_playlist[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:49.344551Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35moptimizing_recommendations[0m [36mstep[0m=[35mordering_playlist[0m
INFO:     127.0.0.1:45318 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:26:52.298257Z[0m [[32m[1minfo     [0m] [1mCompleted energy analysis batch[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m [36manalyzed_tracks[0m=[35m2[0m [36mbatch[0m=[35m3/3[0m
[2m2025-11-11T15:26:54.314608Z[0m [[32m[1minfo     [0m] [1mCompleted energy analysis batch[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m [36manalyzed_tracks[0m=[35m8[0m [36mbatch[0m=[35m1/3[0m
[2m2025-11-11T15:26:55.384664Z[0m [[32m[1minfo     [0m] [1mCompleted energy analysis batch[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m [36manalyzed_tracks[0m=[35m8[0m [36mbatch[0m=[35m2/3[0m
[2m2025-11-11T15:26:55.384885Z[0m [[32m[1minfo     [0m] [1mSuccessfully analyzed 18 tracks across 3 batches[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:55.385047Z[0m [[32m[1minfo     [0m] [1mAttached energy analyses to 18 tracks[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:55.385108Z[0m [[32m[1minfo     [0m] [1mDetermining optimal ordering strategy[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:57.754818Z[0m [[32m[1minfo     [0m] [1mSelected strategy: classic_build[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:57.755244Z[0m [[32m[1minfo     [0m] [1mOrdering tracks according to strategy[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:57.755414Z[0m [[32m[1minfo     [0m] [1mPhase distribution for 18 tracks: {'opening': 3, 'build': 3, 'mid': 5, 'high': 3, 'descent': 3, 'closure': 1}[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.phase_assigner[0m][0m
[2m2025-11-11T15:26:57.772788Z[0m [[32m[1minfo     [0m] [1mPhase 'opening': 3 tracks     [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:57.773175Z[0m [[32m[1minfo     [0m] [1mPhase 'build': 3 tracks       [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:57.773229Z[0m [[32m[1minfo     [0m] [1mPhase 'mid': 5 tracks         [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:57.773262Z[0m [[32m[1minfo     [0m] [1mPhase 'high': 3 tracks        [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:57.773287Z[0m [[32m[1minfo     [0m] [1mPhase 'descent': 3 tracks     [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:57.773308Z[0m [[32m[1minfo     [0m] [1mPhase 'closure': 1 tracks     [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T15:26:57.773345Z[0m [[32m[1minfo     [0m] [1mPlaylist ordering complete    [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m [36mstrategy[0m=[35mclassic_build[0m [36mtrack_count[0m=[35m18[0m
[2m2025-11-11T15:26:58.009795Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mordering_playlist[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T15:26:58.010173Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:58.011764Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:58.011873Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:58.011925Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mcompleted[0m [36mnew_step[0m=[35mrecommendations_ready[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mordering_playlist[0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m
[2m2025-11-11T15:26:58.012011Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mef0dd793-7796-4454-bd57-d376cad4a2fd[0m [36mstatus[0m=[35mcompleted[0m [36mstep[0m=[35mrecommendations_ready[0m
[2m2025-11-11T15:26:58.268574Z[0m [[32m[1minfo     [0m] [1mWorkflow ef0dd793-7796-4454-bd57-d376cad4a2fd completed in 793.51s[0m [[0m[1m[34mapp.agents.workflows.workflow_manager[0m][0m
INFO:     127.0.0.1:49698 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:45318 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:45318 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:49698 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/results HTTP/1.1" 200 OK
INFO:     127.0.0.1:45318 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:45318 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:49698 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/results HTTP/1.1" 200 OK
INFO:     127.0.0.1:49698 - "GET /api/agents/recommendations/ef0dd793-7796-4454-bd57-d376cad4a2fd/cost HTTP/1.1" 200 OK
[2m2025-11-11T15:27:11.082999Z[0m [[32m[1minfo     [0m] [1mGetting track details         [0m [[0m[1m[34mapp.spotify.routes[0m][0m [36mtrack_identifier[0m=[35mspotify:track:3Mc1wHPrWcXiLeokUZ3Oab[0m [36muser_id[0m=[35m1[0m
INFO:     127.0.0.1:49698 - "GET /api/spotify/tracks/spotify%3Atrack%3A3Mc1wHPrWcXiLeokUZ3Oab HTTP/1.1" 200 OK
[2m2025-11-11T15:27:16.344861Z[0m [[32m[1minfo     [0m] [1mGetting track details         [0m [[0m[1m[34mapp.spotify.routes[0m][0m [36mtrack_identifier[0m=[35mspotify:track:3Vde5vALhDIebbDGGeC5ai[0m [36muser_id[0m=[35m1[0m
INFO:     127.0.0.1:49698 - "GET /api/spotify/tracks/spotify%3Atrack%3A3Vde5vALhDIebbDGGeC5ai HTTP/1.1" 200 OK
[2m2025-11-11T15:27:25.606568Z[0m [[32m[1minfo     [0m] [1mGetting track details         [0m [[0m[1m[34mapp.spotify.routes[0m][0m [36mtrack_identifier[0m=[35mspotify:track:34xj46v8cg0SagRVTXcPob[0m [36muser_id[0m=[35m1[0m
INFO:     127.0.0.1:49698 - "GET /api/spotify/tracks/spotify%3Atrack%3A34xj46v8cg0SagRVTXcPob HTTP/1.1" 200 OK
[2m2025-11-11T15:27:36.913682Z[0m [[32m[1minfo     [0m] [1mGetting track details         [0m [[0m[1m[34mapp.spotify.routes[0m][0m [36mtrack_identifier[0m=[35mspotify:track:7v9mxynhkCRuMkPWTwpV7E[0m [36muser_id[0m=[35m1[0m
INFO:     127.0.0.1:49698 - "GET /api/spotify/tracks/spotify%3Atrack%3A7v9mxynhkCRuMkPWTwpV7E HTTP/1.1" 200 OK
INFO:     127.0.0.1:49698 - "GET /api/stats/public HTTP/1.1" 200 OK
