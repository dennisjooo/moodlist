2025-11-11 19:12:33 [info     ] Using in-memory cache (no Valkey/Redis URL provided)
2025-11-11 19:12:28 [info     ] Registered tool: get_track_recommendations
2025-11-11 19:12:28 [info     ] Registered tool: get_multiple_tracks
2025-11-11 19:12:28 [info     ] Registered tool: get_track_audio_features
2025-11-11 19:12:28 [info     ] Registered tool: search_artists
2025-11-11 19:12:28 [info     ] Registered tool: get_multiple_artists
2025-11-11 19:12:28 [info     ] Registered tool: get_artist_tracks
2025-11-11 19:12:28 [info     ] Initialized RecoBeat service with all tools
2025-11-11 19:12:28 [info     ] Registered tool: get_user_top_tracks
2025-11-11 19:12:28 [info     ] Registered tool: get_user_top_artists
2025-11-11 19:12:28 [info     ] Registered tool: create_playlist
2025-11-11 19:12:28 [info     ] Registered tool: add_tracks_to_playlist
2025-11-11 19:12:28 [info     ] Registered tool: get_user_profile
2025-11-11 19:12:28 [info     ] Registered tool: search_spotify_artists
2025-11-11 19:12:28 [info     ] Registered tool: get_several_spotify_artists
2025-11-11 19:12:28 [info     ] Registered tool: get_artist_top_tracks
2025-11-11 19:12:28 [info     ] Registered tool: batch_get_artist_top_tracks
2025-11-11 19:12:28 [info     ] Registered tool: search_spotify_tracks
2025-11-11 19:12:28 [info     ] Initialized Spotify service with all tools
2025-11-11 19:12:28 [info     ] Enabling TrustedHostMiddleware allowed_hosts=['moodlist-2rk1.onrender.com', 'localhost', '127.0.0.1']
[2m2025-11-11T12:12:28.695642Z[0m [[32m[1minfo     [0m] [1mLogging configured            [0m [[0m[1m[34mapp.core.logging_config[0m][0m [36mlog_level[0m=[35mINFO[0m
[2m2025-11-11T12:12:28.695859Z[0m [[32m[1minfo     [0m] [1mStarting application          [0m [[0m[1m[34mapp.core.lifespan[0m][0m [36mapp_name[0m=[35m'MoodList API'[0m [36menvironment[0m=[35mdevelopment[0m
[2m2025-11-11T12:12:28.695958Z[0m [[32m[1minfo     [0m] [1mAll required secrets validated successfully[0m [[0m[1m[34mapp.core.validation[0m][0m
[2m2025-11-11T12:12:28.696039Z[0m [[32m[1minfo     [0m] [1mInitializing cache manager with Valkey[0m [[0m[1m[34mapp.core.lifespan[0m][0m [36mredis_url[0m=[35mredis://default:AUXIAAIncDJiZTY1ZTM3MGVkOGE0OTJjOTY5ZjA0ZmU1NmM5Mzk4ZHAyMTc4NjQ@sweeping-lark-17864.upstash.io:6379[0m
[2m2025-11-11T12:12:28.696151Z[0m [[32m[1minfo     [0m] [1mUsing Valkey/Redis cache at redis://default:AUXIAAIncDJiZTY1ZTM3MGVkOGE0OTJjOTY5ZjA0ZmU1NmM5Mzk4ZHAyMTc4NjQ@sweeping-lark-17864.upstash.io:6379[0m [[0m[1m[34mapp.agents.core.cache[0m][0m
INFO:     127.0.0.1:55162 - "OPTIONS /api/spotify/token?code=AQAeQByHjiSKz86U9xVO6rP6IVJ8Z-bFoO_AteRFL7RRnenVf3YWeDZ56aWWQqQNk5xNHbwMdu8FOUbzt3khj8oq3XBMIs7LN1_Of7v54saHax2auJuVUSOdqRbwqvOtL-9IHVwcPsDF5Hq5NwZRiOw6rK3vfOwvuCQSf81DZcVVV8hL9T8xQXwPrg2nXyuMFxBmqroO5Y8NFjMmG7Euf4fLVCwRWU8UawwNhDUPJe3dBU3yGtTL2amywJ2z8dWFv19tzzZYgi13xwx4VLGWedexsn5GtTlUTIbgj26sHD-rYJEbX3v-y2ADI356P7pK-icRA3e8RGVeReI5B44YnAvWn-Fu_qPZ2Q9QPf8sLQ HTTP/1.1" 200 OK
INFO:     127.0.0.1:42896 - "GET /api/auth/verify HTTP/1.1" 200 OK
[2m2025-11-11T12:12:40.579017Z[0m [[32m[1minfo     [0m] [1mExchanging authorization code for tokens[0m [[0m[1m[34mapp.spotify.routes[0m][0m
[2m2025-11-11T12:12:40.791807Z[0m [[32m[1minfo     [0m] [1mToken exchange successful     [0m [[0m[1m[34mapp.spotify.routes[0m][0m
INFO:     127.0.0.1:42908 - "GET /api/stats/public HTTP/1.1" 200 OK
INFO:     127.0.0.1:42896 - "GET /api/auth/verify HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "POST /api/spotify/token?code=AQAeQByHjiSKz86U9xVO6rP6IVJ8Z-bFoO_AteRFL7RRnenVf3YWeDZ56aWWQqQNk5xNHbwMdu8FOUbzt3khj8oq3XBMIs7LN1_Of7v54saHax2auJuVUSOdqRbwqvOtL-9IHVwcPsDF5Hq5NwZRiOw6rK3vfOwvuCQSf81DZcVVV8hL9T8xQXwPrg2nXyuMFxBmqroO5Y8NFjMmG7Euf4fLVCwRWU8UawwNhDUPJe3dBU3yGtTL2amywJ2z8dWFv19tzzZYgi13xwx4VLGWedexsn5GtTlUTIbgj26sHD-rYJEbX3v-y2ADI356P7pK-icRA3e8RGVeReI5B44YnAvWn-Fu_qPZ2Q9QPf8sLQ HTTP/1.1" 200 OK
INFO:     127.0.0.1:55162 - "OPTIONS /api/auth/login HTTP/1.1" 200 OK
[2m2025-11-11T12:12:43.611104Z[0m [[32m[1minfo     [0m] [1mLogin attempt                 [0m [[0m[1m[34mapp.services.auth_service[0m][0m [36mip[0m=[35m127.0.0.1[0m [36mservice[0m=[35mAuthService[0m
[2m2025-11-11T12:12:44.511631Z[0m [[32m[1minfo     [0m] [1mUser upserted successfully    [0m [[0m[1m[34mapp.repositories.base_repository[0m][0m [36mrepository[0m=[35mUserRepository[0m [36mspotify_id[0m=[35m085692333065[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:12:45.431072Z[0m [[32m[1minfo     [0m] [1mSession replaced atomically   [0m [[0m[1m[34mapp.repositories.base_repository[0m][0m [36mdeleted_count[0m=[35m1[0m [36mnew_session_id[0m=[35m190[0m [36mrepository[0m=[35mSessionRepository[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:12:45.531812Z[0m [[32m[1minfo     [0m] [1mLogin successful              [0m [[0m[1m[34mapp.services.auth_service[0m][0m [36mdb_duration_ms[0m=[35m703.4847736358643[0m [36mservice[0m=[35mAuthService[0m [36mspotify_duration_ms[0m=[35m293.7798500061035[0m [36mspotify_id[0m=[35m085692333065[0m [36mtotal_duration_ms[0m=[35m1920.6318855285645[0m [36muser_id[0m=[35m1[0m
INFO:     127.0.0.1:55174 - "GET /api/stats/public HTTP/1.1" 200 OK
INFO:     127.0.0.1:42896 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:42908 - "GET /api/auth/quota HTTP/1.1" 401 Unauthorized
INFO:     127.0.0.1:42896 - "GET /api/auth/verify HTTP/1.1" 200 OK
INFO:     127.0.0.1:42896 - "GET /api/auth/verify HTTP/1.1" 200 OK
[2m2025-11-11T12:12:52.193548Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_track_recommendations[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.193749Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_multiple_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.193793Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_track_audio_features[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.193822Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.193845Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_multiple_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.193864Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_artist_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.193897Z[0m [[32m[1minfo     [0m] [1mInitialized RecoBeat service with all tools[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:12:52.249787Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250111Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_top_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250156Z[0m [[32m[1minfo     [0m] [1mRegistered tool: create_playlist[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250185Z[0m [[32m[1minfo     [0m] [1mRegistered tool: add_tracks_to_playlist[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250212Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_profile[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250234Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_spotify_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250256Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_several_spotify_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250278Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_artist_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250298Z[0m [[32m[1minfo     [0m] [1mRegistered tool: batch_get_artist_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250319Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_spotify_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.250391Z[0m [[32m[1minfo     [0m] [1mInitialized Spotify service with all tools[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:12:52.262055Z[0m [[32m[1minfo     [0m] [1mInitialized agent: intent_analyzer[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:12:52.262306Z[0m [[32m[1minfo     [0m] [1mInitialized agent: mood_analyzer[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:12:52.262409Z[0m [[32m[1minfo     [0m] [1mInitialized agent: seed_gatherer[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:12:52.262554Z[0m [[32m[1minfo     [0m] [1mInitialized agent: recommendation_generator[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:12:52.262706Z[0m [[32m[1minfo     [0m] [1mInitialized agent: orchestrator[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:12:52.320073Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320257Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_top_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320298Z[0m [[32m[1minfo     [0m] [1mRegistered tool: create_playlist[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320325Z[0m [[32m[1minfo     [0m] [1mRegistered tool: add_tracks_to_playlist[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320352Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_user_profile[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320392Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_spotify_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320432Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_several_spotify_artists[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320471Z[0m [[32m[1minfo     [0m] [1mRegistered tool: get_artist_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320509Z[0m [[32m[1minfo     [0m] [1mRegistered tool: batch_get_artist_top_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320546Z[0m [[32m[1minfo     [0m] [1mRegistered tool: search_spotify_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:12:52.320585Z[0m [[32m[1minfo     [0m] [1mInitialized Spotify service with all tools[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:12:52.320653Z[0m [[32m[1minfo     [0m] [1mInitialized agent: PlaylistOrderingAgent[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:12:52.320762Z[0m [[32m[1minfo     [0m] [1mInitialized WorkflowManager with 6 agents[0m [[0m[1m[34mapp.agents.workflows.workflow_manager[0m][0m
[2m2025-11-11T12:12:52.321978Z[0m [[32m[1minfo     [0m] [1mStarting recommendation workflow[0m [[0m[1m[34mapp.agents.routes.recommendations[0m][0m [36mmood_prompt[0m=[35m'Laid-back acoustic, bossa nova, and mellow indie folk creating a cozy caf√© atmosphere perfect for reading or chatting'[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:12:52.322153Z[0m [[32m[1minfo     [0m] [1mStarted workflow ecec74bb-2d8a-4e3b-8459-75d0943c7d68 for mood: Laid-back acoustic, bossa nova, and mellow indie f...[0m [[0m[1m[34mapp.agents.workflows.workflow_manager[0m][0m
[2m2025-11-11T12:12:52.323944Z[0m [[32m[1minfo     [0m] [1mExecuting workflow ecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [[0m[1m[34mapp.agents.workflows.workflow_manager[0m][0m
[2m2025-11-11T12:12:52.324055Z[0m [[32m[1minfo     [0m] [1mAgent intent_analyzer starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:12:52.324175Z[0m [[32m[1minfo     [0m] [1mAnalyzing intent for prompt: Laid-back acoustic, bossa nova, and mellow indie folk creating a cozy caf√© atmosphere perfect for reading or chatting[0m [[0m[1m[34mapp.agents.recommender.intent_analyzer.intent_analyzer_agent[0m][0m
[2m2025-11-11T12:12:52.764127Z[0m [[32m[1minfo     [0m] [1mPlaylist created for session  [0m [[0m[1m[34mapp.repositories.base_repository[0m][0m [36mplaylist_id[0m=[35m64[0m [36mrepository[0m=[35mPlaylistRepository[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:12:52.764584Z[0m [[32m[1minfo     [0m] [1mCreated playlist record       [0m [[0m[1m[34mapp.agents.routes.recommendations[0m][0m [36mplaylist_id[0m=[35m64[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:42896 - "GET /api/stats/public HTTP/1.1" 200 OK
INFO:     127.0.0.1:42908 - "POST /api/agents/recommendations/start?mood_prompt=Laid-back+acoustic%2C+bossa+nova%2C+and+mellow+indie+folk+creating+a+cozy+caf%C3%A9+atmosphere+perfect+for+reading+or+chatting HTTP/1.1" 200 OK
[2m2025-11-11T12:12:56.537477Z[0m [[32m[1minfo     [0m] [1mLLM intent analysis: The user is requesting a playlist based on a specific mood ('cozy caf√© atmosphere') combining several related, mellow genres (acoustic, bossa nova, indie folk). This indicates a mood-based request prioritizing atmosphere over strict genre adherence.[0m [[0m[1m[34mapp.agents.recommender.intent_analyzer.intent_analyzer_agent[0m][0m
[2m2025-11-11T12:12:56.537827Z[0m [[32m[1minfo     [0m] [1mIntent analysis completed     [0m [[0m[1m[34mapp.agents.recommender.intent_analyzer.intent_analyzer_agent[0m][0m [36mgenre_strictness[0m=[35m0.5[0m [36mintent_type[0m=[35mmood_variety[0m [36mmentioned_artists_count[0m=[35m0[0m [36mmentioned_tracks_count[0m=[35m0[0m [36mprimary_genre[0m=[35macoustic[0m
[2m2025-11-11T12:12:56.537949Z[0m [[32m[1minfo     [0m] [1mAgent intent_analyzer completed execution in 4.213824s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
INFO:     127.0.0.1:42908 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:12:57.405108Z[0m [[32m[1minfo     [0m] [1mWebSocket connection accepted [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:12:57.405253Z[0m [[32m[1minfo     [0m] [1mWebSocket auth attempt        [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36mcookies_keys[0m=[35m['session_token'][0m [36mhas_query_params[0m=[35mFalse[0m [36mhas_token[0m=[35mTrue[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:12:57.414032Z[0m [[32m[1minfo     [0m] [1mAgent mood_analyzer starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:12:57.414319Z[0m [[32m[1minfo     [0m] [1mAnalyzing mood prompt: Laid-back acoustic, bossa nova, and mellow indie folk creating a cozy caf√© atmosphere perfect for reading or chatting[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T12:12:57.414415Z[0m [[32m[1minfo     [0m] [1mPerforming mood analysis for audio features[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T12:12:58.393593Z[0m [[32m[1minfo     [0m] [1mWebSocket authenticated successfully[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:12:58.394152Z[0m [[32m[1minfo     [0m] [1mWebSocket subscribed to state changes[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:42908 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:12:58.502910Z[0m [[32m[1minfo     [0m] [1mClient disconnected during message processing[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:42896 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:42908 - "GET /api/auth/quota HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:13:02.815103Z[0m [[32m[1minfo     [0m] [1mMood analysis: 7 genres, primary emotion: Calmness and contentment[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T12:13:02.815352Z[0m [[32m[1minfo     [0m] [1mExtracted target features: ['acousticness', 'danceability', 'energy', 'instrumentalness', 'key', 'liveness', 'loudness', 'mode', 'speechiness', 'tempo', 'valence', 'popularity'][0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.features.feature_extractor[0m][0m
[2m2025-11-11T12:13:02.815409Z[0m [[32m[1minfo     [0m] [1mTarget features: ['acousticness', 'danceability', 'energy', 'instrumentalness', 'key', 'liveness', 'loudness', 'mode', 'speechiness', 'tempo', 'valence', 'popularity'][0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T12:13:02.815448Z[0m [[32m[1minfo     [0m] [1mFeature weights: {'acousticness': 1.0, 'energy': 0.95, 'tempo': 0.85, 'valence': 0.7, 'danceability': 0.6, 'loudness': 0.9, 'instrumentalness': 0.5}[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T12:13:02.815528Z[0m [[32m[1minfo     [0m] [1mPlaylist target: 18 tracks (min: 12, max: 25) - Specific mood requires focused, high-quality selection (niche mood may have limited matches)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T12:13:02.815586Z[0m [[32m[1minfo     [0m] [1mMood analysis completed (focused on audio features)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.mood_analyzer[0m][0m
[2m2025-11-11T12:13:02.815660Z[0m [[32m[1minfo     [0m] [1mAgent mood_analyzer completed execution in 5.401395s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
INFO:     127.0.0.1:42908 - "GET /api/auth/quota HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:13:04.052642Z[0m [[32m[1minfo     [0m] [1mAgent orchestrator starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:13:04.053092Z[0m [[32m[1minfo     [0m] [1mStarting orchestration for session ecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:13:04.053158Z[0m [[32m[1minfo     [0m] [1mInitial seed gathering...     [0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:13:04.053269Z[0m [[32m[1minfo     [0m] [1mAgent seed_gatherer starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:13:04.053347Z[0m [[32m[1minfo     [0m] [1mGathering seeds for user 1    [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T12:13:04.053437Z[0m [[32m[1minfo     [0m] [1mSelecting anchor tracks       [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
INFO:     127.0.0.1:42896 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:42908 - "GET /api/auth/quota HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:13:05.993800Z[0m [[32m[1minfo     [0m] [1mLLM found no specific tracks mentioned in prompt[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T12:13:05.994172Z[0m [[32m[1minfo     [0m] [1mFound 0 user-mentioned tracks as anchors[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:13:05.994340Z[0m [[32m[1minfo     [0m] [1mProcessing 8 artists for anchors: 0 user-mentioned + 8 others[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.994533Z[0m [[32m[1minfo     [0m] [1mSearching for 8 artists in parallel[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.994709Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Jo√£o Gilberto[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.994845Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Jo√£o Gilberto' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:05.996950Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Ant√¥nio Carlos Jobim[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.997042Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Ant√¥nio Carlos Jobim' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:05.997342Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Astrud Gilberto[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.997406Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Astrud Gilberto' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:05.997676Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Nick Drake[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.997735Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Nick Drake' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:05.997954Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Iron & Wine[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.998011Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Iron & Wine' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:05.998233Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Jos√© Gonz√°lez[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.998295Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Jos√© Gonz√°lez' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:05.998542Z[0m [[32m[1minfo     [0m] [1mSearching for artist: Sufjan Stevens[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.998605Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Sufjan Stevens' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:05.998838Z[0m [[32m[1minfo     [0m] [1mSearching for artist: The Milk Carton Kids[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:05.998901Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'The Milk Carton Kids' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:05.999120Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: acoustic[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:13:05.999213Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:acoustic' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:05.999497Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: bossa nova[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:13:05.999574Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:bossa nova' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:05.999774Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: indie folk[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:13:05.999830Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:indie folk' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.000027Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: acoustic pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:13:06.000099Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:acoustic pop' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.000296Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: soft rock[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:13:06.000351Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:soft rock' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.000656Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: lounge[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:13:06.000720Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:lounge' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.000920Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: chamber pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:13:06.000984Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:chamber pop' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.001190Z[0m [[32m[1minfo     [0m] [1mSearching anchor tracks for genre: MPB[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:13:06.001246Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:MPB' (limit: 15)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
INFO:     127.0.0.1:42896 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:13:06.582519Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Sufjan Stevens'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.583185Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Jo√£o Gilberto'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.595498Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Astrud Gilberto'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.603393Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:acoustic'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.604343Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Iron & Wine'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.626439Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'The Milk Carton Kids'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.643568Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Jos√© Gonz√°lez'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.644712Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:bossa nova'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.645644Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:indie folk'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.669550Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Ant√¥nio Carlos Jobim'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.673644Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:chamber pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.679528Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Nick Drake'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.679775Z[0m [[32m[1minfo     [0m] [1mFound 8 artists out of 8 searches[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:06.679840Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for 8 artists in parallel[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
[2m2025-11-11T12:13:06.680002Z[0m [[32m[1minfo     [0m] [1mGetting top tracks for artist 77ZUbcdoU5KCPHNUl8bgQy in market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.680470Z[0m [[32m[1minfo     [0m] [1mGetting top tracks for artist 3pO5VjZ4wOHCMBXOvbMISG in market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.680704Z[0m [[32m[1minfo     [0m] [1mGetting top tracks for artist 5rX2c1zow6hCph8PnnU3kF in market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.680919Z[0m [[32m[1minfo     [0m] [1mGetting top tracks for artist 5c3GLXai8YOMid29ZEuR9y in market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.681123Z[0m [[32m[1minfo     [0m] [1mGetting top tracks for artist 4M5nCE77Qaxayuhp3fVn4V in market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.681314Z[0m [[32m[1minfo     [0m] [1mGetting top tracks for artist 6xrCU6zdcSTsG2hLrojpmI in market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.681504Z[0m [[32m[1minfo     [0m] [1mGetting top tracks for artist 4MXUO7sVCaFgFjoTI5ox5c in market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.681701Z[0m [[32m[1minfo     [0m] [1mGetting top tracks for artist 7fxtWEwKKrFaykKItspdYg in market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:06.689677Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:MPB'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.725045Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:acoustic pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.801468Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:soft rock'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.810473Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 15 tracks for query 'genre:lounge'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:13:06.811235Z[0m [[32m[1minfo     [0m] [1mGetting 15 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:13:07.021446Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 top tracks for artist 77ZUbcdoU5KCPHNUl8bgQy using market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:07.023805Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 top tracks for artist 7fxtWEwKKrFaykKItspdYg using market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:07.037913Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 top tracks for artist 6xrCU6zdcSTsG2hLrojpmI using market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:07.038491Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 top tracks for artist 4MXUO7sVCaFgFjoTI5ox5c using market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:07.085348Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 top tracks for artist 5c3GLXai8YOMid29ZEuR9y using market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:07.086396Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 top tracks for artist 4M5nCE77Qaxayuhp3fVn4V using market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:07.095279Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 top tracks for artist 5rX2c1zow6hCph8PnnU3kF using market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:13:07.175610Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 top tracks for artist 3pO5VjZ4wOHCMBXOvbMISG using market US[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:13:07.176086Z[0m [[32m[1minfo     [0m] [1mCreated 24 anchor candidates from 8 artists[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.artist_processor[0m][0m
INFO:     127.0.0.1:42908 - "GET /api/auth/quota HTTP/1.1" 200 OK
[2m2025-11-11T12:13:08.162271Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 6 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:13:08.162746Z[0m [[32m[1minfo     [0m] [1mConverted 6/15 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{6}[0m
[2m2025-11-11T12:13:08.162845Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 6/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:13:08.162931Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 6 tracks (cached: 0) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:13:18.593885Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:13:22.301718Z[0m [[32m[1minfo     [0m] [1mWebSocket connection accepted [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:13:22.301880Z[0m [[32m[1minfo     [0m] [1mWebSocket auth attempt        [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36mcookies_keys[0m=[35m['session_token'][0m [36mhas_query_params[0m=[35mFalse[0m [36mhas_token[0m=[35mTrue[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:13:22.927034Z[0m [[32m[1minfo     [0m] [1mWebSocket authenticated successfully[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:13:22.927401Z[0m [[32m[1minfo     [0m] [1mWebSocket subscribed to state changes[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:42908 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:42908 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:42908 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:13:47.315199Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:13:47.838556Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 6/6 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:13:47.839443Z[0m [[32m[1minfo     [0m] [1mGetting 15 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:13:52.539739Z[0m [[32m[1minfo     [0m] [1mClient disconnected during message processing[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:42908 - "GET /api/auth/verify HTTP/1.1" 200 OK
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:13:53.777638Z[0m [[32m[1minfo     [0m] [1mWebSocket connection accepted [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:13:53.777788Z[0m [[32m[1minfo     [0m] [1mWebSocket auth attempt        [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36mcookies_keys[0m=[35m['session_token'][0m [36mhas_query_params[0m=[35mFalse[0m [36mhas_token[0m=[35mTrue[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:13:54.660800Z[0m [[32m[1minfo     [0m] [1mWebSocket authenticated successfully[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:13:54.661543Z[0m [[32m[1minfo     [0m] [1mWebSocket subscribed to state changes[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:55174 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:42908 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:42908 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:42908 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:14:06.233950Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:14:06.234658Z[0m [[32m[1minfo     [0m] [1mConverted 2/15 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T12:14:06.234755Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:14:06.234858Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 0) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:14:18.797361Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:14:43.780507Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:14:54.974474Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:14:54.974825Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:15:04.742239Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 1.0s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:15:08.697335Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:15:14.350733Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m68.114811[0m [36mendpoint[0m=[35m/v1/track/a8c24703-14d9-46b7-8596-f689c46a4320/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T12:15:14.789600Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_track_audio_features, retrying in 1.0s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:15:19.232804Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m72.997514[0m [36mendpoint[0m=[35m/v1/track/439a49ba-ad60-4552-a9af-535f8cb7aa48/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T12:15:19.233312Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:15:19.233792Z[0m [[32m[1minfo     [0m] [1mGetting 15 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:15:21.688849Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 15 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:15:21.689173Z[0m [[32m[1minfo     [0m] [1mConverted 15/15 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{15}[0m
[2m2025-11-11T12:15:21.689247Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 15/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:15:21.689319Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 15 tracks (cached: 0) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:15:34.124493Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:15:59.127008Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:16:13.560216Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m46.771105[0m [36mendpoint[0m=[35m/v1/track/22d31b36-9ad2-4298-819e-c2c98be73ee7/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T12:16:24.121302Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:16:31.734205Z[0m [[32m[1minfo     [0m] [1mClient disconnected during message processing[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:54342 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:16:33.096087Z[0m [[32m[1minfo     [0m] [1mWebSocket connection accepted [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:16:33.096249Z[0m [[32m[1minfo     [0m] [1mWebSocket auth attempt        [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36mcookies_keys[0m=[35m['session_token'][0m [36mhas_query_params[0m=[35mFalse[0m [36mhas_token[0m=[35mTrue[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:54326 - "GET /api/auth/verify HTTP/1.1" 200 OK
[2m2025-11-11T12:16:34.464389Z[0m [[32m[1minfo     [0m] [1mWebSocket authenticated successfully[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:16:34.464896Z[0m [[32m[1minfo     [0m] [1mWebSocket subscribed to state changes[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:54342 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:54356 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:54356 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:54356 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:16:40.548945Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 15/15 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:16:40.549623Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m6.7%[0m [36mtotal_requested[0m=[35m15[0m
[2m2025-11-11T12:16:40.549897Z[0m [[32m[1minfo     [0m] [1mGetting 14 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:16:45.471209Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 5 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:16:45.471531Z[0m [[32m[1minfo     [0m] [1mConverted 6/15 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{5}[0m
[2m2025-11-11T12:16:45.471611Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 6/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:16:45.471687Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 5 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:16:56.927707Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 5/5 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:16:56.928449Z[0m [[32m[1minfo     [0m] [1mGetting 15 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:16:58.131121Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:17:00.757630Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 6 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:17:00.758402Z[0m [[32m[1minfo     [0m] [1mConverted 6/15 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{6}[0m
[2m2025-11-11T12:17:00.758527Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 6/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:00.758640Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 6 tracks (cached: 0) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:23.849050Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:17:27.433702Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 6/6 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:27.434362Z[0m [[32m[1minfo     [0m] [1mGetting 15 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:17:27.575153Z[0m [[31m[1merror    [0m] [1mAll 3 attempts failed for get_multiple_tracks when calling get_multiple_tracks[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:17:27.575409Z[0m [[31m[1merror    [0m] [1mError getting multiple tracks: Unexpected error: [0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
Traceback (most recent call last):
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/reccobeat/track_info.py", line 58, in _run
    response_data = await self._make_request(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 499, in _make_request
    return await self._make_request_internal(method, endpoint, params, json_data, headers, use_cache, cache_ttl)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 563, in _make_request_internal
    response = await super()._make_request(method, endpoint, formatted_params, json_data, headers, use_cache=False, cache_ttl=cache_ttl)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 376, in _make_request
    response = await self._execute_with_retry(_request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 319, in _execute_with_retry
    raise last_exception or APIError("Unknown error occurred")
app.agents.tools.agent_tools.APIError: Unexpected error: 
[2m2025-11-11T12:17:27.576419Z[0m [[32m[1minfo     [0m] [1mGetting 15 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:17:29.303644Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:17:29.304083Z[0m [[32m[1minfo     [0m] [1mConverted 10/15 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{10}[0m
[2m2025-11-11T12:17:29.304191Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 10/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:29.304288Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 10 tracks (cached: 0) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:39.128728Z[0m [[31m[1merror    [0m] [1mAll 3 attempts failed for get_track_audio_features when calling get_track_audio_features[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:17:39.129077Z[0m [[31m[1merror    [0m] [1mError getting track audio features: Unexpected error: [0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
Traceback (most recent call last):
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/reccobeat/track_info.py", line 167, in _run
    response_data = await self._make_request(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 499, in _make_request
    return await self._make_request_internal(method, endpoint, params, json_data, headers, use_cache, cache_ttl)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 563, in _make_request_internal
    response = await super()._make_request(method, endpoint, formatted_params, json_data, headers, use_cache=False, cache_ttl=cache_ttl)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 376, in _make_request
    response = await self._execute_with_retry(_request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 319, in _execute_with_retry
    raise last_exception or APIError("Unknown error occurred")
app.agents.tools.agent_tools.APIError: Unexpected error: 
[2m2025-11-11T12:17:39.129623Z[0m [[33m[1mwarning  [0m] [1mFailed to get features for track de650cab-76b7-434f-9147-6fc9e4855695: Failed to get track audio features: Unexpected error: [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:39.129761Z[0m [[31m[1merror    [0m] [1mAll 3 attempts failed for get_track_audio_features when calling get_track_audio_features[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:17:39.129836Z[0m [[31m[1merror    [0m] [1mError getting track audio features: Unexpected error: [0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
Traceback (most recent call last):
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/reccobeat/track_info.py", line 167, in _run
    response_data = await self._make_request(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 499, in _make_request
    return await self._make_request_internal(method, endpoint, params, json_data, headers, use_cache, cache_ttl)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 563, in _make_request_internal
    response = await super()._make_request(method, endpoint, formatted_params, json_data, headers, use_cache=False, cache_ttl=cache_ttl)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 376, in _make_request
    response = await self._execute_with_retry(_request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 319, in _execute_with_retry
    raise last_exception or APIError("Unknown error occurred")
app.agents.tools.agent_tools.APIError: Unexpected error: 
[2m2025-11-11T12:17:39.130105Z[0m [[33m[1mwarning  [0m] [1mFailed to get features for track a2dfed25-cc9f-4f56-8b5b-e573250660c7: Failed to get track audio features: Unexpected error: [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:38.899644Z[0m [[32m[1minfo     [0m] [1mClient disconnected during message processing[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:54356 - "GET /api/auth/verify HTTP/1.1" 200 OK
INFO:     127.0.0.1:54342 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:17:40.890699Z[0m [[32m[1minfo     [0m] [1mWebSocket connection accepted [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:17:40.890900Z[0m [[32m[1minfo     [0m] [1mWebSocket auth attempt        [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36mcookies_keys[0m=[35m['session_token'][0m [36mhas_query_params[0m=[35mFalse[0m [36mhas_token[0m=[35mTrue[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:17:41.255540Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 8/10 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:41.256121Z[0m [[32m[1minfo     [0m] [1mGetting 15 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:17:41.373276Z[0m [[33m[1mwarning  [0m] [1mInvalid session token for WebSocket[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:17:41.493262Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 5 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:17:41.494012Z[0m [[32m[1minfo     [0m] [1mConverted 5/15 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{5}[0m
[2m2025-11-11T12:17:41.494143Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 5/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:41.494260Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 5 tracks (cached: 0) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
INFO:     127.0.0.1:54342 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:54356 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:54356 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:17:47.211346Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 5/5 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:47.211854Z[0m [[32m[1minfo     [0m] [1mGetting 15 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:17:47.511758Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 10 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:17:47.512646Z[0m [[32m[1minfo     [0m] [1mConverted 10/15 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{10}[0m
[2m2025-11-11T12:17:47.512853Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 10/15 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:17:47.512992Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 10 tracks (cached: 0) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
INFO:     127.0.0.1:58888 - "OPTIONS /api/auth/logout HTTP/1.1" 200 OK
INFO:     127.0.0.1:54356 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:17:50.609883Z[0m [[32m[1minfo     [0m] [1mWebSocket connection accepted [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:17:50.610149Z[0m [[32m[1minfo     [0m] [1mWebSocket auth attempt        [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36mcookies_keys[0m=[35m['session_token'][0m [36mhas_query_params[0m=[35mFalse[0m [36mhas_token[0m=[35mTrue[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:17:51.434458Z[0m [[33m[1mwarning  [0m] [1mInvalid session token for WebSocket[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:54342 - "POST /api/auth/logout HTTP/1.1" 401 Unauthorized
INFO:     127.0.0.1:54356 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:58892 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:58888 - "OPTIONS /api/spotify/token?code=AQD2bECUb92e0YLPYuzm8LqrmJcdgYiN-cP34Q3I3eavTfVZfu4fLCH6wTfD1FDNXnVTLFFFzReZgz4xg_HT8Qyh2lwgGxHR0I1oeAIoTLkm-XQBbLdOnDfU0Mjstx3y17DEXw9k4MoLRvUgNrXaRBRMw6UPyioS3z6NxYk4ZL8K3LhziPBQpUgTlckxrwh-Ii9zse7C6VcENayCgYy2Bny4fg6twHKRdnD-HehJyLw6T2zQzc3FD2V9QAIvfLXmyWgI5qkEmx-iBv3QvSfDEwByMWL2nRInTuiSh2AzINff6Emnz108qLgvdCMJZTsPcxe2aHJti6v8DV3Qc8vD3JBlf98kbmTLCNLjGxA5Yg HTTP/1.1" 200 OK
[2m2025-11-11T12:17:54.756665Z[0m [[32m[1minfo     [0m] [1mExchanging authorization code for tokens[0m [[0m[1m[34mapp.spotify.routes[0m][0m
[2m2025-11-11T12:17:54.966211Z[0m [[32m[1minfo     [0m] [1mToken exchange successful     [0m [[0m[1m[34mapp.spotify.routes[0m][0m
INFO:     127.0.0.1:54356 - "GET /api/auth/verify HTTP/1.1" 200 OK
INFO:     127.0.0.1:54342 - "POST /api/spotify/token?code=AQD2bECUb92e0YLPYuzm8LqrmJcdgYiN-cP34Q3I3eavTfVZfu4fLCH6wTfD1FDNXnVTLFFFzReZgz4xg_HT8Qyh2lwgGxHR0I1oeAIoTLkm-XQBbLdOnDfU0Mjstx3y17DEXw9k4MoLRvUgNrXaRBRMw6UPyioS3z6NxYk4ZL8K3LhziPBQpUgTlckxrwh-Ii9zse7C6VcENayCgYy2Bny4fg6twHKRdnD-HehJyLw6T2zQzc3FD2V9QAIvfLXmyWgI5qkEmx-iBv3QvSfDEwByMWL2nRInTuiSh2AzINff6Emnz108qLgvdCMJZTsPcxe2aHJti6v8DV3Qc8vD3JBlf98kbmTLCNLjGxA5Yg HTTP/1.1" 200 OK
[2m2025-11-11T12:17:56.616574Z[0m [[32m[1minfo     [0m] [1mLogin attempt                 [0m [[0m[1m[34mapp.services.auth_service[0m][0m [36mip[0m=[35m127.0.0.1[0m [36mservice[0m=[35mAuthService[0m
[2m2025-11-11T12:17:57.581652Z[0m [[32m[1minfo     [0m] [1mUser upserted successfully    [0m [[0m[1m[34mapp.repositories.base_repository[0m][0m [36mrepository[0m=[35mUserRepository[0m [36mspotify_id[0m=[35m085692333065[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:18:04.102831Z[0m [[32m[1minfo     [0m] [1mSession replaced atomically   [0m [[0m[1m[34mapp.repositories.base_repository[0m][0m [36mdeleted_count[0m=[35m1[0m [36mnew_session_id[0m=[35m192[0m [36mrepository[0m=[35mSessionRepository[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:18:04.201941Z[0m [[32m[1minfo     [0m] [1mLogin successful              [0m [[0m[1m[34mapp.services.auth_service[0m][0m [36mdb_duration_ms[0m=[35m703.7954330444336[0m [36mservice[0m=[35mAuthService[0m [36mspotify_duration_ms[0m=[35m359.99488830566406[0m [36mspotify_id[0m=[35m085692333065[0m [36mtotal_duration_ms[0m=[35m7585.352182388306[0m [36muser_id[0m=[35m1[0m
INFO:     127.0.0.1:54342 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:55994 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:54356 - "GET /api/stats/public HTTP/1.1" 200 OK
INFO:     127.0.0.1:54342 - "GET /api/auth/verify HTTP/1.1" 200 OK
INFO:     127.0.0.1:55994 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:54342 - "GET /api/auth/verify HTTP/1.1" 200 OK
INFO:     127.0.0.1:55994 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:18:09.420396Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 10/10 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:18:09.420905Z[0m [[32m[1minfo     [0m] [1mFound 24 artist-based track candidates from 15 artists[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:18:09.420974Z[0m [[32m[1minfo     [0m] [1mFound 120 genre-based track candidates[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:18:09.421174Z[0m [[32m[1minfo     [0m] [1mBatch fetching audio features for 143 tracks from all sources[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:18:09.421454Z[0m [[32m[1minfo     [0m] [1mRetrieved 59 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m41.3%[0m [36mtotal_requested[0m=[35m143[0m
[2m2025-11-11T12:18:09.421639Z[0m [[32m[1minfo     [0m] [1mSkipped 60 known-missing IDs  [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m71.4%[0m [36mtotal_ids[0m=[35m84[0m
[2m2025-11-11T12:18:09.421748Z[0m [[32m[1minfo     [0m] [1mGetting 24 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:18:10.635253Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 24 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:18:10.636009Z[0m [[32m[1minfo     [0m] [1mConverted 83/143 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{59}[0m [36mknown_missing[0m=[35m{60}[0m [36mnewly_converted[0m=[35m{24}[0m
[2m2025-11-11T12:18:10.636134Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 83/143 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:18:10.636735Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 26 tracks (cached: 57) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
INFO:     127.0.0.1:55994 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55994 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55994 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:55994 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
[2m2025-11-11T12:18:24.425101Z[0m [[32m[1minfo     [0m] [1mWebSocket connection accepted [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:18:24.425228Z[0m [[32m[1minfo     [0m] [1mWebSocket auth attempt        [0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36mcookies_keys[0m=[35m['session_token'][0m [36mhas_query_params[0m=[35mFalse[0m [36mhas_token[0m=[35mTrue[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:18:25.248150Z[0m [[32m[1minfo     [0m] [1mWebSocket authenticated successfully[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_auth[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36muser_id[0m=[35m1[0m
[2m2025-11-11T12:18:25.248826Z[0m [[32m[1minfo     [0m] [1mWebSocket subscribed to state changes[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:55994 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:54342 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:54342 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:54342 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:18:46.748256Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m36.111127[0m [36mendpoint[0m=[35m/v1/track/25118692-a1f7-4242-8adb-e30cce95f872/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T12:18:46.807555Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m20.507544[0m [36mendpoint[0m=[35m/v1/track/d4c10731-ef13-4e90-b9bb-18ac051ca428/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T12:18:49.427594Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:19:15.130463Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:19:39.348504Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:19:40.743152Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m21.727792[0m [36mendpoint[0m=[35m/v1/track/67539d21-2ea8-45ef-ae75-1f2b4b7f71d1/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T12:19:40.743834Z[0m [[33m[1mwarning  [0m] [1mSlow RecoBeat API request detected[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m21.729248[0m [36mendpoint[0m=[35m/v1/track/203d4640-98cb-42e9-96e8-c04a28ecf11f/audio-features[0m [36mparams[0m=[35mNone[0m [36mtool[0m=[35mget_track_audio_features[0m
[2m2025-11-11T12:19:54.067081Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 26/26 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:19:54.067396Z[0m [[32m[1minfo     [0m] [1mSuccessfully attached audio features to 84 candidates[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:19:58.436221Z[0m [[32m[1minfo     [0m] [1mLLM track filtering: kept 20/144 tracks (0 protected from filtering)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T12:20:03.452325Z[0m [[32m[1minfo     [0m] [1mLLM determined anchor selection strategy[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T12:20:05.101422Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:08.758854Z[0m [[32m[1minfo     [0m] [1mLLM scored 7 anchor candidates[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T12:20:08.759081Z[0m [[32m[1minfo     [0m] [1m‚úì Guaranteed inclusion of 0 user-mentioned tracks[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T12:20:12.923245Z[0m [[32m[1minfo     [0m] [1m‚úì LLM selected 5 additional anchor tracks: Since all provided candidates share the identical score (0.80) and lack identifying metadata, the first 5 tracks were selected arbitrarily to meet the target count of 5 anchors. These selections are intended to represent the core mood context: relaxed, warm, Bossa Nova-influenced acoustic/mellow indie folk.[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T12:20:12.923458Z[0m [[32m[1minfo     [0m] [1mFinal anchor selection: 0 user-mentioned + 5 LLM-selected = 5 total[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.llm_services[0m][0m
[2m2025-11-11T12:20:12.923536Z[0m [[32m[1minfo     [0m] [1mLLM-selected 5 anchor tracks from 144 candidates[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.anchor_selection.selection_engine[0m][0m
[2m2025-11-11T12:20:12.923995Z[0m [[32m[1minfo     [0m] [1mCached 5 anchor tracks        [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T12:20:12.924062Z[0m [[32m[1minfo     [0m] [1m‚úì Selected 5 anchor tracks    [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T12:20:12.924100Z[0m [[32m[1minfo     [0m] [1mDiscovering artists           [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T12:20:12.924172Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_discovering_artists[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T12:20:12.924250Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:12.924336Z[0m [[32m[1minfo     [0m] [1mStarting artist discovery for mood[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.924367Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Jo√£o Gilberto[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.924406Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Jo√£o Gilberto' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.924514Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Jo√£o Gilberto'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.924575Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Ant√¥nio Carlos Jobim[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.924613Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Ant√¥nio Carlos Jobim' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.924679Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Ant√¥nio Carlos Jobim'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.924705Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Astrud Gilberto[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.924724Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Astrud Gilberto' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.924773Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Astrud Gilberto'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.924804Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Nick Drake[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.924833Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Nick Drake' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.924865Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Nick Drake'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.924902Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Iron & Wine[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.925211Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Iron & Wine' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.925280Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Iron & Wine'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.925337Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Jos√© Gonz√°lez[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.925379Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Jos√© Gonz√°lez' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.925439Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Jos√© Gonz√°lez'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.925495Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: Sufjan Stevens[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.925524Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'Sufjan Stevens' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.925566Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'Sufjan Stevens'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.925590Z[0m [[32m[1minfo     [0m] [1mSearching for LLM-suggested artist: The Milk Carton Kids[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.925611Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'The Milk Carton Kids' (limit: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.925647Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 3 artists for query 'The Milk Carton Kids'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.925686Z[0m [[32m[1minfo     [0m] [1mFound 24 artists from LLM suggestions[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.925816Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: bossa nova[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.925873Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:bossa nova' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.926406Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: indie folk[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.926473Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:indie folk' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.926719Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: acoustic pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.926780Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:acoustic pop' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.926970Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: soft rock[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.927020Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:soft rock' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.927195Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: lounge[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.927243Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:lounge' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.927415Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: chamber pop[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.927464Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:chamber pop' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.927636Z[0m [[32m[1minfo     [0m] [1mSearching artists for genre: MPB[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:12.927683Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for artists: 'genre:MPB' (limit: 40)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:12.928110Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:12.928183Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:12.928230Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_discovering_artists[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_selecting_anchors[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:12.928294Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_discovering_artists[0m
Future exception was never retrieved
future: <Future finished exception=APIError('Unexpected error: ')>
Traceback (most recent call last):
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/reccobeat/track_info.py", line 58, in _run
    response_data = await self._make_request(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 499, in _make_request
    return await self._make_request_internal(method, endpoint, params, json_data, headers, use_cache, cache_ttl)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 563, in _make_request_internal
    response = await super()._make_request(method, endpoint, formatted_params, json_data, headers, use_cache=False, cache_ttl=cache_ttl)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 376, in _make_request
    response = await self._execute_with_retry(_request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 319, in _execute_with_retry
    raise last_exception or APIError("Unknown error occurred")
app.agents.tools.agent_tools.APIError: Unexpected error: 
Future exception was never retrieved
future: <Future finished exception=APIError('Unexpected error: ')>
Traceback (most recent call last):
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/reccobeat/track_info.py", line 167, in _run
    response_data = await self._make_request(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 499, in _make_request
    return await self._make_request_internal(method, endpoint, params, json_data, headers, use_cache, cache_ttl)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 563, in _make_request_internal
    response = await super()._make_request(method, endpoint, formatted_params, json_data, headers, use_cache=False, cache_ttl=cache_ttl)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 376, in _make_request
    response = await self._execute_with_retry(_request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 319, in _execute_with_retry
    raise last_exception or APIError("Unknown error occurred")
app.agents.tools.agent_tools.APIError: Unexpected error: 
Future exception was never retrieved
future: <Future finished exception=APIError('Unexpected error: ')>
Traceback (most recent call last):
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/reccobeat/track_info.py", line 167, in _run
    response_data = await self._make_request(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 499, in _make_request
    return await self._make_request_internal(method, endpoint, params, json_data, headers, use_cache, cache_ttl)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 563, in _make_request_internal
    response = await super()._make_request(method, endpoint, formatted_params, json_data, headers, use_cache=False, cache_ttl=cache_ttl)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 376, in _make_request
    response = await self._execute_with_retry(_request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dennis/projects/funsies/moodlist/backend/app/agents/tools/agent_tools.py", line 319, in _execute_with_retry
    raise last_exception or APIError("Unknown error occurred")
app.agents.tools.agent_tools.APIError: Unexpected error: 
[2m2025-11-11T12:20:19.463203Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 0 artists for query 'genre:MPB'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:19.463380Z[0m [[32m[1minfo     [0m] [1mFound 0 artists for genre: MPB[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:19.463429Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:MPB' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:19.463907Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 0 artists for query 'genre:bossa nova'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:19.463972Z[0m [[32m[1minfo     [0m] [1mFound 0 artists for genre: bossa nova[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:19.464005Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:bossa nova' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:13.409747Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 0 artists for query 'genre:chamber pop'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:13.409926Z[0m [[32m[1minfo     [0m] [1mFound 0 artists for genre: chamber pop[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:13.409975Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:chamber pop' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:13.410702Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 0 artists for query 'genre:acoustic pop'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:13.410783Z[0m [[32m[1minfo     [0m] [1mFound 0 artists for genre: acoustic pop[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:13.410822Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:acoustic pop' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:13.432717Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 0 artists for query 'genre:soft rock'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:13.432959Z[0m [[32m[1minfo     [0m] [1mFound 0 artists for genre: soft rock[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:13.433037Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:soft rock' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:13.480722Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 40 artists for query 'genre:indie folk'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:13.480897Z[0m [[32m[1minfo     [0m] [1mFound 40 artists for genre: indie folk[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:13.480942Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:indie folk' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:13.547932Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 7 artists for query 'genre:lounge'[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:13.548106Z[0m [[32m[1minfo     [0m] [1mFound 7 artists for genre: lounge[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:13.548153Z[0m [[32m[1minfo     [0m] [1mSearching Spotify for tracks: 'genre:lounge' (limit: 30)[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:13.892350Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:MPB'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:13.893182Z[0m [[32m[1minfo     [0m] [1mExtracted 18 unique artists from 30 tracks for query 'genre:MPB'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:14.017709Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:bossa nova'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:14.018075Z[0m [[32m[1minfo     [0m] [1mExtracted 6 unique artists from 30 tracks for query 'genre:bossa nova'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:14.019509Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:indie folk'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:14.019698Z[0m [[32m[1minfo     [0m] [1mExtracted 20 unique artists from 30 tracks for query 'genre:indie folk'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:14.089098Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:soft rock'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:14.089563Z[0m [[32m[1minfo     [0m] [1mExtracted 18 unique artists from 30 tracks for query 'genre:soft rock'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:14.091153Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:acoustic pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:14.091506Z[0m [[32m[1minfo     [0m] [1mExtracted 11 unique artists from 30 tracks for query 'genre:acoustic pop'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:14.155833Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:chamber pop'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:14.156278Z[0m [[32m[1minfo     [0m] [1mExtracted 13 unique artists from 30 tracks for query 'genre:chamber pop'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:14.159431Z[0m [[32m[1minfo     [0m] [1mSuccessfully found 30 tracks for query 'genre:lounge'[0m [[0m[1m[34mapp.agents.tools.spotify.track_search[0m][0m
[2m2025-11-11T12:20:14.160045Z[0m [[32m[1minfo     [0m] [1mExtracted 25 unique artists from 30 tracks for query 'genre:lounge'[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:14.160266Z[0m [[32m[1minfo     [0m] [1mFound 158 artists from genre search[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:14.160423Z[0m [[32m[1minfo     [0m] [1mFound 173 unique artists from search[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:14.160882Z[0m [[32m[1minfo     [0m] [1mHeuristic pruning: 173 ‚Üí 30 artists (filtered 143 low-quality/irrelevant)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:14.160933Z[0m [[32m[1minfo     [0m] [1mAfter heuristic pruning: 30 artists (from 173)[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
INFO:     127.0.0.1:55964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:20:29.434462Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m6[0m [36martist_name[0m=[35m'Arijit Singh'[0m [36mreason[0m=[35m'Genre (Hindi Pop/Bollywood) and cultural context do not align with the requested Bossa Nova/Mellow Indie Folk caf√© atmosphere.'[0m
[2m2025-11-11T12:20:29.434830Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m7[0m [36martist_name[0m=[35mHindia[0m [36mreason[0m=[35m'Indonesian Indie Pop/Rock style is not aligned with the requested Bossa Nova/Mellow Indie Folk aesthetic.'[0m
[2m2025-11-11T12:20:29.434872Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m8[0m [36martist_name[0m=[35m'John Mayer'[0m [36mreason[0m=[35m"While Singer-Songwriter, his style often leans toward blues/pop-rock which might be too energetic for the 'laid-back, cozy caf√©' requirement, though he is borderline."[0m
[2m2025-11-11T12:20:29.434905Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m9[0m [36martist_name[0m=[35m.Feast[0m [36mreason[0m=[35m'Indonesian Indie Rock/Pop style does not fit the gentle acoustic/bossa nova requirement.'[0m
[2m2025-11-11T12:20:29.434932Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m10[0m [36martist_name[0m=[35mTulus[0m [36mreason[0m=[35m'Indonesian Pop/Jazz style is not the specific Bossa Nova/Mellow Indie Folk requested.'[0m
[2m2025-11-11T12:20:29.434954Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m11[0m [36martist_name[0m=[35m'Nadin Amizah'[0m [36mreason[0m=[35m'Indonesian Indie Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.434975Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m12[0m [36martist_name[0m=[35m'Juicy Luicy'[0m [36mreason[0m=[35m'Indonesian Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.434998Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m13[0m [36martist_name[0m=[35mPamungkas[0m [36mreason[0m=[35m'Indonesian Indie Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.435017Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m14[0m [36martist_name[0m=[35m'Novo Amor'[0m [36mreason[0m=[35m'Ambient Folk is generally too atmospheric and less rhythmically focused than the requested Bossa Nova/Mellow Indie Folk blend, though close in mood.'[0m
[2m2025-11-11T12:20:29.435042Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m16[0m [36martist_name[0m=[35mBernadya[0m [36mreason[0m=[35m'Indonesian Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.435060Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m17[0m [36martist_name[0m=[35m'Sal Priadi'[0m [36mreason[0m=[35m'Indonesian Indie Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.435078Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m18[0m [36martist_name[0m=[35m'Raim Laode'[0m [36mreason[0m=[35m'Indonesian Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.435095Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m19[0m [36martist_name[0m=[35mPerunggu[0m [36mreason[0m=[35m'Indonesian Indie Rock style is too energetic for a cozy caf√© reading atmosphere.'[0m
[2m2025-11-11T12:20:29.435114Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m20[0m [36martist_name[0m=[35m'Elliott Smith'[0m [36mreason[0m=[35m"While acoustic, Elliott Smith's style is often melancholic and intense, contrasting with the 'cozy caf√©' and 'laid-back' requirement."[0m
[2m2025-11-11T12:20:29.435151Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m21[0m [36martist_name[0m=[35m'Fiersa Besari'[0m [36mreason[0m=[35m'Indonesian Indie Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.435199Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m22[0m [36martist_name[0m=[35m'Batas Senja'[0m [36mreason[0m=[35m'Indonesian Indie Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.435232Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m23[0m [36martist_name[0m=[35m'Budi Doremi'[0m [36mreason[0m=[35m'Indonesian Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.435255Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m24[0m [36martist_name[0m=[35m'Reality Club'[0m [36mreason[0m=[35m'Indonesian Indie style often leans towards indie rock/pop which is generally too upbeat for this specific request.'[0m
[2m2025-11-11T12:20:29.435277Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m25[0m [36martist_name[0m=[35m'Payung Teduh'[0m [36mreason[0m=[35m'Indonesian Indie Jazz/Pop style is not the specific Bossa Nova/Mellow Indie Folk requested.'[0m
[2m2025-11-11T12:20:29.435297Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m26[0m [36martist_name[0m=[35mBarasuara[0m [36mreason[0m=[35m'Indonesian Indie Rock style is too energetic for a cozy caf√© reading atmosphere.'[0m
[2m2025-11-11T12:20:29.435317Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m27[0m [36martist_name[0m=[35mIdgitaf[0m [36mreason[0m=[35m'Indonesian Indie Pop style is not aligned with the requested genres.'[0m
[2m2025-11-11T12:20:29.435335Z[0m [[32m[1minfo     [0m] [1mLLM filtered artist           [0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m [36martist_index[0m=[35m28[0m [36martist_name[0m=[35m'Yura Yunita'[0m [36mreason[0m=[35m'Indonesian Pop/Jazz style is not the specific Bossa Nova/Mellow Indie Folk requested.'[0m
[2m2025-11-11T12:20:29.435357Z[0m [[32m[1minfo     [0m] [1mLLM batch validation: kept 7/30 artists[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:29.435397Z[0m [[32m[1minfo     [0m] [1mAfter LLM batch validation: 7 artists[0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:29.435432Z[0m [[32m[1minfo     [0m] [1mDiscovered 7 mood-matched artists: ['Ant√¥nio Carlos Jobim', 'Jos√© Gonz√°lez', 'Jo√£o Gilberto', 'Iron & Wine', 'Astrud Gilberto'][0m [[0m[1m[34mapp.agents.recommender.mood_analyzer.discovery.artist_discovery[0m][0m
[2m2025-11-11T12:20:29.435586Z[0m [[32m[1minfo     [0m] [1m‚úì Discovered 7 artists        [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T12:20:29.435695Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_fetching_top_tracks[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T12:20:29.435775Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:29.435882Z[0m [[32m[1minfo     [0m] [1mGetting top 20 tracks for user (time_range: medium_term)[0m [[0m[1m[34mapp.agents.tools.spotify.user_data[0m][0m
[2m2025-11-11T12:20:29.436537Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:29.436604Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:29.436644Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_fetching_top_tracks[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_discovering_artists[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:29.436688Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_fetching_top_tracks[0m
[2m2025-11-11T12:20:23.694314Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 20 top tracks[0m [[0m[1m[34mapp.agents.tools.spotify.user_data[0m][0m
[2m2025-11-11T12:20:23.694587Z[0m [[32m[1minfo     [0m] [1mCached top tracks for user 1  [0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:23.694693Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_fetching_top_artists[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T12:20:23.694761Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.694829Z[0m [[32m[1minfo     [0m] [1mGetting top 15 artists for user (time_range: medium_term)[0m [[0m[1m[34mapp.agents.tools.spotify.user_data[0m][0m
[2m2025-11-11T12:20:23.695371Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.695437Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.695475Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_fetching_top_artists[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_fetching_top_tracks[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.695519Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_fetching_top_artists[0m
[2m2025-11-11T12:20:23.965110Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 15 top artists[0m [[0m[1m[34mapp.agents.tools.spotify.user_data[0m][0m
[2m2025-11-11T12:20:23.965333Z[0m [[32m[1minfo     [0m] [1mCached top artists for user 1 [0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:23.965389Z[0m [[32m[1minfo     [0m] [1mBuilding seed pool            [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T12:20:23.965469Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_building_pool[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T12:20:23.965555Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.965595Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_analyzing_features[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T12:20:23.965637Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.965722Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 20 tracks[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.audio_enricher[0m][0m
[2m2025-11-11T12:20:23.965898Z[0m [[32m[1minfo     [0m] [1mGetting 20 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:23.966621Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.966691Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.966730Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_analyzing_features[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_fetching_top_artists[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.966790Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_analyzing_features[0m
[2m2025-11-11T12:20:23.967134Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:23.967207Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:24.896747Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 19 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:24.897108Z[0m [[32m[1minfo     [0m] [1mConverted 19/20 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{19}[0m
[2m2025-11-11T12:20:24.897174Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 19/20 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:24.897241Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 19 tracks (cached: 0) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
INFO:     127.0.0.1:55964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:55964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:20:30.113398Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:55964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:20:42.108881Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 19/19 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:42.109172Z[0m [[32m[1minfo     [0m] [1mSuccessfully enriched 19 tracks with audio features[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.audio_enricher[0m][0m
[2m2025-11-11T12:20:42.109308Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgathering_seeds_selecting_seeds[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m
[2m2025-11-11T12:20:42.109410Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:42.109710Z[0m [[32m[1minfo     [0m] [1mScored 20 tracks, top score: 0.94[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_selector[0m][0m
[2m2025-11-11T12:20:42.109788Z[0m [[32m[1minfo     [0m] [1mLLM selecting seeds from 12 candidates for mood: 'Laid-back acoustic, bossa nova, and mellow indie folk creating a cozy caf√© atmosphere perfect for reading or chatting'[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.llm_seed_selector[0m][0m
[2m2025-11-11T12:20:42.111701Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:42.111815Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:42.111864Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgathering_seeds[0m [36mnew_step[0m=[35mgathering_seeds_selecting_seeds[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_analyzing_features[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:42.111937Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgathering_seeds[0m [36mstep[0m=[35mgathering_seeds_selecting_seeds[0m
INFO:     127.0.0.1:55964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:20:45.169875Z[0m [[32m[1minfo     [0m] [1mLLM selected 6 seeds: I selected the top 6 tracks based on the initial ranking (1, 3, 5, 7, 9, 11) as they are the strongest exemplars of the 'Laid-back acoustic, bossa nova, and mellow indie folk' mood. Since the tracks are already ranked by match quality, prioritizing the highest-ranked ones ensures the core sonic profile is established, while the inherent variety within the top tier of a well-curated list should provide sufficient diversity for seeding.[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.llm_seed_selector[0m][0m
[2m2025-11-11T12:20:45.170245Z[0m [[32m[1minfo     [0m] [1mSelected 6 seeds for target of 18 tracks (ratio: 1:3)[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T12:20:45.170421Z[0m [[32m[1minfo     [0m] [1m‚úì Built seed pool: 6 seeds, 0 user-mentioned, 5 anchors, 7 artists[0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m
[2m2025-11-11T12:20:45.170543Z[0m [[32m[1minfo     [0m] [1mSeed gathering completed      [0m [[0m[1m[34mapp.agents.recommender.seed_gatherer.seed_gatherer_agent[0m][0m [36mbuild_seed_pool_seconds[0m=[35m21.21[0m [36mdiscover_artists_seconds[0m=[35m16.51[0m [36mfetch_top_artists_seconds[0m=[35m0.27[0m [36mfetch_top_tracks_seconds[0m=[35m-5.74[0m [36msearch_user_tracks_seconds[0m=[35m0.00[0m [36mselect_anchors_seconds[0m=[35m428.87[0m [36mtotal_time_seconds[0m=[35m461.12[0m
[2m2025-11-11T12:20:45.170671Z[0m [[32m[1minfo     [0m] [1mAgent seed_gatherer completed execution in 461.117325s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:20:45.170745Z[0m [[32m[1minfo     [0m] [1mInitial recommendation generation...[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:20:45.170868Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T12:20:45.170958Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:45.171023Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:20:45.171137Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations for mood: Laid-back acoustic, bossa nova, and mellow indie folk creating a cozy caf√© atmosphere perfect for reading or chatting[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T12:20:45.171210Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T12:20:45.171262Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:45.171344Z[0m [[32m[1minfo     [0m] [1mSplit WITHOUT user mentions: 9 artists, 6 seeds (total: 18)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T12:20:45.171394Z[0m [[32m[1minfo     [0m] [1mExecuting recommendation strategies in parallel[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T12:20:45.178093Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations from 7 discovered artists[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:20:45.178926Z[0m [[32m[1minfo     [0m] [1mCache miss for recommendations, fetching from API[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:45.179070Z[0m [[32m[1minfo     [0m] [1mGetting 8 recommendations for 3 seeds[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:20:45.179152Z[0m [[32m[1minfo     [0m] [1mCache miss for recommendations, fetching from API[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:45.179212Z[0m [[32m[1minfo     [0m] [1mGetting 8 recommendations for 3 seeds[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:20:45.180477Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:45.180570Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:45.180623Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35mgathering_seeds[0m [36mold_step[0m=[35mgathering_seeds_selecting_seeds[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:45.180691Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgenerating_recommendations[0m [36mstep[0m=[35mgenerating_recommendations_fetching[0m
[2m2025-11-11T12:20:45.181195Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:45.181282Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:45.766889Z[0m [[32m[1minfo     [0m] [1mToken still valid until 2025-11-11 13:18:02.251000+00:00, no refresh needed[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.token[0m][0m
[2m2025-11-11T12:20:45.864044Z[0m [[32m[1minfo     [0m] [1mFetching 5 tracks from up to 7 artists (target: 9 tracks after filtering)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:20:46.100135Z[0m [[32m[1minfo     [0m] [1mBatch artist top tracks fetched[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m [36mfailed[0m=[35m0[0m [36mrequested[0m=[35m1[0m [36msucceeded[0m=[35m1[0m
[2m2025-11-11T12:20:46.101202Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 1/7: 3pO5VjZ4wOHCMBXOvbMISG[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:20:46.101438Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3pO5VjZ4wOHCMBXOvbMISG (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:46.101516Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:46.101653Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3pO5VjZ4wOHCMBXOvbMISG[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:46.101743Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 2/7: 6xrCU6zdcSTsG2hLrojpmI[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:20:46.101841Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 6xrCU6zdcSTsG2hLrojpmI (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:46.101918Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:46.101974Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 6xrCU6zdcSTsG2hLrojpmI[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:46.934854Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 6xrCU6zdcSTsG2hLrojpmI[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:46.935025Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:46.987310Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3pO5VjZ4wOHCMBXOvbMISG[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:46.987476Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
INFO:     127.0.0.1:55964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:20:48.187664Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved duration_ms for 3/3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:20:48.187904Z[0m [[32m[1minfo     [0m] [1mRetrieved duration_ms for 8 tracks from track endpoint[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:20:48.188032Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:20:48.188279Z[0m [[32m[1minfo     [0m] [1mFetched and cached 8 fresh recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:48.188623Z[0m [[32m[1minfo     [0m] [1mGetting 8 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:48.189045Z[0m [[32m[1minfo     [0m] [1mGetting 8 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:48.189132Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved duration_ms for 3/3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:20:48.512147Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:48.512375Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:48.512571Z[0m [[32m[1minfo     [0m] [1mRetrieved duration_ms for 8 tracks from track endpoint[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:20:48.512673Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:20:48.512903Z[0m [[32m[1minfo     [0m] [1mFetched and cached 8 fresh recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:48.513159Z[0m [[32m[1minfo     [0m] [1mConverted 8/8 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{8}[0m
[2m2025-11-11T12:20:48.513237Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 8/8 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:48.513294Z[0m [[32m[1minfo     [0m] [1mAll 8 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:48.513375Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/8 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:20:48.513438Z[0m [[32m[1minfo     [0m] [1mGetting 8 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:48.513523Z[0m [[32m[1minfo     [0m] [1mGetting 8 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:49.189613Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:49.189818Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:49.190060Z[0m [[32m[1minfo     [0m] [1mConverted 8/8 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{8}[0m
[2m2025-11-11T12:20:49.190130Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 8/8 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:49.190179Z[0m [[32m[1minfo     [0m] [1mAll 8 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:49.190231Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/8 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:20:49.190436Z[0m [[32m[1minfo     [0m] [1mGenerated 16 raw recommendations from 2 seed chunks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:20:49.190678Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: Lost and found by Molly Sand√©n, Victor Leksell - Language mismatch: track appears to be german, mood is portuguese[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:20:49.190762Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: Worldwide by Asake - Language mismatch: track appears to be spanish, mood is portuguese[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:20:49.190919Z[0m [[32m[1minfo     [0m] [1mValidation pass: 16 -> 14 tracks (filtered 2)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:20:49.190962Z[0m [[32m[1minfo     [0m] [1mGenerated 14 validated recommendations from seeds[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:20:55.247315Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:20:57.802427Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 4 diverse tracks (ratio: 30.0%, top: 1, album: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:57.802752Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 4 tracks for artist 6xrCU6zdcSTsG2hLrojpmI (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:57.802806Z[0m [[32m[1minfo     [0m] [1mGot 4 tracks from artist 6xrCU6zdcSTsG2hLrojpmI, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:20:57.802931Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m25.0%[0m [36mtotal_requested[0m=[35m4[0m
[2m2025-11-11T12:20:57.803187Z[0m [[32m[1minfo     [0m] [1mGetting 3 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:57.870336Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 diverse tracks (ratio: 30.0%, top: 1, album: 0)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:57.870552Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 tracks for artist 3pO5VjZ4wOHCMBXOvbMISG (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:20:57.870601Z[0m [[32m[1minfo     [0m] [1mGot 1 tracks from artist 3pO5VjZ4wOHCMBXOvbMISG, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:20:57.870694Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m100.0%[0m [36mtotal_requested[0m=[35m1[0m
[2m2025-11-11T12:20:57.870766Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m
[2m2025-11-11T12:20:57.870846Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 1/1 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:57.870952Z[0m [[32m[1minfo     [0m] [1mAll 1 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:57.871035Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 1/1 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:20:57.871217Z[0m [[32m[1minfo     [0m] [1mAdded 1/1 tracks from artist 3pO5VjZ4wOHCMBXOvbMISG (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:20:57.871337Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 3/7: 77ZUbcdoU5KCPHNUl8bgQy[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:20:57.871424Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 77ZUbcdoU5KCPHNUl8bgQy (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:57.871503Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:57.871537Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 77ZUbcdoU5KCPHNUl8bgQy[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:57.975839Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:20:57.976103Z[0m [[32m[1minfo     [0m] [1mConverted 4/4 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{3}[0m
[2m2025-11-11T12:20:57.976175Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/4 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:57.976256Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 3 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:20:58.593870Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 77ZUbcdoU5KCPHNUl8bgQy[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:20:58.594030Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:09.314230Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 diverse tracks (ratio: 30.0%, top: 1, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:09.314424Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 tracks for artist 77ZUbcdoU5KCPHNUl8bgQy (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:21:09.314470Z[0m [[32m[1minfo     [0m] [1mGot 2 tracks from artist 77ZUbcdoU5KCPHNUl8bgQy, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:09.314543Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m50.0%[0m [36mtotal_requested[0m=[35m2[0m
[2m2025-11-11T12:21:09.314698Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:09.538406Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:09.538658Z[0m [[32m[1minfo     [0m] [1mConverted 2/2 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T12:21:09.538713Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/2 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:09.538769Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:09.760433Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 3/3 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:09.760610Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 4/4 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:21:09.760733Z[0m [[32m[1minfo     [0m] [1mAdded 4/4 tracks from artist 6xrCU6zdcSTsG2hLrojpmI (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:09.760903Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 4/7: 4M5nCE77Qaxayuhp3fVn4V[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:09.760983Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 4M5nCE77Qaxayuhp3fVn4V (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:09.761036Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:09.761078Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 4M5nCE77Qaxayuhp3fVn4V[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:09.761305Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:09.761368Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/2 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:21:09.761475Z[0m [[32m[1minfo     [0m] [1mAdded 2/2 tracks from artist 77ZUbcdoU5KCPHNUl8bgQy (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:09.761553Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 5/7: 5rX2c1zow6hCph8PnnU3kF[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:09.761626Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 5rX2c1zow6hCph8PnnU3kF (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:09.761673Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:09.761713Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 5rX2c1zow6hCph8PnnU3kF[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:10.488372Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 5rX2c1zow6hCph8PnnU3kF[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:10.488543Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:10.596665Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 4M5nCE77Qaxayuhp3fVn4V[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:10.596890Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:20.234683Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:21:21.295575Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:21.295960Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 4M5nCE77Qaxayuhp3fVn4V (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:21:21.296014Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 4M5nCE77Qaxayuhp3fVn4V, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:21.296135Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T12:21:21.296454Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:21.351955Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 diverse tracks (ratio: 30.0%, top: 1, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:21.352192Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 tracks for artist 5rX2c1zow6hCph8PnnU3kF (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:21:21.352248Z[0m [[32m[1minfo     [0m] [1mGot 2 tracks from artist 5rX2c1zow6hCph8PnnU3kF, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:21.352330Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m50.0%[0m [36mtotal_requested[0m=[35m2[0m
[2m2025-11-11T12:21:21.352489Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:21.467805Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:21.468060Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T12:21:21.468134Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:21.468201Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:21.704078Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:21.704301Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:21:21.704468Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 4M5nCE77Qaxayuhp3fVn4V (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:21.704584Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 6/7: 7fxtWEwKKrFaykKItspdYg[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:21.704663Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 7fxtWEwKKrFaykKItspdYg (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:21.704764Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 9/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:21.704815Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 7fxtWEwKKrFaykKItspdYg[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:21.762250Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:21.762686Z[0m [[32m[1minfo     [0m] [1mConverted 2/2 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T12:21:21.762785Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/2 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:21.762882Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:22.797866Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 7fxtWEwKKrFaykKItspdYg[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:22.798147Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:25.268392Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:25.268709Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/2 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:21:25.268858Z[0m [[32m[1minfo     [0m] [1mAdded 2/2 tracks from artist 5rX2c1zow6hCph8PnnU3kF (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:25.269032Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 7/7: 0rZp7G3gIH6WkyeXbrZnGi[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:25.269151Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 0rZp7G3gIH6WkyeXbrZnGi (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:25.269229Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:25.269273Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 0rZp7G3gIH6WkyeXbrZnGi[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:26.025183Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 0rZp7G3gIH6WkyeXbrZnGi[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:26.025338Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:39.476102Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 4 diverse tracks (ratio: 30.0%, top: 1, album: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:39.476447Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 4 tracks for artist 7fxtWEwKKrFaykKItspdYg (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:21:39.476502Z[0m [[32m[1minfo     [0m] [1mGot 4 tracks from artist 7fxtWEwKKrFaykKItspdYg, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:39.476624Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m25.0%[0m [36mtotal_requested[0m=[35m4[0m
[2m2025-11-11T12:21:39.476814Z[0m [[32m[1minfo     [0m] [1mGetting 3 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:33.546913Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:33.547165Z[0m [[32m[1minfo     [0m] [1mConverted 4/4 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{3}[0m
[2m2025-11-11T12:21:33.547236Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/4 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:33.547303Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 3 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:34.232489Z[0m [[33m[1mwarning  [0m] [1mRate limit reached for get_artist_top_tracks, waiting 26.7s[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:21:35.158255Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 3/3 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:35.158567Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 4/4 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:21:35.158776Z[0m [[32m[1minfo     [0m] [1mAdded 4/4 tracks from artist 7fxtWEwKKrFaykKItspdYg (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:45.261092Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:21:58.606908Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 5 diverse tracks (ratio: 30.0%, top: 1, album: 4)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:21:58.607095Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 5 tracks for artist 0rZp7G3gIH6WkyeXbrZnGi (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:21:58.607140Z[0m [[32m[1minfo     [0m] [1mGot 5 tracks from artist 0rZp7G3gIH6WkyeXbrZnGi, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:21:58.607230Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m20.0%[0m [36mtotal_requested[0m=[35m5[0m
[2m2025-11-11T12:21:58.607365Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:59.412861Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:21:59.413227Z[0m [[32m[1minfo     [0m] [1mConverted 4/5 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{3}[0m
[2m2025-11-11T12:21:59.413352Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/5 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:21:59.413428Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 3 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:01.518362Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 3/3 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:01.518581Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 4/5 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:22:01.518809Z[0m [[32m[1minfo     [0m] [1mAdded 5/5 tracks from artist 0rZp7G3gIH6WkyeXbrZnGi (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:01.518978Z[0m [[32m[1minfo     [0m] [1mGenerated 21 recommendations from 7/7 artists (0 failed)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:01.519492Z[0m [[32m[1minfo     [0m] [1mIncluded 5 anchor tracks in recommendations (0 user-mentioned, 5 genre-based)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.anchor_track[0m][0m
[2m2025-11-11T12:22:01.519571Z[0m [[32m[1minfo     [0m] [1mGenerated 40 total recommendations in parallel (0 user anchor, 21 artists, 14 seeds)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T12:22:01.519670Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_processing[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T12:22:01.519742Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:01.520328Z[0m [[32m[1minfo     [0m] [1mMood filtering: 40 -> 40 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_filter[0m][0m
[2m2025-11-11T12:22:01.520603Z[0m [[32m[1minfo     [0m] [1mDiversity applied: 0 tracks exempted (protected/user-mentioned), 26 tracks penalized[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.diversity[0m][0m
[2m2025-11-11T12:22:01.520704Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_diversifying[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T12:22:01.520769Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:01.520906Z[0m [[32m[1minfo     [0m] [1manchor_track_capping          [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m5[0m [36mlimit[0m=[35m5[0m [36mnote[0m=[35m'user_mentioned includes tracks from user-mentioned artists'[0m [36moverflow[0m=[35m0[0m [36muser_mentioned[0m=[35m0[0m
[2m2025-11-11T12:22:01.521000Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m1[0m [36mlimit[0m=[35m1[0m [36moverflow[0m=[35m13[0m [36msource[0m=[35mreccobeat[0m
[2m2025-11-11T12:22:01.521076Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m19[0m [36mlimit[0m=[35m19[0m [36moverflow[0m=[35m2[0m [36msource[0m=[35martist_discovery[0m
[2m2025-11-11T12:22:01.521415Z[0m [[32m[1minfo     [0m] [1mratio_enforcement_complete    [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36manchor_count[0m=[35m5[0m [36martist_count[0m=[35m19[0m [36martist_ratio[0m=[35m0.95[0m [36moriginal[0m=[35m40[0m [36mreccobeat_count[0m=[35m1[0m [36mtotal[0m=[35m25[0m
[2m2025-11-11T12:22:01.521719Z[0m [[32m[1minfo     [0m] [1mGenerated 22 final recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T12:22:01.521951Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator completed execution in 76.350794s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:22:01.522171Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mevaluating_quality_iteration_1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mevaluating_quality[0m
[2m2025-11-11T12:22:01.522279Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m3[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:01.526327Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:01.526484Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:01.526544Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mevaluating_quality[0m [36mnew_step[0m=[35mevaluating_quality_iteration_1[0m [36mold_status[0m=[35mgenerating_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:01.526658Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mevaluating_quality[0m [36mstep[0m=[35mevaluating_quality_iteration_1[0m
[2m2025-11-11T12:22:01.527230Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:01.527301Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:01.527400Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:01.527468Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
INFO:     127.0.0.1:50326 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:22:07.781051Z[0m [[32m[1minfo     [0m] [1mLLM assessment: quality=0.75, meets_expectations=True[0m [[0m[1m[34mapp.agents.recommender.orchestrator.quality_evaluator[0m][0m
[2m2025-11-11T12:22:07.781474Z[0m [[32m[1minfo     [0m] [1mLLM flagged outlier: Years On by Novo Amor (matched from concern: Years On by Novo Amor feels out of place because while it is mellow and acoustic...)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T12:22:07.781539Z[0m [[32m[1minfo     [0m] [1mLLM flagged outlier: Mourning in America by The Milk Carton Kids (matched from concern: Mourning in America by The Milk Carton Kids feels out of place because it is one...)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T12:22:07.781604Z[0m [[32m[1minfo     [0m] [1mLLM identified 2 additional outliers: ['Years On', 'Mourning in America'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.quality_evaluator[0m][0m
[2m2025-11-11T12:22:07.781665Z[0m [[32m[1minfo     [0m] [1mIteration 1: Overall score=0.69, Cohesion=0.48, Count=22[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:22:07.781825Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35moptimizing_recommendations_iteration_1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T12:22:07.781918Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:07.784221Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:07.784424Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:07.784486Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35moptimizing_recommendations[0m [36mnew_step[0m=[35moptimizing_recommendations_iteration_1[0m [36mold_status[0m=[35mevaluating_quality[0m [36mold_step[0m=[35mevaluating_quality_iteration_1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:07.784587Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35moptimizing_recommendations[0m [36mstep[0m=[35moptimizing_recommendations_iteration_1[0m
INFO:     127.0.0.1:50326 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:22:10.256031Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:10.535882Z[0m [[32m[1minfo     [0m] [1mLLM strategy decision: ['filter_and_replace', 'adjust_feature_weights', 'generate_more'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:22:10.536197Z[0m [[32m[1minfo     [0m] [1mLLM reasoning: The primary issues are low confidence (0.31) and the presence of outliers (3 tracks), compounded by a slight length deficit (15/18 tracks). 

1. **filter_and_replace**: This directly addresses the 3 outliers and the low confidence by removing the weakest links and immediately replacing them with tracks that better fit the established mood, improving cohesion.
2. **adjust_feature_weights**: After pruning the obvious weak spots, tightening the mood matching (making it stricter) will help ensure the *new* replacements and the remaining tracks align perfectly with the 'cozy caf√©' vibe, addressing the textural inconsistencies mentioned in the LLM assessment (e.g., the Novo Amor deviation).
3. **generate_more**: Since the playlist is currently short (15/18), this final step ensures the playlist reaches the target length (18 tracks) using the now-refined and stricter criteria, maximizing quality while hitting the length goal.[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:22:10.536274Z[0m [[32m[1minfo     [0m] [1mLLM suggested strategies: ['filter_and_replace', 'adjust_feature_weights', 'generate_more'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:22:10.536313Z[0m [[32m[1minfo     [0m] [1mApplying improvement strategies: ['filter_and_replace', 'adjust_feature_weights', 'generate_more'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:22:10.536362Z[0m [[32m[1minfo     [0m] [1mApplying strategy: filter_and_replace[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:22:10.536440Z[0m [[32m[1minfo     [0m] [1mFiltering 3 outliers, keeping 19 good tracks (0 protected tracks kept despite being outliers)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:22:10.536562Z[0m [[32m[1minfo     [0m] [1mAdded 3 outliers as negative seeds (total: 3)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:22:10.536655Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:22:10.536722Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations for mood: Laid-back acoustic, bossa nova, and mellow indie folk creating a cozy caf√© atmosphere perfect for reading or chatting[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T12:22:10.536860Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T12:22:10.536948Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:10.537028Z[0m [[32m[1minfo     [0m] [1mSplit WITHOUT user mentions: 9 artists, 6 seeds (total: 18)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T12:22:10.537078Z[0m [[32m[1minfo     [0m] [1mExecuting recommendation strategies in parallel[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T12:22:10.537242Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations from 7 discovered artists[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:10.538225Z[0m [[32m[1minfo     [0m] [1mUsing 3 negative seeds to avoid similar tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:22:10.538528Z[0m [[32m[1minfo     [0m] [1mCache miss for recommendations, fetching from API[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:10.538690Z[0m [[32m[1minfo     [0m] [1mAuto-balancing: reduced negative seeds from 3 to 1[0m [[0m[1m[34mapp.agents.core.seed_guardrails[0m][0m [36mnew_ratio[0m=[35m1/3[0m [36moriginal_ratio[0m=[35m3/3[0m
[2m2025-11-11T12:22:10.538772Z[0m [[32m[1minfo     [0m] [1mAuto-balancing parameters: Auto-balanced: too many negative seeds (3 >= 3)[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:10.538814Z[0m [[32m[1minfo     [0m] [1mGetting 8 recommendations for 3 seeds[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:10.538888Z[0m [[32m[1minfo     [0m] [1mCache miss for recommendations, fetching from API[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:10.538949Z[0m [[32m[1minfo     [0m] [1mAuto-balancing: reduced negative seeds from 3 to 1[0m [[0m[1m[34mapp.agents.core.seed_guardrails[0m][0m [36mnew_ratio[0m=[35m1/2[0m [36moriginal_ratio[0m=[35m3/2[0m
[2m2025-11-11T12:22:10.538998Z[0m [[32m[1minfo     [0m] [1mAuto-balancing parameters: Auto-balanced: too many negative seeds (3 >= 2)[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:10.539035Z[0m [[32m[1minfo     [0m] [1mGetting 8 recommendations for 2 seeds[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:10.541093Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:10.541188Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:10.541242Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35moptimizing_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35moptimizing_recommendations_iteration_1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:10.541332Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35moptimizing_recommendations[0m [36mstep[0m=[35mgenerating_recommendations_fetching[0m
[2m2025-11-11T12:22:11.234729Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved duration_ms for 2/2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:11.347488Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved duration_ms for 3/3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:11.348253Z[0m [[32m[1minfo     [0m] [1mRetrieved duration_ms for 8 tracks from track endpoint[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:11.348409Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:11.348631Z[0m [[32m[1minfo     [0m] [1mFetched and cached 8 fresh recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:11.348927Z[0m [[32m[1minfo     [0m] [1mGetting 8 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:11.349334Z[0m [[32m[1minfo     [0m] [1mGetting 8 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:11.913041Z[0m [[32m[1minfo     [0m] [1mToken still valid until 2025-11-11 13:18:02.251000+00:00, no refresh needed[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.token[0m][0m
[2m2025-11-11T12:22:12.010243Z[0m [[32m[1minfo     [0m] [1mFetching 5 tracks from up to 7 artists (target: 9 tracks after filtering)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:12.010690Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 1/7: 3pO5VjZ4wOHCMBXOvbMISG[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:12.010774Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3pO5VjZ4wOHCMBXOvbMISG (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:12.010824Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:12.010865Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3pO5VjZ4wOHCMBXOvbMISG[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:12.010916Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 2/7: 6xrCU6zdcSTsG2hLrojpmI[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:12.010944Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 6xrCU6zdcSTsG2hLrojpmI (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:12.010974Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:12.010996Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 6xrCU6zdcSTsG2hLrojpmI[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:12.709918Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:12.710201Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:12.710511Z[0m [[32m[1minfo     [0m] [1mRetrieved duration_ms for 8 tracks from track endpoint[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:12.710665Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_recommendations[0m][0m
[2m2025-11-11T12:22:12.710977Z[0m [[32m[1minfo     [0m] [1mFetched and cached 8 fresh recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:12.711327Z[0m [[32m[1minfo     [0m] [1mConverted 8/8 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{8}[0m
[2m2025-11-11T12:22:12.711414Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 8/8 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:12.711462Z[0m [[32m[1minfo     [0m] [1mAll 8 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:12.711505Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/8 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:22:12.711608Z[0m [[32m[1minfo     [0m] [1mGetting 8 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:12.711747Z[0m [[32m[1minfo     [0m] [1mGetting 8 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:12.837651Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 6xrCU6zdcSTsG2hLrojpmI[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:12.837820Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:12.942810Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3pO5VjZ4wOHCMBXOvbMISG[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:12.942983Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
INFO:     127.0.0.1:50326 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:22:19.516182Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:19.516435Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 8 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:19.516727Z[0m [[32m[1minfo     [0m] [1mConverted 8/8 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{8}[0m
[2m2025-11-11T12:22:19.516800Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 8/8 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:19.516848Z[0m [[32m[1minfo     [0m] [1mAll 8 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:19.516878Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/8 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:22:19.517018Z[0m [[32m[1minfo     [0m] [1mGenerated 16 raw recommendations from 2 seed chunks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:22:19.517169Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: Apesar De Voc√™ by Chico Buarque, MPB4, Quarteto Em Cy - Language mismatch: track appears to be spanish, mood is portuguese[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:22:19.517280Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: Madeline (feat. Gabriella Rose) by Zach Bryan, Gabriella Rose - Language mismatch: track appears to be spanish, mood is portuguese[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:22:19.517431Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: I Saw Three Ships by Nat King Cole, Christmas Hits Collective, Julehits, Christmas Hits - Language mismatch: track appears to be french, mood is portuguese[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:22:19.517493Z[0m [[32m[1minfo     [0m] [1mValidation pass: 16 -> 13 tracks (filtered 3)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:22:19.517521Z[0m [[32m[1minfo     [0m] [1mGenerated 13 validated recommendations from seeds[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:22:23.605891Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 5 diverse tracks (ratio: 30.0%, top: 1, album: 4)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:23.606121Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 5 tracks for artist 6xrCU6zdcSTsG2hLrojpmI (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:22:23.606180Z[0m [[32m[1minfo     [0m] [1mGot 5 tracks from artist 6xrCU6zdcSTsG2hLrojpmI, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:23.606275Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m20.0%[0m [36mtotal_requested[0m=[35m5[0m
[2m2025-11-11T12:22:23.606440Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:29.646995Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 diverse tracks (ratio: 30.0%, top: 1, album: 0)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:29.647357Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 tracks for artist 3pO5VjZ4wOHCMBXOvbMISG (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:22:29.647420Z[0m [[32m[1minfo     [0m] [1mGot 1 tracks from artist 3pO5VjZ4wOHCMBXOvbMISG, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:29.647561Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m100.0%[0m [36mtotal_requested[0m=[35m1[0m
[2m2025-11-11T12:22:29.647635Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m
[2m2025-11-11T12:22:29.647693Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 1/1 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:29.648006Z[0m [[32m[1minfo     [0m] [1mAll 1 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:29.648102Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 1/1 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:22:29.648277Z[0m [[32m[1minfo     [0m] [1mAdded 1/1 tracks from artist 3pO5VjZ4wOHCMBXOvbMISG (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:29.648378Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 3/7: 77ZUbcdoU5KCPHNUl8bgQy[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:29.648438Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 77ZUbcdoU5KCPHNUl8bgQy (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:29.648490Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:29.648537Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 77ZUbcdoU5KCPHNUl8bgQy[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:24.430482Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 4 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:22:24.430816Z[0m [[32m[1minfo     [0m] [1mConverted 5/5 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{4}[0m
[2m2025-11-11T12:22:24.430917Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 5/5 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:24.431008Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 4 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:30.552059Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 77ZUbcdoU5KCPHNUl8bgQy[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:30.552232Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:34.651783Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 4/4 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:22:34.652102Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 5/5 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:22:34.652323Z[0m [[32m[1minfo     [0m] [1mAdded 5/5 tracks from artist 6xrCU6zdcSTsG2hLrojpmI (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:34.652445Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 4/7: 4M5nCE77Qaxayuhp3fVn4V[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:22:34.652527Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 4M5nCE77Qaxayuhp3fVn4V (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:34.652580Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:34.652628Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 4M5nCE77Qaxayuhp3fVn4V[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:35.241139Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:22:36.181904Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 4M5nCE77Qaxayuhp3fVn4V[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:36.182161Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:22:59.385979Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:07.823976Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_artist_top_tracks, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:23:07.824266Z[0m [[33m[1mwarning  [0m] [1mTimeout when calling get_artist_top_tracks, retrying in 0.5s...[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:23:08.540116Z[0m [[33m[1mwarning  [0m] [1mSlow API request detected     [0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m28.189775[0m [36mendpoint[0m=[35m/tracks/1KHvHKogY5K9HrKf9J5u1C[0m [36mparams[0m=[35m{'market': 'US'}[0m [36mtool[0m=[35mget_artist_top_tracks[0m
[2m2025-11-11T12:23:08.574055Z[0m [[33m[1mwarning  [0m] [1mSlow API request detected     [0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m [36mduration_seconds[0m=[35m27.926018[0m [36mendpoint[0m=[35m/albums/7rGFLTqgY4PQM4StTBj1Kl/tracks[0m [36mparams[0m=[35m{'market': 'US', 'limit': 50}[0m [36mtool[0m=[35mget_artist_top_tracks[0m
[2m2025-11-11T12:23:09.197267Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 diverse tracks (ratio: 30.0%, top: 1, album: 0)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:09.197424Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 tracks for artist 77ZUbcdoU5KCPHNUl8bgQy (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:23:09.197467Z[0m [[32m[1minfo     [0m] [1mGot 1 tracks from artist 77ZUbcdoU5KCPHNUl8bgQy, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:09.197556Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m100.0%[0m [36mtotal_requested[0m=[35m1[0m
[2m2025-11-11T12:23:09.197601Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m
[2m2025-11-11T12:23:09.197648Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 1/1 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:09.197714Z[0m [[32m[1minfo     [0m] [1mAll 1 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:09.197775Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 1/1 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:23:09.197867Z[0m [[32m[1minfo     [0m] [1mAdded 1/1 tracks from artist 77ZUbcdoU5KCPHNUl8bgQy (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:09.198004Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 5/7: 5rX2c1zow6hCph8PnnU3kF[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:09.198047Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 5rX2c1zow6hCph8PnnU3kF (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:09.198081Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:09.198136Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 5rX2c1zow6hCph8PnnU3kF[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:10.389761Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 5rX2c1zow6hCph8PnnU3kF[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:10.389952Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:14.658065Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:14.658239Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 4M5nCE77Qaxayuhp3fVn4V (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:23:14.658283Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 4M5nCE77Qaxayuhp3fVn4V, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:14.658363Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m33.3%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T12:23:14.658487Z[0m [[32m[1minfo     [0m] [1mGetting 2 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:23:15.802368Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:23:15.802683Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T12:23:15.802750Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:15.802879Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:17.485930Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:17.486099Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:23:17.486208Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 4M5nCE77Qaxayuhp3fVn4V (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:17.486258Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 6/7: 7fxtWEwKKrFaykKItspdYg[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:17.486294Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 7fxtWEwKKrFaykKItspdYg (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:17.486326Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 9/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:17.486345Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 7fxtWEwKKrFaykKItspdYg[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:18.185676Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 7fxtWEwKKrFaykKItspdYg[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:18.185846Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:21.183835Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 diverse tracks (ratio: 30.0%, top: 1, album: 0)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:21.184016Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 tracks for artist 5rX2c1zow6hCph8PnnU3kF (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:23:21.184058Z[0m [[32m[1minfo     [0m] [1mGot 1 tracks from artist 5rX2c1zow6hCph8PnnU3kF, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:21.184131Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m100.0%[0m [36mtotal_requested[0m=[35m1[0m
[2m2025-11-11T12:23:21.184184Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m
[2m2025-11-11T12:23:21.184221Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 1/1 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:21.184277Z[0m [[32m[1minfo     [0m] [1mAll 1 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:21.184318Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 1/1 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:23:21.184398Z[0m [[32m[1minfo     [0m] [1mAdded 1/1 tracks from artist 5rX2c1zow6hCph8PnnU3kF (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:21.184477Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 7/7: 0rZp7G3gIH6WkyeXbrZnGi[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:21.184536Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 0rZp7G3gIH6WkyeXbrZnGi (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:21.184582Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:21.184610Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 0rZp7G3gIH6WkyeXbrZnGi[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:22.384094Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 0rZp7G3gIH6WkyeXbrZnGi[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:22.384258Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:25.225012Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:34.613815Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 diverse tracks (ratio: 30.0%, top: 1, album: 2)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:34.614026Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 3 tracks for artist 7fxtWEwKKrFaykKItspdYg (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:23:34.614078Z[0m [[32m[1minfo     [0m] [1mGot 3 tracks from artist 7fxtWEwKKrFaykKItspdYg, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:34.614182Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m66.7%[0m [36mtotal_requested[0m=[35m3[0m
[2m2025-11-11T12:23:34.614415Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:23:28.981085Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:23:28.981356Z[0m [[32m[1minfo     [0m] [1mConverted 3/3 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T12:23:28.981413Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 3/3 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:28.981484Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 2) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:29.186986Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:29.187195Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 3/3 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:23:29.187310Z[0m [[32m[1minfo     [0m] [1mAdded 3/3 tracks from artist 7fxtWEwKKrFaykKItspdYg (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:30.971206Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 5 diverse tracks (ratio: 30.0%, top: 1, album: 4)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:30.971404Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 5 tracks for artist 0rZp7G3gIH6WkyeXbrZnGi (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:23:30.971450Z[0m [[32m[1minfo     [0m] [1mGot 5 tracks from artist 0rZp7G3gIH6WkyeXbrZnGi, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:30.971538Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m20.0%[0m [36mtotal_requested[0m=[35m5[0m
[2m2025-11-11T12:23:30.971667Z[0m [[32m[1minfo     [0m] [1mGetting 4 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:23:31.434535Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:23:31.435171Z[0m [[32m[1minfo     [0m] [1mConverted 4/5 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{3}[0m
[2m2025-11-11T12:23:31.435324Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/5 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:31.435464Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 3 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.167915Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 3/3 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.168081Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 4/5 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:23:33.168196Z[0m [[32m[1minfo     [0m] [1mAdded 5/5 tracks from artist 0rZp7G3gIH6WkyeXbrZnGi (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:33.168287Z[0m [[32m[1minfo     [0m] [1mGenerated 19 recommendations from 7/7 artists (0 failed)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:33.168681Z[0m [[32m[1minfo     [0m] [1mIncluded 5 anchor tracks in recommendations (0 user-mentioned, 5 genre-based)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.anchor_track[0m][0m
[2m2025-11-11T12:23:33.168736Z[0m [[32m[1minfo     [0m] [1mGenerated 37 total recommendations in parallel (0 user anchor, 19 artists, 13 seeds)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T12:23:33.168805Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_processing[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T12:23:33.168866Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.169373Z[0m [[32m[1minfo     [0m] [1mMood filtering: 37 -> 37 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_filter[0m][0m
[2m2025-11-11T12:23:33.169609Z[0m [[32m[1minfo     [0m] [1mDiversity applied: 0 tracks exempted (protected/user-mentioned), 26 tracks penalized[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.diversity[0m][0m
[2m2025-11-11T12:23:33.169680Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_diversifying[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T12:23:33.169731Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.169823Z[0m [[32m[1minfo     [0m] [1manchor_track_capping          [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m5[0m [36mlimit[0m=[35m5[0m [36mnote[0m=[35m'user_mentioned includes tracks from user-mentioned artists'[0m [36moverflow[0m=[35m0[0m [36muser_mentioned[0m=[35m0[0m
[2m2025-11-11T12:23:33.169904Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m1[0m [36mlimit[0m=[35m1[0m [36moverflow[0m=[35m12[0m [36msource[0m=[35mreccobeat[0m
[2m2025-11-11T12:23:33.169965Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m19[0m [36mlimit[0m=[35m19[0m [36moverflow[0m=[35m0[0m [36msource[0m=[35martist_discovery[0m
[2m2025-11-11T12:23:33.170029Z[0m [[32m[1minfo     [0m] [1mratio_enforcement_complete    [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36manchor_count[0m=[35m5[0m [36martist_count[0m=[35m19[0m [36martist_ratio[0m=[35m0.95[0m [36moriginal[0m=[35m37[0m [36mreccobeat_count[0m=[35m1[0m [36mtotal[0m=[35m25[0m
[2m2025-11-11T12:23:33.170164Z[0m [[32m[1minfo     [0m] [1mGenerated 41 final recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T12:23:33.170250Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator completed execution in 82.633519s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:23:33.170304Z[0m [[32m[1minfo     [0m] [1mApplying strategy: adjust_feature_weights[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:23:33.170343Z[0m [[32m[1minfo     [0m] [1mAdjusted feature weight from 4.5 to 4.8[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:23:33.170365Z[0m [[32m[1minfo     [0m] [1mApplying strategy: generate_more[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:23:33.170385Z[0m [[32m[1minfo     [0m] [1mGenerating 5 more recommendations (current: 41, target: 18)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m
[2m2025-11-11T12:23:33.170407Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator starting execution[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:23:33.170426Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations for mood: Laid-back acoustic, bossa nova, and mellow indie folk creating a cozy caf√© atmosphere perfect for reading or chatting[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T12:23:33.170453Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T12:23:33.170495Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m3[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.170542Z[0m [[32m[1minfo     [0m] [1mSplit WITHOUT user mentions: 9 artists, 6 seeds (total: 18)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T12:23:33.170576Z[0m [[32m[1minfo     [0m] [1mExecuting recommendation strategies in parallel[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T12:23:33.170673Z[0m [[32m[1minfo     [0m] [1mGenerating recommendations from 7 discovered artists[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:33.171313Z[0m [[32m[1minfo     [0m] [1mUsing 3 negative seeds to avoid similar tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:23:33.171479Z[0m [[32m[1minfo     [0m] [1mCache hit for track recommendations (key: e5a3e59f...)[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.171531Z[0m [[32m[1minfo     [0m] [1mReturning 8 cached recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.171609Z[0m [[32m[1minfo     [0m] [1mCache hit for track recommendations (key: da395313...)[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.171665Z[0m [[32m[1minfo     [0m] [1mReturning 8 cached recommendations[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.171835Z[0m [[32m[1minfo     [0m] [1mSkipped 8 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m100.0%[0m [36mtotal_ids[0m=[35m8[0m
[2m2025-11-11T12:23:33.171889Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{8}[0m
[2m2025-11-11T12:23:33.171925Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 0/8 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.171959Z[0m [[32m[1minfo     [0m] [1mAll 8 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.171991Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/8 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:23:33.172040Z[0m [[32m[1minfo     [0m] [1mCache hit for track lookup (key: 94847f19...)[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.172151Z[0m [[32m[1minfo     [0m] [1mSkipped 8 known-missing IDs   [0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mskip_rate[0m=[35m100.0%[0m [36mtotal_ids[0m=[35m8[0m
[2m2025-11-11T12:23:33.172196Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{0}[0m [36mknown_missing[0m=[35m{8}[0m
[2m2025-11-11T12:23:33.172237Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 0/8 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.172283Z[0m [[32m[1minfo     [0m] [1mAll 8 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.172319Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 0/8 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:23:33.172384Z[0m [[32m[1minfo     [0m] [1mCache hit for track lookup (key: 8827d851...)[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:23:33.172464Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.172513Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.172558Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.172738Z[0m [[32m[1minfo     [0m] [1mGenerated 16 raw recommendations from 2 seed chunks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:23:33.172868Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: Apesar De Voc√™ by Chico Buarque, MPB4, Quarteto Em Cy - Language mismatch: track appears to be spanish, mood is portuguese[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:23:33.172966Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: Madeline (feat. Gabriella Rose) by Zach Bryan, Gabriella Rose - Language mismatch: track appears to be spanish, mood is portuguese[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:23:33.173104Z[0m [[32m[1minfo     [0m] [1mFiltered out invalid track from seeds: I Saw Three Ships by Nat King Cole, Christmas Hits Collective, Julehits, Christmas Hits - Language mismatch: track appears to be french, mood is portuguese[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:23:33.173159Z[0m [[32m[1minfo     [0m] [1mValidation pass: 16 -> 13 tracks (filtered 3)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:23:33.173197Z[0m [[32m[1minfo     [0m] [1mGenerated 13 validated recommendations from seeds[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.seed_based[0m][0m
[2m2025-11-11T12:23:33.173305Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.173370Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.173430Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.173520Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.173582Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:33.173626Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mgenerating_recommendations_fetching[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:23:34.378311Z[0m [[32m[1minfo     [0m] [1mToken still valid until 2025-11-11 13:18:02.251000+00:00, no refresh needed[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.token[0m][0m
[2m2025-11-11T12:23:34.474364Z[0m [[32m[1minfo     [0m] [1mFetching 5 tracks from up to 7 artists (target: 9 tracks after filtering)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:34.474856Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 1/7: 3pO5VjZ4wOHCMBXOvbMISG[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:34.475008Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 3pO5VjZ4wOHCMBXOvbMISG (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:34.475090Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:34.475151Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 3pO5VjZ4wOHCMBXOvbMISG[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:34.475230Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 2/7: 6xrCU6zdcSTsG2hLrojpmI[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:23:34.475310Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 6xrCU6zdcSTsG2hLrojpmI (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:34.475385Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:34.475435Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 6xrCU6zdcSTsG2hLrojpmI[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:35.431061Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 6xrCU6zdcSTsG2hLrojpmI[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:35.431213Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:35.442483Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 3pO5VjZ4wOHCMBXOvbMISG[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:35.442665Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:23:40.550576Z[0m [[33m[1mwarning  [0m] [1mRate limit reached for get_artist_top_tracks, waiting 28.0s[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:23:40.773882Z[0m [[33m[1mwarning  [0m] [1mRate limit reached for get_artist_top_tracks, waiting 27.8s[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:23:50.203679Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:24:11.689326Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 4 diverse tracks (ratio: 30.0%, top: 1, album: 3)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:11.689558Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 4 tracks for artist 6xrCU6zdcSTsG2hLrojpmI (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:24:11.689620Z[0m [[32m[1minfo     [0m] [1mGot 4 tracks from artist 6xrCU6zdcSTsG2hLrojpmI, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:11.689757Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m25.0%[0m [36mtotal_requested[0m=[35m4[0m
[2m2025-11-11T12:24:11.689959Z[0m [[32m[1minfo     [0m] [1mGetting 3 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:24:12.183242Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 diverse tracks (ratio: 30.0%, top: 1, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:12.183465Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 tracks for artist 3pO5VjZ4wOHCMBXOvbMISG (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:24:12.183511Z[0m [[32m[1minfo     [0m] [1mGot 2 tracks from artist 3pO5VjZ4wOHCMBXOvbMISG, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:12.183601Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m50.0%[0m [36mtotal_requested[0m=[35m2[0m
[2m2025-11-11T12:24:12.183771Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:24:12.529058Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 3 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:24:12.529475Z[0m [[32m[1minfo     [0m] [1mConverted 4/4 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{3}[0m
[2m2025-11-11T12:24:12.529557Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/4 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:12.529642Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 3 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:12.929671Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:24:12.929956Z[0m [[32m[1minfo     [0m] [1mConverted 2/2 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T12:24:12.930029Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/2 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:12.930099Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:14.368275Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:24:18.580415Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:18.580705Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/2 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:24:18.580848Z[0m [[32m[1minfo     [0m] [1mAdded 2/2 tracks from artist 3pO5VjZ4wOHCMBXOvbMISG (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:18.580917Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 3/7: 77ZUbcdoU5KCPHNUl8bgQy[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:18.581000Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 77ZUbcdoU5KCPHNUl8bgQy (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:18.581068Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:18.581121Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 77ZUbcdoU5KCPHNUl8bgQy[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:18.669064Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 3/3 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:18.669254Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 4/4 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:24:18.669390Z[0m [[32m[1minfo     [0m] [1mAdded 4/4 tracks from artist 6xrCU6zdcSTsG2hLrojpmI (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:18.669496Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 4/7: 4M5nCE77Qaxayuhp3fVn4V[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:18.669579Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 4M5nCE77Qaxayuhp3fVn4V (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:18.669627Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:18.669652Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 4M5nCE77Qaxayuhp3fVn4V[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:18.902130Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 4M5nCE77Qaxayuhp3fVn4V[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:18.902418Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:18.926847Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 77ZUbcdoU5KCPHNUl8bgQy[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:18.927007Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:29.740361Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 diverse tracks (ratio: 30.0%, top: 1, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:29.740743Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 tracks for artist 4M5nCE77Qaxayuhp3fVn4V (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:24:29.740800Z[0m [[32m[1minfo     [0m] [1mGot 2 tracks from artist 4M5nCE77Qaxayuhp3fVn4V, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:29.740919Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m50.0%[0m [36mtotal_requested[0m=[35m2[0m
[2m2025-11-11T12:24:29.741190Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:24:29.753847Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 diverse tracks (ratio: 30.0%, top: 1, album: 0)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:29.754037Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 tracks for artist 77ZUbcdoU5KCPHNUl8bgQy (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:24:29.754084Z[0m [[32m[1minfo     [0m] [1mGot 1 tracks from artist 77ZUbcdoU5KCPHNUl8bgQy, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:29.754171Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m100.0%[0m [36mtotal_requested[0m=[35m1[0m
[2m2025-11-11T12:24:29.754230Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m
[2m2025-11-11T12:24:29.754274Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 1/1 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:29.754351Z[0m [[32m[1minfo     [0m] [1mAll 1 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:29.754403Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 1/1 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:24:29.754491Z[0m [[32m[1minfo     [0m] [1mAdded 1/1 tracks from artist 77ZUbcdoU5KCPHNUl8bgQy (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:29.754553Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 5/7: 5rX2c1zow6hCph8PnnU3kF[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:29.754592Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 5rX2c1zow6hCph8PnnU3kF (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:29.754624Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:29.754646Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 5rX2c1zow6hCph8PnnU3kF[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:30.935404Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:24:30.936053Z[0m [[32m[1minfo     [0m] [1mConverted 2/2 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T12:24:30.936191Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/2 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:30.936355Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:31.034980Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 5rX2c1zow6hCph8PnnU3kF[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:31.035179Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:31.150538Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:24:31.150816Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/2 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:24:31.150942Z[0m [[32m[1minfo     [0m] [1mAdded 2/2 tracks from artist 4M5nCE77Qaxayuhp3fVn4V (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:31.151010Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 6/7: 7fxtWEwKKrFaykKItspdYg[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:24:31.151079Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 7fxtWEwKKrFaykKItspdYg (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:31.151144Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 9/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:31.151175Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 7fxtWEwKKrFaykKItspdYg[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:32.368789Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 7fxtWEwKKrFaykKItspdYg[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:32.368971Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:24:39.374998Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:24:39.757212Z[0m [[33m[1mwarning  [0m] [1mRate limit reached for get_artist_top_tracks, waiting 26.5s[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:24:40.734571Z[0m [[33m[1mwarning  [0m] [1mRate limit reached for get_artist_top_tracks, waiting 25.5s[0m [[0m[1m[34mapp.agents.tools.agent_tools[0m][0m
[2m2025-11-11T12:25:04.354565Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:06.230173Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 diverse tracks (ratio: 30.0%, top: 1, album: 0)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:25:06.230360Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 1 tracks for artist 7fxtWEwKKrFaykKItspdYg (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:25:06.230406Z[0m [[32m[1minfo     [0m] [1mGot 1 tracks from artist 7fxtWEwKKrFaykKItspdYg, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:25:06.230492Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m100.0%[0m [36mtotal_requested[0m=[35m1[0m
[2m2025-11-11T12:25:06.230550Z[0m [[32m[1minfo     [0m] [1mAll IDs resolved from cache/registry[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m
[2m2025-11-11T12:25:06.230603Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 1/1 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:25:06.230671Z[0m [[32m[1minfo     [0m] [1mAll 1 tracks found in cache   [0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:25:06.230715Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 1/1 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:25:06.230822Z[0m [[32m[1minfo     [0m] [1mAdded 1/1 tracks from artist 7fxtWEwKKrFaykKItspdYg (0 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:25:06.230980Z[0m [[32m[1minfo     [0m] [1mFetching hybrid tracks for artist 7/7: 0rZp7G3gIH6WkyeXbrZnGi[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:25:06.231064Z[0m [[32m[1minfo     [0m] [1mFetching top tracks for artist 0rZp7G3gIH6WkyeXbrZnGi (max_popularity: 80, ratio: 30.0%, target: 1 top + 4 album = 5 total)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:25:06.231125Z[0m [[32m[1minfo     [0m] [1mFiltered top tracks: 10/10 within popularity range 20-80[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:25:06.231168Z[0m [[32m[1minfo     [0m] [1mFetching albums for artist 0rZp7G3gIH6WkyeXbrZnGi[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:25:06.245229Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 diverse tracks (ratio: 30.0%, top: 1, album: 1)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:25:06.245534Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 2 tracks for artist 5rX2c1zow6hCph8PnnU3kF (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:25:06.245592Z[0m [[32m[1minfo     [0m] [1mGot 2 tracks from artist 5rX2c1zow6hCph8PnnU3kF, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:25:06.245800Z[0m [[32m[1minfo     [0m] [1mRetrieved 1 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m50.0%[0m [36mtotal_requested[0m=[35m2[0m
[2m2025-11-11T12:25:06.246052Z[0m [[32m[1minfo     [0m] [1mGetting 1 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:25:06.844443Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 1 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:25:06.844886Z[0m [[32m[1minfo     [0m] [1mConverted 2/2 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{1}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{1}[0m
[2m2025-11-11T12:25:06.844974Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 2/2 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:25:06.845149Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 1 tracks (cached: 1) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:25:07.489396Z[0m [[32m[1minfo     [0m] [1mRetrieved 5 albums for artist 0rZp7G3gIH6WkyeXbrZnGi[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:25:07.489690Z[0m [[32m[1minfo     [0m] [1mFound 5 albums, sampling tracks for diversity[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:25:07.693485Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 1/1 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:25:07.693783Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 2/2 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:25:07.693976Z[0m [[32m[1minfo     [0m] [1mFiltering low-cohesion artist track: Mamae Eu Quero / Chica Chica Boom Chic (cohesion: 0.26 < 0.3 threshold)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.artist_based[0m][0m
[2m2025-11-11T12:25:07.694023Z[0m [[32m[1minfo     [0m] [1mAdded 1/2 tracks from artist 5rX2c1zow6hCph8PnnU3kF (1 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:25:15.840911Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 5 diverse tracks (ratio: 30.0%, top: 1, album: 4)[0m [[0m[1m[34mapp.agents.tools.spotify.artist_search[0m][0m
[2m2025-11-11T12:25:15.841261Z[0m [[32m[1minfo     [0m] [1mHybrid strategy returned 5 tracks for artist 0rZp7G3gIH6WkyeXbrZnGi (popularity: 20-80, ratio: 30.0%)[0m [[0m[1m[34mapp.agents.tools.spotify_service[0m][0m
[2m2025-11-11T12:25:15.841322Z[0m [[32m[1minfo     [0m] [1mGot 5 tracks from artist 0rZp7G3gIH6WkyeXbrZnGi, processing top 5[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:25:15.841486Z[0m [[32m[1minfo     [0m] [1mRetrieved 2 validated IDs from cache[0m [[0m[1m[34mapp.agents.core.id_registry[0m][0m [36mcache_hit_rate[0m=[35m40.0%[0m [36mtotal_requested[0m=[35m5[0m
[2m2025-11-11T12:25:15.841728Z[0m [[32m[1minfo     [0m] [1mGetting 3 tracks from RecoBeat[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:25:16.029887Z[0m [[32m[1minfo     [0m] [1mSuccessfully retrieved 2 tracks[0m [[0m[1m[34mapp.agents.tools.reccobeat.track_info[0m][0m
[2m2025-11-11T12:25:16.030222Z[0m [[32m[1minfo     [0m] [1mConverted 4/5 Spotify track IDs to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m [36mcached[0m=[35m{2}[0m [36mknown_missing[0m=[35m{0}[0m [36mnewly_converted[0m=[35m{2}[0m
[2m2025-11-11T12:25:16.030325Z[0m [[32m[1minfo     [0m] [1mSuccessfully converted 4/5 Spotify tracks to RecoBeat IDs[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:25:16.030444Z[0m [[32m[1minfo     [0m] [1mFetching audio features for 2 tracks (cached: 2) with throttled batches[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:25:27.582565Z[0m [[32m[1minfo     [0m] [1mSuccessfully fetched 2/2 audio features after throttling[0m [[0m[1m[34mapp.agents.tools.reccobeat_service[0m][0m
[2m2025-11-11T12:25:27.582897Z[0m [[32m[1minfo     [0m] [1mEnhanced audio features for 4/5 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.audio_features[0m][0m
[2m2025-11-11T12:25:27.583025Z[0m [[32m[1minfo     [0m] [1mFiltering low-cohesion artist track: You Are Here, Pt. 4 - Relax Soundscape (cohesion: 0.28 < 0.3 threshold)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.generators.artist_based[0m][0m
[2m2025-11-11T12:25:27.583062Z[0m [[32m[1minfo     [0m] [1mAdded 4/5 tracks from artist 0rZp7G3gIH6WkyeXbrZnGi (1 filtered out)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:25:27.583147Z[0m [[32m[1minfo     [0m] [1mGenerated 15 recommendations from 7/7 artists (0 failed)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.artist_pipeline[0m][0m
[2m2025-11-11T12:25:27.583542Z[0m [[32m[1minfo     [0m] [1mIncluded 5 anchor tracks in recommendations (0 user-mentioned, 5 genre-based)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.anchor_track[0m][0m
[2m2025-11-11T12:25:27.583606Z[0m [[32m[1minfo     [0m] [1mGenerated 33 total recommendations in parallel (0 user anchor, 15 artists, 13 seeds)[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.engine[0m][0m
[2m2025-11-11T12:25:27.583702Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_processing[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T12:25:27.583781Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:27.584312Z[0m [[32m[1minfo     [0m] [1mMood filtering: 33 -> 33 tracks[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.track_filter[0m][0m
[2m2025-11-11T12:25:27.584723Z[0m [[32m[1minfo     [0m] [1mDiversity applied: 0 tracks exempted (protected/user-mentioned), 21 tracks penalized[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.handlers.diversity[0m][0m
[2m2025-11-11T12:25:27.584869Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mgenerating_recommendations_diversifying[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T12:25:27.584930Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m2[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:27.585033Z[0m [[32m[1minfo     [0m] [1manchor_track_capping          [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m5[0m [36mlimit[0m=[35m5[0m [36mnote[0m=[35m'user_mentioned includes tracks from user-mentioned artists'[0m [36moverflow[0m=[35m0[0m [36muser_mentioned[0m=[35m0[0m
[2m2025-11-11T12:25:27.585103Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m1[0m [36mlimit[0m=[35m1[0m [36moverflow[0m=[35m12[0m [36msource[0m=[35mreccobeat[0m
[2m2025-11-11T12:25:27.585145Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m15[0m [36mlimit[0m=[35m19[0m [36moverflow[0m=[35m0[0m [36msource[0m=[35martist_discovery[0m
[2m2025-11-11T12:25:27.585222Z[0m [[32m[1minfo     [0m] [1mratio_enforcement_complete    [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36manchor_count[0m=[35m5[0m [36martist_count[0m=[35m15[0m [36martist_ratio[0m=[35m0.9375[0m [36moriginal[0m=[35m33[0m [36mreccobeat_count[0m=[35m1[0m [36mtotal[0m=[35m21[0m
[2m2025-11-11T12:25:27.585280Z[0m [[32m[1minfo     [0m] [1moverflow_fill_start           [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mshortfall[0m=[35m4[0m
[2m2025-11-11T12:25:27.585347Z[0m [[32m[1minfo     [0m] [1moverflow_fill_complete        [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36madded[0m=[35m4[0m [36mtotal[0m=[35m25[0m
[2m2025-11-11T12:25:27.585476Z[0m [[32m[1minfo     [0m] [1mGenerated 63 final recommendations[0m [[0m[1m[34mapp.agents.recommender.recommendation_generator.core.agent[0m][0m
[2m2025-11-11T12:25:27.585578Z[0m [[32m[1minfo     [0m] [1mAgent recommendation_generator completed execution in 114.415117s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:25:27.585635Z[0m [[32m[1minfo     [0m] [1mGenerated additional recommendations[0m [[0m[1m[34mapp.agents.recommender.orchestrator.improvement_strategy[0m][0m [36mnew_count[0m=[35m63[0m [36mprevious_count[0m=[35m41[0m
[2m2025-11-11T12:25:27.585850Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:27.585919Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:27.585963Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mrecommendations_generated[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:27.586124Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:27.586198Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:27.586248Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mgenerating_recommendations[0m [36mnew_step[0m=[35mrecommendations_generated[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:27.688586Z[0m [[32m[1minfo     [0m] [1mStarting final processing and cleanup...[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:27.689065Z[0m [[32m[1minfo     [0m] [1mduplicates_removed            [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mafter[0m=[35m42[0m [36mbefore[0m=[35m63[0m [36mremoved[0m=[35m21[0m
[2m2025-11-11T12:25:27.689203Z[0m [[32m[1minfo     [0m] [1mEnriching tracks with missing Spotify data...[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:27.689306Z[0m [[32m[1minfo     [0m] [1mNo tracks need enrichment - all have valid Spotify URIs[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:29.358707Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mstr[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:35.438966Z[0m [[32m[1minfo     [0m] [1mLLM assessment: quality=0.7, meets_expectations=True[0m [[0m[1m[34mapp.agents.recommender.orchestrator.quality_evaluator[0m][0m
[2m2025-11-11T12:25:35.439218Z[0m [[32m[1minfo     [0m] [1mLLM flagged outlier: Ataraxia by Novo Amor (matched from concern: Ataraxia by Novo Amor feels out of place because its sound leans more towards at...)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T12:25:35.439269Z[0m [[32m[1minfo     [0m] [1mLLM flagged outlier: Anchor by Novo Amor (matched from concern: Anchor by Novo Amor feels out of place because its production and emotional tone...)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.cohesion_calculator[0m][0m
[2m2025-11-11T12:25:35.439329Z[0m [[32m[1minfo     [0m] [1mLLM identified 2 additional outliers: ['Ataraxia', 'Anchor'][0m [[0m[1m[34mapp.agents.recommender.orchestrator.quality_evaluator[0m][0m
[2m2025-11-11T12:25:35.439398Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Ataraxia by Novo Amor (cohesion: 0.42)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439447Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Anchor by Novo Amor (cohesion: 0.42)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439491Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: In Your Own Time by Calexico, Iron & Wine (cohesion: 0.28)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439533Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Vissel by Jos√© Gonz√°lez (cohesion: 0.27)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439566Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: COPYCAT by Billie Eilish (cohesion: 0.00)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439592Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Teardrop by Jos√© Gonz√°lez (cohesion: 0.27)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439612Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Metamodernity by Vansire (cohesion: 0.00)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439642Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Maldito ChatGPT by Camilo (cohesion: 0.00)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439672Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Beamer by T.I BLAZE (cohesion: 0.00)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439694Z[0m [[32m[1minfo     [0m] [1mFiltering outlier from final playlist: Bad Girls Like You - English Version by Tobii, DOLLA (cohesion: 0.22)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439738Z[0m [[32m[1minfo     [0m] [1mFinal outlier filtering: removed 10 tracks (0 protected tracks kept despite being outliers)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.439861Z[0m [[32m[1minfo     [0m] [1manchor_track_capping          [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m5[0m [36mlimit[0m=[35m5[0m [36mnote[0m=[35m'user_mentioned includes tracks from user-mentioned artists'[0m [36moverflow[0m=[35m0[0m [36muser_mentioned[0m=[35m0[0m
[2m2025-11-11T12:25:35.439952Z[0m [[32m[1minfo     [0m] [1msource_capping                [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mallowed[0m=[35m12[0m [36mlimit[0m=[35m12[0m [36moverflow[0m=[35m15[0m [36msource[0m=[35martist_discovery[0m
[2m2025-11-11T12:25:35.440026Z[0m [[32m[1minfo     [0m] [1mratio_enforcement_complete    [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36manchor_count[0m=[35m5[0m [36martist_count[0m=[35m12[0m [36martist_ratio[0m=[35m1.0[0m [36moriginal[0m=[35m32[0m [36mreccobeat_count[0m=[35m0[0m [36mtotal[0m=[35m17[0m
[2m2025-11-11T12:25:35.440080Z[0m [[32m[1minfo     [0m] [1moverflow_fill_start           [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36mshortfall[0m=[35m1[0m
[2m2025-11-11T12:25:35.440124Z[0m [[32m[1minfo     [0m] [1moverflow_fill_complete        [0m [[0m[1m[34mapp.agents.recommender.orchestrator.recommendation_processor[0m][0m [36madded[0m=[35m1[0m [36mtotal[0m=[35m18[0m
[2m2025-11-11T12:25:35.440176Z[0m [[32m[1minfo     [0m] [1mFinal processing complete: 18 tracks delivered (cohesion: 0.49, overall: 0.66)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.440214Z[0m [[32m[1minfo     [0m] [1mFinal processing complete: 18 tracks delivered[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.440246Z[0m [[32m[1minfo     [0m] [1mOrchestration completed with 18 unique recommendations after 1 iteration(s)[0m [[0m[1m[34mapp.agents.recommender.orchestrator.orchestrator_agent[0m][0m
[2m2025-11-11T12:25:35.440311Z[0m [[32m[1minfo     [0m] [1mAgent orchestrator completed execution in 122.26986s[0m [[0m[1m[34mapp.agents.core.base_agent[0m][0m
[2m2025-11-11T12:25:37.326819Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mrecommendations_ready[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mgenerating_recommendations[0m
[2m2025-11-11T12:25:37.327050Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:37.327185Z[0m [[32m[1minfo     [0m] [1mStarting playlist ordering for session ecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:37.327292Z[0m [[32m[1minfo     [0m] [1mAnalyzing energy characteristics for 18 tracks in batches of 8[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:37.333023Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:37.333269Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:37.333336Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35moptimizing_recommendations[0m [36mnew_step[0m=[35mordering_playlist[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mgenerating_recommendations_fetching[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:37.333409Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35moptimizing_recommendations[0m [36mstep[0m=[35mordering_playlist[0m
INFO:     127.0.0.1:42998 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:25:46.817679Z[0m [[32m[1minfo     [0m] [1mSuccessfully analyzed 18 tracks across 3 batches[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:46.818104Z[0m [[32m[1minfo     [0m] [1mAttached energy analyses to 18 tracks[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:46.818185Z[0m [[32m[1minfo     [0m] [1mDetermining optimal ordering strategy[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:52.270051Z[0m [[32m[1minfo     [0m] [1mSelected strategy: chill_journey[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:52.270451Z[0m [[32m[1minfo     [0m] [1mOrdering tracks according to strategy[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:52.270635Z[0m [[32m[1minfo     [0m] [1mPhase distribution for 18 tracks: {'opening': 3, 'build': 3, 'mid': 6, 'high': 2, 'descent': 3, 'closure': 1}[0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.phase_assigner[0m][0m
[2m2025-11-11T12:25:52.273575Z[0m [[32m[1minfo     [0m] [1mPhase 'opening': 3 tracks     [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:52.273726Z[0m [[32m[1minfo     [0m] [1mPhase 'build': 3 tracks       [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:52.273797Z[0m [[32m[1minfo     [0m] [1mPhase 'mid': 6 tracks         [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:52.273894Z[0m [[32m[1minfo     [0m] [1mPhase 'high': 2 tracks        [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:52.274069Z[0m [[32m[1minfo     [0m] [1mPhase 'descent': 3 tracks     [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:52.274182Z[0m [[32m[1minfo     [0m] [1mPhase 'closure': 1 tracks     [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m
[2m2025-11-11T12:25:52.274255Z[0m [[32m[1minfo     [0m] [1mPlaylist ordering complete    [0m [[0m[1m[34mapp.agents.recommender.playlist_orderer.ordering_agent[0m][0m [36mstrategy[0m=[35mchill_journey[0m [36mtrack_count[0m=[35m18[0m
[2m2025-11-11T12:25:53.168168Z[0m [[32m[1minfo     [0m] [1mWebSocket received state change notification[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mcurrent_step[0m=[35mordering_playlist[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35moptimizing_recommendations[0m
[2m2025-11-11T12:25:53.168392Z[0m [[32m[1minfo     [0m] [1mWebSocket state added to queue[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mqueue_size[0m=[35m1[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:53.169003Z[0m [[32m[1minfo     [0m] [1mWebSocket processing task result[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mresult_type[0m=[35mAgentState[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:53.169098Z[0m [[32m[1minfo     [0m] [1mWebSocket processing state update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:53.169141Z[0m [[32m[1minfo     [0m] [1mWebSocket detected state change[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36mnew_status[0m=[35mcompleted[0m [36mnew_step[0m=[35mrecommendations_ready[0m [36mold_status[0m=[35moptimizing_recommendations[0m [36mold_step[0m=[35mordering_playlist[0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m
[2m2025-11-11T12:25:53.169229Z[0m [[32m[1minfo     [0m] [1mWebSocket sending status update[0m [[0m[1m[34mapp.agents.routes.streaming.websocket_handler[0m][0m [36msession_id[0m=[35mecec74bb-2d8a-4e3b-8459-75d0943c7d68[0m [36mstatus[0m=[35mcompleted[0m [36mstep[0m=[35mrecommendations_ready[0m
[2m2025-11-11T12:25:54.141601Z[0m [[32m[1minfo     [0m] [1mWorkflow ecec74bb-2d8a-4e3b-8459-75d0943c7d68 completed in 781.82s[0m [[0m[1m[34mapp.agents.workflows.workflow_manager[0m][0m
INFO:     127.0.0.1:46964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/status HTTP/1.1" 200 OK
INFO:     127.0.0.1:42998 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:42998 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:46964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/results HTTP/1.1" 200 OK
INFO:     127.0.0.1:42998 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:42998 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
INFO:     127.0.0.1:46964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/results HTTP/1.1" 200 OK
INFO:     127.0.0.1:46964 - "GET /api/agents/recommendations/ecec74bb-2d8a-4e3b-8459-75d0943c7d68/cost HTTP/1.1" 200 OK
[2m2025-11-11T12:27:57.316562Z[0m [[32m[1minfo     [0m] [1mGetting track details         [0m [[0m[1m[34mapp.spotify.routes[0m][0m [36mtrack_identifier[0m=[35mspotify:track:5QUeSXjTMHbq1fW5da2waF[0m [36muser_id[0m=[35m1[0m
INFO:     127.0.0.1:34094 - "GET /api/spotify/tracks/spotify%3Atrack%3A5QUeSXjTMHbq1fW5da2waF HTTP/1.1" 200 OK
